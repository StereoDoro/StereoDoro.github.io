(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4242],{61920:function(e,n,i){"use strict";i.d(n,{n:function(){return o}});var a=i(85893),t=i(11355),l=i(67294);function o(e){let{children:n}=e;return(0,a.jsx)(t.u,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:n})}},1002:function(e,n,i){"use strict";i.d(n,{Z:function(){return e_}});var a=i(85893),t=i(34202),l=i(87578),o=i(67294),s=i(64529);let r=(0,s.ZP)(e=>({trigger:{},setTrigger:(n,i)=>e(e=>({trigger:{...e.trigger,[n]:i}}))}));var d=i(13224),u=i(85358),c=i(11163),m=i(53018),v=i(83457),h=i.n(v),f=i(86501),p=i(31574),k=i(25033);function g(){let{user:e,isLoggedIn:n}=(0,l.Z)();return(0,o.useEffect)(()=>{n&&e&&(0,k.lO)(e,"user-login-success")},[n,null==e?void 0:e.id]),(0,a.jsx)(a.Fragment,{})}var x=i(47041);function N(e){let{}=e;return(0,o.useEffect)(()=>{let e=function(){var e;let n=null===(e=(0,x.getCookie)("flash"))||void 0===e?void 0:e.toString();return n?JSON.parse(n):null}();e&&e.type&&(f.Am[e.type](e.message,{position:e.position}),(0,x.deleteCookie)("flash"))},[]),(0,a.jsx)(a.Fragment,{})}var w=i(4298),b=i.n(w);function y(){var e;let{authUser:n,user:i,isBetaUser:t}=(0,l.Z)(),o={name:null!==(e=null==i?void 0:i.displayName)&&void 0!==e?e:null==i?void 0:i.username,email:null==n?void 0:n.email,avatar:null==i?void 0:i.picture};return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b(),{id:"helpscout-beacon",strategy:"afterInteractive",children:'!function(e,t,n){function a(){var e=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://beacon-v2.helpscout.net",e.parentNode.insertBefore(n,e)}if(e.Beacon=n=function(t,n,a){e.Beacon.readyQueue.push({method:t,options:n,data:a})},n.readyQueue=[],"complete"===t.readyState)return a();e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}(window,document,window.Beacon||function(){});'}),(0,a.jsxs)(b(),{id:"helpscout-beacon-init",strategy:"afterInteractive",children:["window.Beacon('init', 'e69776c0-50a7-446c-a0d2-3ae47d704c81');","window.Beacon('identify', ".concat(JSON.stringify(o),");"),"window.Beacon('config', ".concat(JSON.stringify({hideFABOnMobile:!0}),")")]})]}):null}var S=i(6512),F=i(86215),j=i(68171),C=i(31415),D=i(43407),_=i(44820),A=i(83692),I=i(86520),M=i(11355),R=i(23),T=i(41269),V=i(14441),E=i(45286),L=i(50629),U=i(96445),P=i(15814),q=i(68930),B=i(73047),O=i(85518),H=i(37415);function Z(e){var n,i;let{}=e,l=(0,P.H)(),s=(0,_.Q)(),{castHologram:r,checkDeviceConnection:d}=(0,q.q)();async function u(){l.hologram&&r(l.hologram)}async function c(){d(""),l.hologram&&r(l.hologram)}async function m(){s.setOpen(!1),await (0,B.Vs)(900)}(0,o.useEffect)(()=>{if(s.isOpen&&!l.isDisconnecting){if(s.isOpen&&O.tq){s.setState("mobile");return}if(s.isOpen&&O.G6){s.setState("browser_not_supported");return}l.isError&&!l.isConnecting&&l.version.major>2&&l.version.minor>3?(s.isOwner||s.setState("first_time_connect"),l.setError(!1)):l.isConnecting||l.isConnected&&s.setState("connected")}},[l.isError,l.isConnected,l.isConnecting,l.isCasting,s.isOpen]);let v=l.isCasting&&l.hologram&&(null===(n=l.hologram)||void 0===n?void 0:n.id)>0;return!function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[i,a]=(0,o.useState)(0),l=t.S.stats.hologramPageView.useMutation();(0,o.useEffect)(()=>{e&&i!=e&&!n&&(a(e),l.mutate({lookup:e.toString(),isDeviceView:!0}))},[e,n])}(null===(i=l.hologram)||void 0===i?void 0:i.id,!v),(0,a.jsx)(M.u.Root,{show:s.isOpen,as:o.Fragment,children:(0,a.jsx)(M.u.Child,{as:o.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 -translate-y-5",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:(0,p.A)("bg-gradient-to-r from-[#5901FB] to-[#9E53FB] text-sm text-white","connected"==s.state||"retry"==s.state?"":"py-4"),children:(0,a.jsxs)("div",{className:"mx-auto flex max-w-7xl flex-row space-x-4 px-2 sm:px-6 lg:px-8",children:["first_time_connect"==s.state&&(0,a.jsx)(z,{icon:(0,a.jsx)(R.Z,{className:"w-6"}),title:"Connect to holographic display",description:"Do you own a Looking Glass Display?",buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"rounded-xl bg-white px-8 py-4 font-bold text-black",onClick:()=>{s.setState("info")},children:"No"}),(0,a.jsx)("button",{className:"rounded-xl bg-black px-8 py-4 font-bold",onClick:()=>{s.setIsOwner(!0),u()},children:(0,a.jsx)("span",{className:"holo-light",children:"Yes"})})]})}),("info"==s.state||"mobile"==s.state)&&(0,a.jsx)(z,{icon:(0,a.jsx)(T.Z,{className:"w-6"}),title:"View holograms IRL",description:"Looking Glass Portrait is the world's only personal 3D holographic display. No headset required.",buttons:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(H.w,{href:(0,k.tE)("https://lookingglassfactory.com/looking-glass-portrait","guide","onboarding"),target:"_blank",className:"rounded-xl bg-black px-8 py-4 font-bold",children:(0,a.jsx)("span",{className:"holo-light",children:"Learn more"})})})}),"cant_connect"==s.state&&(0,a.jsx)(z,{icon:(0,a.jsx)(V.Z,{className:"w-6"}),title:"Unable to connect",description:"Make sure your display is in Desktop Mode and Bridge is running.",buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.w,{href:(0,k.tE)("https://lookingglassfactory.com/onboarding-instructions/looking-glass-portrait","guide","onboarding"),target:"_blank",className:"rounded-xl bg-white px-8 py-4 font-bold text-black",onClick:()=>{(0,k.Tj)("cast-setup-guide-btn")},children:"Setup guide"}),(0,a.jsx)("button",{className:"rounded-xl bg-black px-8 py-4 font-bold",onClick:c,children:(0,a.jsx)("span",{className:"holo-light",children:"Try again"})})]})}),"disconnected"==s.state&&(0,a.jsx)(z,{icon:(0,a.jsx)(V.Z,{className:"w-6"}),title:"Disconnected from Bridge",description:"Looks Like Bridge is no longer running. Please restart Bridge and try again.",buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.w,{href:(0,k.tE)("https://docs.lookingglassfactory.com/software/looking-glass-bridge","guide","onboarding"),target:"_blank",className:"rounded-xl bg-white px-8 py-4 font-bold text-black",onClick:()=>{(0,k.Tj)("cast-setup-guide-btn")},children:"Setup guide"}),(0,a.jsx)("button",{className:"rounded-xl bg-black px-8 py-4 font-bold",onClick:u,children:(0,a.jsx)("span",{className:"holo-light",children:"Try again"})})]})}),"outdated"==s.state&&(0,a.jsx)(z,{icon:(0,a.jsx)(E.Z,{className:"w-6"}),title:"Software update recommended",description:"You're running an older version of our driver, Please Update to the latest version.",buttons:(0,a.jsx)(H.w,{href:(0,k.tE)("https://lookingglassfactory.com/software/looking-glass-bridge","bridge","update"),target:"_blank",className:"rounded-xl bg-black px-8 py-4 font-bold",onClick:()=>{(0,k.Tj)("cast-update-btn")},children:"Download Bridge"})}),"retry"==s.state&&(0,a.jsx)("div",{className:"flex flex-1 place-items-center space-x-4",children:(0,a.jsxs)("div",{className:"w-full text-right font-bold",children:[!l.isCasting&&"Connecting to Looking Glass device...",l.isCasting&&"Casting to Looking Glass device..."]})}),"connected"==s.state&&(0,a.jsx)("div",{className:"flex flex-1 place-items-center space-x-4",children:(0,a.jsxs)("div",{className:"w-full text-right font-bold",children:[l.hologram&&(0,a.jsxs)(a.Fragment,{children:["Casting\xa0",(0,a.jsx)(H.w,{href:l.hologram.permalink,className:"underline",children:l.hologram.title})]}),!l.hologram&&"Connected!"]})}),"browser_not_supported"==s.state&&(0,a.jsx)(z,{icon:(0,a.jsx)(L.Z,{className:"w-6"}),title:"Browser not supported",description:"Please use Firefox or Chrome on a desktop computer in order to connect to your Looking Glass display.",buttons:(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"flex place-items-center",children:(0,a.jsx)("button",{className:"p-2",onClick:m,children:(0,a.jsx)(U.Z,{className:"w-6"})})})]})})})})}function z(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col space-y-2 px-2 md:flex-row md:space-y-0 md:px-0",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-row place-items-center md:space-x-4",children:[(0,a.jsx)("div",{className:"hidden h-12 w-12 rounded-full bg-white bg-opacity-20 p-3 md:inline-block",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-lg font-bold md:text-2xl",children:e.title}),(0,a.jsx)("div",{className:"text-xs md:text-sm",children:e.description})]})]}),(0,a.jsx)("div",{className:"flex flex-row place-items-center space-x-2",children:e.buttons})]})})}var G=i(26477),Q=i(54364),W=i(8596),Y=i(47543),X=i.n(Y);function $(e){let{forceDarkMode:n=!1,hologram:i}=e,t=(0,P.H)(),l=(0,_.Q)(),{checkDeviceConnection:s}=(0,q.q)(),r=(0,W.g)(),d=(0,o.useRef)(null),u=(0,A.t)(),{castHologram:m}=(0,q.q)(),v=(0,c.useRouter)();async function h(){if(!1==t.isConnected){if(!1==(await s((null==i?void 0:i.type)||"undefined")).isValid||!i)return;m(i)}t.isConnected&&t.isCasting&&(r.wipeFromLookingGlass(),l.setOpen(!1),l.setIsOwner(!1)),i||t.isCasting||l.setOpen(!l.isOpen),(0,k.Tj)("cast-connect-btn")}(0,o.useEffect)(()=>{t.isConnected&&l.setIsOwner(!0)},[t.isError,t.isConnected]),(0,o.useEffect)(()=>{var e,i,a,l,o,s,r,c,m,v,h,f,p,k,g,x;(!n||t.isConnected)&&(t.isConnected?(null===(e=d.current)||void 0===e||null===(i=e.classList)||void 0===i||i.remove("fill-black"),null===(a=d.current)||void 0===a||null===(l=a.classList)||void 0===l||l.remove("fill-white"),null===(o=d.current)||void 0===o||null===(s=o.classList)||void 0===s||s.add("fill-green-400")):t.isConnected||(null===(r=d.current)||void 0===r||null===(c=r.classList)||void 0===c||c.remove("fill-green-400"),u?(null===(m=d.current)||void 0===m||null===(v=m.classList)||void 0===v||v.add("fill-white"),null===(h=d.current)||void 0===h||null===(f=h.classList)||void 0===f||f.remove("fill-black")):(null===(p=d.current)||void 0===p||null===(k=p.classList)||void 0===k||k.add("fill-black"),null===(g=d.current)||void 0===g||null===(x=g.classList)||void 0===x||x.remove("fill-white"))))},[]),(0,o.useEffect)(()=>{var e;i&&("RGBD"!=i.type||i.rgbdAssets)&&(null===(e=t.hologram)||void 0===e?void 0:e.id)!=i.id&&!1!=t.isConnected&&m(i)},[i]);let f="Connect to Looking Glass";return t.isConnecting&&(f="Connecting..."),t.isConnected&&(f="Connected!"),t.isConnected&&t.isCasting&&(f="Stop casting"),(0,a.jsx)(j.v,{as:"div",className:"relative ml-3 hidden sm:inline",children:(0,a.jsx)("div",{id:"nav-connect-device-btn",onClick:h,children:(0,a.jsx)(Q.u,{content:f,side:"bottom",delayDuration:t.isConnecting||t.isCasting?1:void 0,children:(0,a.jsxs)(j.v.Button,{className:"flex h-8 w-8 place-content-center place-items-center rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[(0,a.jsx)("span",{className:"sr-only",children:"Connect to Looking Glass"}),(0,a.jsx)("div",{className:(0,p.A)("h-11 w-11 rounded-full p-3",t.isCasting?X().pulse:""),children:(0,a.jsx)(G.Z,{reference:d,className:(0,p.A)("w-5 transition-all hover:fill-fuchsia-600",t.isConnected?"fill-green-400":"fill-black dark:fill-white"),animate:t.isConnecting})})]})})})},v.asPath)}var J=i(80205),K=i(22570);function ee(){let{user:e,isLoggedIn:n,isBetaUser:i,isLoading:t}=(0,l.Z)(),s=(0,o.useRef)(null),[r,d]=(0,o.useState)(!1),[u,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{u&&!t&&(n?v||d(!0):window.location.href="/api/auth/login?returnTo=/upload",c(!1))},[t,u]);let v=(0,m.o)(e=>e.isHologramUploading);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)("button",{id:"upload-btn",ref:s,className:"mb-1 mt-1 flex h-12 w-20 place-content-center rounded-xl bg-black bg-foil bg-[position:-275px_-60px] px-7 py-3 drop-shadow-md transition-all duration-300 ease-out hover:mt-0 hover:bg-[position:-270px_-60px] hover:drop-shadow-xl active:mt-2 active:bg-[position:-270px_-70px] active:drop-shadow-md",onClick:function(){c(!0)},children:v?(0,a.jsx)(J.Z,{className:"h-full"}):(0,a.jsx)("img",{src:"/plus-icon.svg",className:"h-full"})})}),(0,a.jsx)(K.ZP,{open:r,forceOpen:r,onClose:function(){d(!1)}})]})}var en=i(54763);let ei=[];function ea(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.u,{as:o.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,a.jsx)(F.J.Panel,{className:"absolute left-1/2 z-10 mt-3 w-screen max-w-md -translate-x-1/2 transform px-2 sm:px-0",children:(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:[(0,a.jsx)("div",{className:"relative grid gap-6 p-4 sm:gap-8 sm:p-6 lkg-container-modal",children:e.items.map(e=>(0,a.jsxs)("a",{href:e.href,target:e.target,onClick:n=>{e.onClick&&(n.preventDefault(),e.onClick())},className:"group -m-3 flex items-start rounded-lg p-3 transition duration-150 ease-in-out hover:bg-black hover:dark:bg-white !bg-opacity-5",children:[(0,a.jsx)(e.icon,{className:"h-8 w-8 flex-shrink-0 fill-violet-500 group-hover:fill-violet-400","aria-hidden":"true"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:e.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-black dark:text-white !text-opacity-50",children:e.description})]})]},e.name))}),(null==ei?void 0:ei.length)>0&&(0,a.jsx)("div",{className:"space-y-6 bg-gray-50 px-5 py-5 sm:flex sm:space-y-0 sm:space-x-10 sm:px-8",children:ei.map(e=>(0,a.jsx)("div",{className:"flow-root",children:(0,a.jsxs)("a",{href:e.href,className:"-m-3 flex items-center rounded-md p-3 text-base font-medium text-gray-900 transition duration-150 ease-in-out hover:bg-gray-100",children:[(0,a.jsx)(e.icon,{className:"h-6 w-6 flex-shrink-0 text-gray-400","aria-hidden":"true"}),(0,a.jsx)("span",{className:"ml-3",children:e.name})]})},e.name))})]})})})})}var et=i(66692),el=i(35871);function eo(e){return(0,a.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 340 340",xmlSpace:"preserve",className:e.className,children:(0,a.jsxs)("g",{children:[(0,a.jsx)("polygon",{className:"st0",points:"178.1,177 160.2,184.6 178,192.3 195.9,184.7 "}),(0,a.jsx)("polygon",{className:"st0",points:"126.1,170.2 146.7,179 178,165.5 209.2,178.8 229.7,170.1 177.9,146.8 "}),(0,a.jsx)("polygon",{className:"st0",points:"178.2,203.7 146.9,190.3 126.5,199 178.1,222.3 229.8,199 209.3,190.3 "}),(0,a.jsx)("polygon",{className:"st0",points:"118.9,178.3 118.9,191.1 133.8,184.7 "}),(0,a.jsx)("polygon",{className:"st0",points:"237.4,191 237.4,178.1 222.4,184.5 "}),(0,a.jsx)("polygon",{className:"st0",points:"148.4,63.2 88.2,63.2 88.2,70.8 125,70.8 141.7,102.2 291.4,102.2 299.8,189.2 306.1,93.9 166.5,93.9 "}),(0,a.jsx)("path",{className:"st0",d:"M135,113.4L118.3,82H49.5l13.8,170.2h231.4l-13.5-138.8H135z M247.9,202.3l-69.8,31.6l-69.8-31.6v-35.3 l69.8-31.6l69.8,31.6V202.3z"})]})})}function es(e){return(0,a.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 22 24",xmlSpace:"preserve",className:e.className,children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{className:"st0",d:"M10,11.4c-0.4,0-0.7,0.5-0.7,1c0,0.6,0.3,1,0.7,1c0.4,0,0.7-0.5,0.7-1C10.7,11.9,10.4,11.4,10,11.4z"}),(0,a.jsx)("path",{className:"st0",d:"M18.5,6.2c0-1.1-0.9-2-1.9-2H6C4.9,4.2,4,5.1,4,6.2v10.3c0,1.1,0.9,2,1.9,2h9.4l-0.4-1.2l3.5,2.8V6.2z M13.1,15.5L12.8,15c0.6-0.2,1.2-0.6,1.8-1.3c-0.7,0.6-1.7,1-3.3,1c-1.6,0-2.7-0.5-3.3-1c0.6,0.7,1.2,1.1,1.8,1.3l-0.3,0.5 c0,0-1.6,0-2.7-1.4c0.2-3.3,1.3-5,1.3-5S8.8,8.3,10,8.2l0.1,0.2C9.2,8.6,8.6,9,8.1,9.5c0.8-0.5,1.7-1,3.1-1c1.5,0,2.3,0.5,3.1,1 c-0.5-0.5-1-0.9-2-1.1l0.1-0.2c1.1,0.1,2.1,0.9,2.1,0.9s1.1,1.7,1.3,5C14.8,15.4,13.1,15.5,13.1,15.5z"}),(0,a.jsx)("path",{className:"st0",d:"M12.5,11.4c-0.4,0-0.7,0.5-0.7,1c0,0.6,0.3,1,0.7,1c0.4,0,0.7-0.5,0.7-1C13.3,11.9,12.9,11.4,12.5,11.4z"})]})})}function er(e){return(0,a.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 340 340",xmlSpace:"preserve",className:e.className,children:(0,a.jsxs)("g",{children:[(0,a.jsx)("polygon",{className:"st0",points:"130.8,64.5 125.7,60.5 77,235.1 85,230.6 "}),(0,a.jsx)("polygon",{className:"st0",points:"232.2,64.5 241.3,58.4 128.4,57.6 134.4,62.5 "}),(0,a.jsx)("polygon",{className:"st0",points:"78,237.6 84.9,254 203.7,282.4 189.2,263.9 "}),(0,a.jsx)("polygon",{className:"st0",points:"223.6,259.8 242.3,241.7 242.3,240.8 229,238.2 "}),(0,a.jsx)("polygon",{className:"st0",points:"224.8,97.5 162,94.7 121.9,238.4 188.6,253.6 "}),(0,a.jsx)("polygon",{className:"st0",points:"98.5,232.4 112.9,235.8 153.1,91.2 141.7,80 "}),(0,a.jsx)("polygon",{className:"st0",points:"229.4,77.4 146.8,75.8 159.5,86.8 226.5,88.9 "}),(0,a.jsx)("polygon",{className:"st0",points:"228.8,164.2 231.4,165.1 233.9,154.3 231.2,153.4 "}),(0,a.jsx)("polygon",{className:"st0",points:"244.2,105.7 246.9,106.6 249.3,95.6 246.7,94.7 "}),(0,a.jsx)("path",{className:"st0",d:"M245,59.7l-49.4,201.8l15,19.7l3.6-14.7l7.5-31.3L263,69.6L245,59.7z M235.4,168.6c-0.3,0.4-0.6,1.2-1.2,1.3 c-0.4,0.4-1.2,0.4-1.8,0.3l-6.9-2.2c-1.2-0.4-1.8-1.5-1.5-2.7l3.6-15.5c0.3-0.4,0.6-1.2,1.2-1.3c0.4-0.4,1.2-0.4,1.8-0.3l6.9,2.2 c1.2,0.4,1.5,1.5,1.5,2.7L235.4,168.6z M244.4,132.8c-0.3,0.4-0.6,1.2-1.2,1.3c-0.4,0.4-1.2,0.4-1.8,0.3l-6.9-2.2 c-1.2-0.4-1.8-1.5-1.5-2.7l3.6-15.5c0.3-0.4,0.6-1.2,1.2-1.3c0.4-0.4,1.2-0.4,1.8-0.3l6.9,2.2c1.2,0.4,1.5,1.5,1.5,2.7L244.4,132.8 z M250.5,110.2c-0.3,0.4-0.6,1.2-1.2,1.3c-0.4,0.4-1.2,0.4-1.8,0.3l-6.9-2.2c-1.2-0.4-1.8-1.5-1.5-2.7l3.6-15.5 c0.3-0.4,0.6-1.2,1.2-1.3c0.6-0.4,1.3-0.4,1.8-0.3l6.9,2.2c1.2,0.4,1.8,1.5,1.5,2.7L250.5,110.2z"}),(0,a.jsx)("polygon",{className:"st0",points:"237.7,128.6 240.4,129.5 242.8,118.5 240.1,117.6 "})]})})}function ed(e){return(0,a.jsxs)("svg",{width:"23",height:"28",viewBox:"0 0 23 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[(0,a.jsx)("path",{d:"M5.3009 20.2796L6.13919 19.9248L11.1003 22.0317L16.0632 19.9248L16.8971 20.2796L11.1003 22.7422L5.3009 20.2796Z"}),(0,a.jsx)("path",{d:"M11.1012 18.3207L6.14095 20.4274L5.3009 20.0735L11.1012 17.6094L16.898 20.0726L16.0641 20.4274L11.1012 18.3207Z"}),(0,a.jsx)("path",{d:"M0 22.7523V17.5949L11.1045 12.6162L22.209 17.5949V22.7523L11.1045 27.7309L0 22.7523ZM11.1045 27.0143L21.0628 22.5496L15.4728 20.1758L21.0672 17.7993L11.1045 13.332L1.11889 17.8099L6.73359 20.1749L1.14264 22.5479L11.1045 27.0143V27.0143ZM21.5581 22.0497V18.3018L17.1432 20.1767L21.5581 22.0506V22.0497ZM0.650929 22.0471L5.05789 20.1758L0.650929 18.3045V22.0462V22.0471Z"}),(0,a.jsx)("path",{d:"M16.8979 8.4208H13.6029V3.29531C13.6029 3.19821 13.5644 3.10509 13.4957 3.03643C13.427 2.96777 13.3339 2.9292 13.2368 2.9292H8.84354C8.74644 2.9292 8.65332 2.96777 8.58466 3.03643C8.516 3.10509 8.47743 3.19821 8.47743 3.29531V8.4208H5.18247C5.1141 8.42049 5.04702 8.43933 4.98881 8.47518C4.93059 8.51104 4.88359 8.56247 4.8531 8.62367C4.82262 8.68486 4.80988 8.75337 4.81633 8.82143C4.82278 8.88949 4.84815 8.95439 4.88958 9.00877L10.7473 16.697C10.7814 16.7419 10.8255 16.7783 10.8761 16.8034C10.9266 16.8285 10.9823 16.8415 11.0387 16.8415C11.0951 16.8415 11.1508 16.8285 11.2014 16.8034C11.2519 16.7783 11.296 16.7419 11.3301 16.697L17.1878 9.00877C17.2291 8.95459 17.2545 8.88996 17.261 8.82216C17.2676 8.75436 17.2551 8.68607 17.225 8.62498C17.1948 8.56389 17.1483 8.51241 17.0905 8.47634C17.0327 8.44027 16.966 8.42104 16.8979 8.4208Z"}),(0,a.jsx)("path",{d:"M8.84352 1.46464H13.2368C13.3339 1.46464 13.427 1.42606 13.4957 1.35741C13.5643 1.28875 13.6029 1.19563 13.6029 1.09853C13.6029 1.00143 13.5643 0.90831 13.4957 0.839652C13.427 0.770994 13.3339 0.732422 13.2368 0.732422H8.84352C8.74643 0.732422 8.65331 0.770994 8.58465 0.839652C8.51599 0.90831 8.47742 1.00143 8.47742 1.09853C8.47742 1.19563 8.51599 1.28875 8.58465 1.35741C8.65331 1.42606 8.74643 1.46464 8.84352 1.46464Z"})]})}var eu=i(25675),ec=i.n(eu),em=i(61920),ev=i(98597);function eh(e){let{forceDarkMode:n,loginReturnTo:i,hologram:t}=e,{user:s,isLoading:r,isLoggedIn:d,isBetaUser:u,isAdmin:c,isFetchingDBUser:m}=(0,l.Z)(),v=(0,A.t)()||n,h="".concat("https://blocks.glass","/api/auth/login");i&&(h+="?returnTo=".concat(i));let[f,k]=(0,o.useState)(!1),g=[{name:"Discover",href:"/discover",topLevel:!0,visible:!0},{name:"Manage",href:"/manage",topLevel:!0,visible:u},{name:"Resources",href:"/learn",target:"_blank",topLevel:!0,visible:!0,flyoutPanel:[{name:"Getting started",description:"Learn more about Blocks and its capabilities.",href:"/learn",target:"_blank",icon:et.Z},{name:"3D software plugins",description:"Easily convert your 3D content to holograms.",href:"https://lookingglassfactory.com/software",target:"_blank",onClick:u?()=>{k(!0)}:void 0,icon:ed},{name:"Displays",description:"The world's first group-viewable 3D holographic displays. No headset required.",href:"https://lookingglassfactory.com",target:"_blank",icon:er},{name:"Documentation",description:"Our docs aim to provide all the information you need to use your Looking Glass.",href:"https://docs.lookingglassfactory.com",target:"_blank",icon:eo},{name:"Discord",description:"Chat with other creators and get help from the Looking Glass team.",href:"https://discord.gg/lookingglassfactory",target:"_blank",icon:es}]},{name:"Discord",href:"https://discord.gg/lookingglassfactory",target:"_blank",topLevel:!1,visible:!0},{name:"Profile",href:"/".concat(null==s?void 0:s.username),topLevel:!1,visible:u},{name:"Help",topLevel:!1,visible:!0,href:"",onClick:e=>{e.preventDefault(),window.Beacon("open")}},{name:"Admin",href:"/admin/invite",menu:[{name:"Invite Users",href:"/admin/invite",target:"",visible:c},{name:"Analytics",href:"https://lookingglass.retool.com/apps/73183d26-8088-11ed-a9dc-db362e2dd911/Blocks/Blocks%20Analytics",target:"_blank",visible:c},{name:"Playlist Management",href:"https://lookingglass.retool.com/apps/5f10b97e-406a-11ed-a8db-633cddc2c387/Blocks/Blocks%20Playlists",target:"_blank",visible:c},{name:"Discover Curation",href:"https://lookingglass.retool.com/apps/8ebaab26-7cab-11ed-9974-8ff30d79dfae/Blocks/Blocks%20-%20Discover%20Curation",target:"_blank",visible:c},{name:"Feature Flagging",href:"https://lookingglass.retool.com/apps/bcd8e27a-817e-11ed-ab5d-5f0f0009a3b1/Blocks/Feature%20Flagging?_releaseVersion=latest",target:"_blank",visible:c},{name:"Job Queues",href:"".concat("https://lkg-blocks.herokuapp.com","/admin/queues"),target:"_blank",visible:c}],topLevel:!0,visible:c},{name:"Settings",href:"/settings",topLevel:!1,visible:u},{name:"Sign up",href:h,topLevel:!1,visible:!u},{name:"Log in",href:h,topLevel:!1,visible:!u},{name:"Log out",href:"/api/auth/logout",topLevel:!1,visible:d}],x=n?"bg-dark-purple-100 bg-opacity-40 dark":"bg-white bg-opacity-20 dark:bg-dark-purple-100 dark:bg-opacity-40",N=n?"text-white":"text-black dark:text-white",w=u?"/discover":"/",b=(0,_.Q)(),y="h-16";b.isOpen&&(y="h-52 md:h-36"),b.isOpen&&"connected"==b.state&&(y="h-28 md:h-24"),(0,o.useEffect)(()=>{},[b.isOpen,b.state,c]);let M=g.filter(e=>e.topLevel&&e.visible);return(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsx)(K.ZP,{open:f,onClose:function(){k(!1)},initialStep:"select_software"}),(0,a.jsx)("div",{className:(0,p.A)(y,"transition-all duration-700")}),(0,a.jsx)(S.p,{as:"nav",className:"fixed top-0 z-[100] w-full",children:e=>{let{open:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,p.A)("backdrop-blur-md",x),children:[(0,a.jsx)("div",{className:(0,p.A)("mx-auto max-w-7xl px-2 sm:px-6 lg:px-8"),children:(0,a.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,a.jsxs)(S.p.Button,{className:(0,p.A)(N,"inline-flex items-center justify-center rounded-md p-2 transition-all hover:bg-[#5901FB] hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"),children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),i?(0,a.jsx)(C.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,a.jsx)(D.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,a.jsxs)("div",{className:"flex flex-shrink-0 items-center space-x-2",children:[(0,a.jsx)(H.w,{href:w,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ec(),{className:"max-h-12 cursor-pointer",src:"/lkg-logo-".concat(v?"dark":"light",".svg"),alt:"Logo",width:60,height:44}),!I.Mw&&(0,a.jsx)(ef,{className:"absolute -bottom-1 -right-0 sm:hidden"})]})}),(0,a.jsx)(H.w,{href:w,className:"hidden md:block",children:(0,a.jsx)("div",{className:(0,p.A)(N,"mb-1 flex cursor-pointer flex-nowrap items-end pl-1 font-bold leading-6 transition-all duration-500 sm:inline"),children:(0,a.jsxs)("div",{className:"inline-flex flex-col",children:[(0,a.jsx)("div",{className:(0,p.A)("bg-text font-rubik text-sm font-normal",n?"holo5":"dark:holo5 text-black"),children:"Looking Glass"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:(0,p.A)("bg-text font-rubik text-2xl leading-3",n?"holo5":"dark:holo5 text-black"),children:"Blocks"}),!I.Mw&&(0,a.jsx)(ef,{})]})]})})})]}),(0,a.jsx)("div",{className:"hidden place-items-center items-center -space-x-3 sm:ml-6 sm:flex md:space-x-2 lg:space-x-4",children:M.map(e=>(0,a.jsxs)("div",{children:[!e.flyoutPanel&&!e.menu&&(0,a.jsx)(H.w,{href:e.href,onClick:e.onClick,target:e.target,className:(0,p.A)(N,"inline-flex cursor-pointer items-center rounded-md px-3 py-2 text-xs font-medium transition-colors  hover:text-violet-500 md:text-sm"),children:e.name}),e.flyoutPanel&&(0,a.jsx)(F.J,{className:"relative",children:n=>{let{open:i}=n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(F.J.Button,{className:(0,p.A)(N,"group inline-flex items-center px-3 py-2 text-xs font-medium focus:outline-none md:text-sm","transition-colors hover:text-violet-500"),children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("div",{className:"relative h-4 w-4",children:[(0,a.jsx)(el.Z,{className:(0,p.A)(i?"duration-[0.7s]":"-top-2 opacity-0 duration-[0.3s]","absolute top-0 ml-1 h-4 w-4 rotate-180 transition-all group-hover:text-violet-300"),"aria-hidden":"true"}),(0,a.jsx)(el.Z,{className:(0,p.A)(i?"top-2 opacity-0 duration-[0.3s]":"duration-[0.7s]","absolute top-0 ml-1 h-4 w-4 transition-all duration-300 group-hover:text-violet-300"),"aria-hidden":"true"})]})]}),e.flyoutPanel&&(0,a.jsx)(ea,{items:e.flyoutPanel})]})}}),e.menu&&(0,a.jsxs)(j.v,{as:"div",className:"relative",children:[(0,a.jsx)(j.v.Button,{className:(0,p.A)(N,"rounded-md px-3 py-2 text-xs font-medium transition-colors hover:text-violet-600 md:text-sm"),children:e.name}),(0,a.jsx)(em.n,{children:(0,a.jsx)(j.v.Items,{className:"absolute left-0 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-dark-purple-200",children:e.menu.map(e=>{let{href:n,name:i,target:t,onClick:l}=e;return(0,a.jsx)(H.w,{href:n,onClick:l,target:t,className:(0,p.A)("hover:bg-gray-100 dark:hover:bg-[#ffffff10]","block cursor-pointer px-4 py-2 text-sm text-gray-700 dark:text-white"),children:i},i+"-admin2")})})})]})]},"".concat(e.name,"-main")))})]}),(0,a.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-4 pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[!d&&!r&&(0,a.jsxs)("div",{className:(0,p.A)("hidden space-x-2 text-sm sm:inline",N),children:[(0,a.jsx)(H.w,{href:h,className:(0,p.A)("transition-colors hover:text-violet-600"),children:"Sign up"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"opacity-40",children:"or"}),(0,a.jsx)(H.w,{href:h,className:(0,p.A)("transition-colors hover:text-violet-600"),children:"Log in"})]})]}),(0,a.jsx)($,{forceDarkMode:n,hologram:t}),d&&m&&(0,a.jsx)("div",{className:"flex h-8 w-8 rounded-full bg-gray-800 text-sm",children:(0,a.jsx)(ev.s,{color:"#5C5CFF",size:"2rem"})}),d&&s&&(0,a.jsxs)(j.v,{as:"div",className:"relative ml-3 hidden sm:inline",children:[(0,a.jsx)("div",{id:"user-avatar-btn",children:(0,a.jsxs)(j.v.Button,{className:"flex h-8 w-8 rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,a.jsx)(en.n,{user:s,className:"w-8"})]})}),(0,a.jsx)(em.n,{children:(0,a.jsxs)(j.v.Items,{className:"z-[100]! absolute right-0 mt-2 w-48 origin-top-right overflow-clip rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-dark-purple-200",children:[u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.v.Item,{children:(0,a.jsx)("div",{children:(0,a.jsx)(H.w,{href:"/".concat(null==s?void 0:s.username),className:(0,p.A)("hover:bg-gray-100 dark:hover:bg-[#ffffff10]","block px-4 py-2 text-sm text-gray-700 dark:text-white"),children:"Profile"})})}),(0,a.jsx)(j.v.Item,{children:(0,a.jsx)("div",{children:(0,a.jsx)(H.w,{href:"/manage",className:(0,p.A)("hover:bg-gray-100 dark:hover:bg-[#ffffff10]","block px-4 py-2 text-sm text-gray-700 dark:text-white"),children:"My holograms"})})})]}),u&&(0,a.jsx)(j.v.Item,{children:(0,a.jsx)("div",{children:(0,a.jsx)(H.w,{href:"/settings",className:(0,p.A)("hover:bg-gray-100 dark:hover:bg-[#ffffff10]","block px-4 py-2 text-sm text-gray-700 dark:text-white"),children:"Settings"})})}),(0,a.jsx)(j.v.Item,{children:(0,a.jsx)("div",{children:(0,a.jsx)(H.w,{href:"/api/auth/logout",className:(0,p.A)("hover:bg-gray-100 dark:hover:bg-[#ffffff10]","block px-4 py-2 text-sm text-gray-700 dark:text-white"),children:"Log out"})})})]})})]}),(0,a.jsx)(ee,{})]})]})}),(0,a.jsx)(S.p.Panel,{className:"sm:hidden",children:(0,a.jsx)("div",{className:"space-y-1 px-2 pt-2 pb-3",children:(function(e){let n=[];for(var i of e)i.menu?n.push(...i.menu.map(e=>({...e,name:"".concat(i.name," - ").concat(e.name)}))):n.push(i);return n})(g).filter(e=>e.visible).map(e=>(0,a.jsx)(H.w,{href:e.href,target:e.target,onClick:e.onClick,className:(0,p.A)("bg-white bg-opacity-40 text-black transition-all hover:bg-opacity-75","block rounded-md px-3 py-2 text-base font-medium"),children:(0,a.jsx)(S.p.Button,{children:e.name})},e.name))})})]}),(0,a.jsx)(Z,{})]})}})]})}let ef=e=>{let{className:n=""}=e,i="",t="";return I.$?(i="PREVIEW",t="bg-rose-600"):I.mj?(i="DEV",t="bg-rose-500"):(i="alpha",t="bg-holo-light dark:bg-holo5"),(0,a.jsx)("span",{className:(0,p.A)("ml-1 -translate-y-1 text-[8px] leading-[8px] ".concat(t," text-md inline-block rounded-sm p-1 font-bold "),n),children:(0,a.jsx)("span",{className:"text-white drop-shadow-md dark:text-dark-purple-200",children:i})})};var ep=i(7280),ek=i(56336);function eg(e){var n;return(0,a.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-[100] mx-auto max-w-3xl pb-2 sm:pb-5",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"rounded-lg bg-indigo-600 p-2 shadow-lg sm:p-3",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex w-0 flex-1 items-center",children:[e.icon&&(0,a.jsx)("span",{className:"flex rounded-lg bg-indigo-800 p-2",children:(0,a.jsx)(e.icon,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),(0,a.jsx)("p",{className:"ml-3 truncate font-medium text-white",children:null==e?void 0:e.title})]}),(0,a.jsx)("div",{className:"order-3 mt-2 w-full flex-shrink-0 sm:order-2 sm:mt-0 sm:w-auto",children:(0,a.jsx)(H.w,{href:null==e?void 0:e.ctaLink,onClick:function(){var n;null===(n=e.onCtaClick)||void 0===n||n.call(e)},target:"_blank",className:"flex items-center justify-center rounded-md border border-transparent bg-white px-4 py-2 text-sm font-medium text-indigo-600 shadow-sm hover:bg-indigo-50",children:null!==(n=null==e?void 0:e.ctaText)&&void 0!==n?n:"Learn more"})}),(0,a.jsx)("div",{className:"order-2 flex-shrink-0 sm:order-3 sm:ml-2",children:(0,a.jsxs)("button",{type:"button",className:"-mr-1 flex rounded-md p-2 hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,a.jsx)(C.Z,{className:"h-6 w-6 text-white","aria-hidden":"true",onClick:function(){var n;null===(n=e.onClose)||void 0===n||n.call(e)}})]})})]})})})})}function ex(){let[e,n]=(0,o.useState)(!1),{isBetaUser:i,user:s,refetch:r}=(0,l.Z)(),{mutateAsync:d}=t.S.user.viewedTerms.useMutation();if((0,o.useEffect)(()=>{i&&(window.location.pathname.match(/\/settings/)||!s||(0,ek.lh)(s)||n(!0))},[i,null==s?void 0:s.lastViewedTermsAt]),!i)return(0,a.jsx)(a.Fragment,{});async function u(){n(!1),await d(),await (null==r?void 0:r())}return e?(0,a.jsx)(eg,{icon:ep.Z,title:"Heads up, we've updated our terms and conditions.",ctaLink:"/terms",ctaText:"View Terms",onClose:u,onCtaClick:u}):(0,a.jsx)(a.Fragment,{})}var eN=i(78957),ew=i(31796),eb=i(22536);function ey(e){let{file:n,className:i="",onLoad:t}=e,[l,s]=(0,o.useState)(""),r=e=>{let n=new FileReader;n.onload=e=>{s(e.target.result),n.onload=null},n.readAsDataURL(e)};return((0,o.useEffect)(()=>{r(n)},[]),l)?(0,a.jsx)("div",{className:(0,p.A)(i,"relative"),children:(0,a.jsx)(ec(),{src:l,className:"rounded-md",fill:!0,style:{objectFit:"cover"},alt:""})}):(0,a.jsx)(a.Fragment,{})}var eS=i(32282);function eF(){var e,n;let{status:i,uploads:t,uploadQueue:l,clearQueue:s,abortController:r}=(0,eS.Z)();(0,c.useRouter)(),(0,o.useEffect)(()=>{t.length>0&&"Uploading"!=i&&l(),f(!0)},[t.length]),(0,o.useEffect)(()=>{l()},[i]);let d=t.sort((i,a)=>(null!==(e=a.id)&&void 0!==e?e:0)-(null!==(n=i.id)&&void 0!==n?n:1)),u=d.length,m=d.filter(e=>"Complete"==e.status).length,v=u==m,[h,f]=(0,o.useState)(!0);return 0==d.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)("div",{id:"bulk-uploader",className:(0,p.A)("lkg-container-modal fixed bottom-5 right-5 left-5 z-[99] mx-2 space-y-0 p-0 sm:right-0 sm:w-[420px]"),children:[(0,a.jsxs)("div",{className:"flex flex-row place-items-center space-x-1 p-4",children:[(0,a.jsxs)("div",{className:"flex-1 text-sm font-medium",children:[v&&"Upload complete!",!v&&1!=d.length&&"Uploading hologram ".concat(m+1," of ").concat(d.length),!v&&1==d.length&&"Uploading hologram"]}),v&&(0,a.jsx)(eC,{tooltip:"Close",icon:U.Z,onClick:function(){s()}}),(0,a.jsx)(eC,{tooltip:"Collapse",icon:h?el.Z:eN.Z,onClick:function(){f(!h)}})]}),h&&(0,a.jsx)("div",{className:"scrollbox-light dark:scrollbox-dark max-h-72 overflow-y-auto overflow-x-clip pb-4",children:h&&d.map((e,n)=>(0,a.jsx)(ej,{upload:e},e.id))})]})}function ej(e){var n,i,t,l,s,r;let{upload:d}=e,u=(0,c.useRouter)(),{file:m}=d;return(0,a.jsxs)("div",{className:(0,p.A)("flex flex-row space-x-2 py-1 px-4 text-xs text-black transition-all hover:bg-black hover:bg-opacity-10 dark:text-white dark:hover:bg-white dark:hover:bg-opacity-10","Complete"==d.status?"cursor-pointer":""),onClick:e=>{!function(e){if("Complete"==e.status){var n;u.push("/".concat(e.username,"/").concat(null===(n=e.hologram)||void 0===n?void 0:n.id,"/edit"))}}(d)},children:[(0,a.jsxs)("div",{className:"relative h-12 w-12 rounded-lg bg-black bg-opacity-40",children:["Uploading"!==d.status&&(null===(n=d.hologram)||void 0===n?void 0:null===(i=n.thumbnail)||void 0===i?void 0:i.url)&&(0,a.jsx)(ec(),{src:d.hologram.thumbnail.url,fill:!0,style:{objectFit:"cover"},alt:null!==(l=d.hologram.title)&&void 0!==l?l:"",className:"h-12 w-12 rounded-lg"}),"Uploading"===d.status&&(0,a.jsx)(ey,{file:d.file,className:"h-12 w-12 rounded-lg"})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col place-content-center",children:[(0,a.jsx)("div",{className:"font-medium",children:null!==(s=null===(t=d.hologram)||void 0===t?void 0:t.title)&&void 0!==s?s:d.file.name}),(0,a.jsxs)("div",{className:"text-gray-400",children:["Uploading"==d.status&&(0,a.jsxs)(a.Fragment,{children:[Math.round((null!==(r=d.bytesUploaded)&&void 0!==r?r:0)/1024/1024*100)/100,"MB of"," ",Math.round(d.file.size/1024/1024*100)/100,"MB"]}),("Queued"==d.status||"Ready"==d.status)&&(0,a.jsx)(a.Fragment,{children:"Waiting..."}),"Complete"==d.status&&(0,a.jsx)(a.Fragment,{children:"Complete"})]})]}),(0,a.jsxs)("div",{className:"scale flex place-content-center",children:["Uploading"==d.status&&(0,a.jsx)(ew.Z,{className:"w-6 fill-light-purple stroke-light-purple"}),(0,a.jsx)(M.u,{show:"Complete"==d.status,as:o.Fragment,enter:"transition-all ease-out-back duration-500 delay-100",enterFrom:"opacity-50 scale-[0.6]",enterTo:"opacity-100 scale-100",children:(0,a.jsx)(eb.Z,{className:"w-5 fill-green-500 stroke-green-500"})})]})]})}function eC(e){return(0,a.jsx)(Q.u,{content:e.tooltip,children:(0,a.jsx)("div",{onClick:e.onClick,className:"flex h-6 w-6 cursor-pointer place-content-center place-items-center rounded-sm hover:bg-white hover:bg-opacity-20",children:(0,a.jsx)(e.icon,{className:(0,p.A)("h-4 w-4",void 0===e.stroke||e.stroke?"stroke-white":"")})})})}var eD=i(73606);function e_(e){let{hologram:n,backgroundImage:i=null,backgroundColor:s,darkMode:u,loginReturnTo:m,children:v}=e,{isLoading:k,isLoggedIn:x,isBetaUser:w,user:b,isFetchingDBUser:S}=(0,l.Z)(),{checkSession:F}=(0,eD.aF)();return(0,o.useEffect)(()=>{b||F()},[]),!function(){let{user:e,isBetaUser:n}=(0,l.Z)(),{mutate:i}=t.S.user.sync.useMutation(),{trigger:a}=function(e,n){let{trigger:i,setTrigger:a}=r(e=>e);return{trigger:function(){i[e]||(a(e,!0),n())}}}("hubspot",()=>{i({id:null==e?void 0:e.id,context:"useHubspotSync hook"})});(0,o.useEffect)(()=>{n&&"1"!=(0,d.ej)("hubspot-sync")&&((0,d.d8)("hubspot-sync","1",{expires:3600}),a())},[n])}(),!function(){let{user:e,isLoading:n,isLoggedIn:i,hasUsername:a}=(0,l.Z)(),t=(0,c.useRouter)();(0,o.useEffect)(()=>{!n&&i&&!a&&e&&"/settings"!==window.location.pathname&&t.push("/settings?returnTo="+encodeURIComponent(window.location.pathname+window.location.search))},[e,n,i,a])}(),(0,a.jsxs)("div",{className:"lkg-layout",children:[(0,a.jsx)(g,{}),(0,a.jsx)(h(),{color:"#8E3FFB",height:2,options:{easing:"ease-out",speed:400,showSpinner:!1}}),(0,a.jsxs)(eA,{image:i,backgroundColor:s,children:[(0,a.jsx)(f.x7,{position:"bottom-right"}),(0,a.jsx)(eh,{forceDarkMode:void 0===u?null!=i:u,loginReturnTo:m,hologram:n}),(0,a.jsx)("div",{className:(0,p.A)(i?"z-1 relative":""),children:v})]}),(0,a.jsx)(N,{}),(0,a.jsx)(ex,{}),(0,a.jsx)(y,{}),(0,a.jsx)(eF,{})]})}function eA(e){let{image:n,backgroundColor:i,children:t}=e,l=(0,m.o)(e=>e.curHologramAngle),{imagesPreloaded:s}=(0,u.Z)([n]),[r,d]=(0,o.useState)(!1),c=(0,o.useRef)(null);return((0,o.useEffect)(()=>{d(!0)},[]),(0,o.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.setAttribute("style","background-image: url('".concat(n,"');")+"background-size: 100% 100%;"+"transform: translate(calc(-25% + ".concat(-Math.round(40*l),"px));"))},[c,l,n]),n)?(0,a.jsxs)("div",{className:"relative overflow-hidden",children:[(0,a.jsx)("div",{className:(0,p.A)(r?"opacity-100":"opacity-0","absolute h-full w-full bg-gray-900 transition-all duration-500")}),(0,a.jsx)("div",{className:(0,p.A)(s?"opacity-100":"opacity-0","absolute h-full w-[150%] transition-opacity duration-1000"),ref:c}),(0,a.jsx)("div",{className:"top-0 z-0 h-full min-h-[100vh] w-full pb-24",children:t})]}):(0,a.jsx)("div",{className:"min-h-[100vh] pb-16 ".concat(i?"bg-"+i:""),children:t})}},37415:function(e,n,i){"use strict";i.d(n,{w:function(){return d}});var a=i(85893),t=i(41664),l=i.n(t),o=i(67294),s=i(54364);let r={href:"",children:(0,a.jsx)(a.Fragment,{}),wrap:!0,link:!0},d=(0,o.forwardRef)((e,n)=>{let i={...r,...e},{href:t,children:o,wrap:s,link:d,...c}=i,m=t&&(t.startsWith("/")||t.startsWith("#")),v=t&&t.startsWith("/api");return d?v||!m||"_blank"==i.target?(0,a.jsx)("a",{ref:n,href:t,...c,children:(0,a.jsx)(u,{content:i.tooltip,children:i.children})}):s?(0,a.jsx)(l(),{legacyBehavior:!0,href:t,passHref:!0,children:(0,a.jsx)("a",{ref:n,...c,children:(0,a.jsx)(u,{content:i.tooltip,children:i.children})})}):(0,a.jsx)(l(),{ref:n,legacyBehavior:!0,href:t,passHref:!0,onClick:i.onClick,children:(0,a.jsx)(u,{content:i.tooltip,children:i.children})}):i.children});function u(e){let{content:n,children:i}=e;return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(s.u,{content:n,children:i}):i})}d.displayName="Linky"},18226:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var a=i(85893),t=i(11355),l=i(98831),o=i(96445),s=i(31574),r=i(67294);function d(e){function n(){var n;null===(n=e.onClose)||void 0===n||n.call(e)}let i=!0===e.open;return(0,a.jsx)(t.u.Root,{show:i,as:r.Fragment,children:(0,a.jsxs)(l.V,{as:"div",className:"relative z-[100]",initialFocus:e.initialFocus,onClose:n,children:[(0,a.jsx)(t.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm transition-all"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-1 text-center sm:items-center sm:p-0",children:(0,a.jsx)(t.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsx)(l.V.Panel,{className:"relative w-full transform overflow-hidden text-left transition-all sm:my-8",children:(0,a.jsxs)("div",{className:(0,s.A)("lkg-container-modal relative mx-auto",e.className),children:[(0,a.jsx)("div",{id:"popup-close-btn",className:"group absolute right-0 top-0 cursor-pointer p-6",onClick:n,children:(0,a.jsx)(o.Z,{className:"w-5 group-hover:text-[#5901FB] dark:text-gray-300"})}),e.title&&(0,a.jsx)("div",{className:"mb-6 text-sm font-bold text-black dark:text-gray-300",children:e.title}),e.children]})})})})})]})})}},80205:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var a=i(85893),t=i(98597);function l(e){let{className:n=""}=e;return(0,a.jsx)(t.s,{thickness:200,color:"#a5f",secondaryColor:"rgba(0, 0, 0, .1)",className:n})}},54364:function(e,n,i){"use strict";i.d(n,{u:function(){return r}});var a=i(85893);i(67294);var t=i(88974),l=i(52058),o=i.n(l),s=i(31574);function r(e){let{children:n,content:i,open:l,defaultOpen:r,onOpenChange:d,delayDuration:u,disableHoverableContent:c,...m}=e;return(0,a.jsxs)(t.fC,{open:l,defaultOpen:r,onOpenChange:d,delayDuration:u||700,disableHoverableContent:void 0==c||c,children:[(0,a.jsx)(t.xz,{asChild:!0,children:n}),(0,a.jsx)(t.h_,{children:(0,a.jsxs)(t.VY,{side:m.side||"top",align:"center",...m,className:(0,s.A)(o().TooltipContent,m.className),style:{zIndex:"1000"},children:[(0,a.jsx)("div",{tabIndex:-1,className:"rounded-lg border border-[#ffffff10] bg-white p-2 text-xs dark:bg-dark-purple-100 dark:text-white",children:i}),(0,a.jsx)("div",{className:"h-2"})]})})]})}},54763:function(e,n,i){"use strict";i.d(n,{n:function(){return d}});var a=i(85893),t=i(31574),l=i(25675),o=i.n(l),s=i(37415),r=i(56336);function d(e){var n,i;let{user:l,className:d,link:u}=e,c=l?"/".concat((0,r.Ms)(l)):void 0;return(0,a.jsx)("div",{className:(0,t.A)(d||"w-10"),children:(0,a.jsx)("div",{className:"aspect-w-1 aspect-h-1",children:(0,a.jsx)(s.w,{href:c,link:u&&null!=l,children:(0,a.jsx)(o(),{src:null!==(n=null==l?void 0:l.picture)&&void 0!==n?n:"https://blocks.glass/foil-avatar.jpg",alt:null!==(i=null==l?void 0:l.displayName)&&void 0!==i?i:"",fill:!0,style:{objectFit:"cover"},className:(0,t.A)("profile-picture rounded-full bg-black")})})})})}},82472:function(e,n,i){"use strict";i.d(n,{Z:function(){return ed}});var a=i(85893),t=i(34202),l=i(67294),o=i(53018),s=i(31574),r=i(78789),d=i(97650),u=i(99612),c=i(13061),m=i(81472),v=i(97998),h=i(18271),f=i(85518);function p(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[e,...n];(0,l.useEffect)(()=>{let n=new g(e);return()=>{n.shutdown()}},i)}function k(e,n,i){return Math.min(i,Math.max(n,e))}class g{shutdown(){window.removeEventListener("devicemotion",this.onMotion),window.removeEventListener("deviceorientation",this.onOrientation)}constructor(e){this.hasChange=!1,this.orientationAngle=0,this.onOrientation=e=>{e.alpha&&(this.orientationAngle=e.alpha)},this.onAnimationFrame=()=>{if(this.hasChange){let{isLandscape:e,isUpsideDown:n}=function(){let e=window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.type&&void 0!==window.screen.orientation.angle?"screenOrientation":void 0!==window.orientation?"windowOrientation":"none";if("screenOrientation"===e){let e=window.screen.orientation.type,n=window.screen.orientation.angle,i=e.startsWith("landscape");return{isLandscape:i,isUpsideDown:i?270===n:180===n}}if("windowOrientation"!==e)return{isLandscape:!1,isUpsideDown:!1};{let e=window.orientation,n=90===Math.abs(e);return{isLandscape:n,isUpsideDown:180===e||-90===e||n&&-180===e}}}(),i=e?-this.rot.alpha:this.rot.beta,a=e?this.rot.gamma:this.rot.alpha;n&&(i=-i,a=-a),this.onViewDelta({x:i,y:a}),this.hasChange=!1}requestAnimationFrame(this.onAnimationFrame)},this.onMotion=e=>{let n=e.rotationRate;if(null!==n&&!n.alpha&&!n.beta&&!n.gamma||null===n)return;let{alpha:i,beta:a,gamma:t}=n;if(null===i||null===a||null===t)return;let l=this.rot;l.alpha=k(l.alpha+-(49e-5*i),-1,1),l.beta=k(l.beta+49e-5*a,-1,1),l.gamma=k(l.gamma+49e-5*t,-1,1),this.hasChange=!0},this.onViewDelta=e,this.rot={alpha:0,beta:0,gamma:0},this.viewDelta=0,this.orientationAngle=0,window.addEventListener("devicemotion",this.onMotion),window.addEventListener("deviceorientation",this.onOrientation),requestAnimationFrame(this.onAnimationFrame)}}var x=i(9930);function N(e){var n,i;let{onViewAngleChange:a,isQuiltLoaded:t,rendererProps:o,refresh:s,circularRotation:r}=e,{viewcone:d,wiggle:u,hologram:k,containerRef:g,wiggleContainerRef:N}=o,w=null!==(n=null==k?void 0:k.quiltTileCount)&&void 0!==n?n:x.ux,{speed:b,config:y}=(0,h.M4)({speed:f.tq?1.7:.6,config:(0,c.S)(f.tq?{mass:.2,tension:130,friction:10}:{mass:1,tension:170,friction:30})}),S=[-(.008725*d),.008725*d],F=[-Math.PI/4,Math.PI/4],[j,C]=(0,l.useState)(u?(.2*Math.random()+.3)*(.5>Math.random()?-1:1):U(0)),[D,_]=(0,l.useState)(0),[A,I]=(0,l.useState)(o.animate),M=(0,l.useRef)({x:0,y:0,z:0}),R=(0,l.useRef)({x:0,y:0,z:0}),T=(0,l.useRef)(null);function V(){a(Math.max(-1,Math.min(1,R.current.x+M.current.x)),Math.max(-1,Math.min(1,M.current.x)),Math.max(-1,Math.min(1,R.current.y+M.current.y)),Math.max(-1,Math.min(1,M.current.y)))}s&&V(),p(e=>{R.current.x=e.x,R.current.y=e.y,V()},[]),(0,l.useEffect)(()=>{let e=j/(2*S[1])*2;M.current.x=e,V()},[j]);let[E,L]=(0,m.useSpring)(()=>({scale:1,rotation:[D,j,0],config:y,onChange:e=>{let n=e.value.rotation[1]/(2*S[1])*2,i=e.value.rotation[0]/(2*F[1])*2;M.current.x=n,M.current.y=i,V()},onRest:e=>{(null==k?void 0:k.type)==="QUILT"&&function(e){if(!L)return;let n=U(e);L.start({rotation:[0,n,0],config:{mass:3,tension:200,friction:100}})}(e.value.rotation[1])}}),[y,u,j,w]);function U(e){let n=e/(2*S[1])+.5;return n*=w-1,n=((n=Math.round(n)/(w-1))-.5)*S[1]*2}let P=(0,l.useCallback)(e=>{let{delta:[n,i],memo:[a,t]=E.rotation.animation.to}=e;if(o.animate&&(clearTimeout(T.current),I(!1),T.current=setTimeout(()=>{I(!0)},3e3)),void 0!==g&&null!==g.current){var l,s;n=Math.min(Math.max(n=t+n/(null===(l=g.current)||void 0===l?void 0:l.getBoundingClientRect().width)*Math.PI*b,S[0]),S[1]),i=Math.min(Math.max(i=a+i/(null===(s=g.current)||void 0===s?void 0:s.getBoundingClientRect().height)*Math.PI*b,F[0]),F[1])}return L.start({rotation:[i,n,0],config:y}),[i,n]},[b,y,g,A]);(0,v.useGesture)({onDrag:f.tq?P:()=>{},onMove:f.tq?()=>{}:P},{target:(null==N?void 0:N.current)||(null==g?void 0:g.current),move:{mouseOnly:!1},drag:{pointer:{touch:!0},preventScroll:!0}}),(0,l.useEffect)(()=>{u&&t&&q()},[t,u]),function(e){var n;let i=(0,m.useSpringRef)(),a=null!==(n=e.startAngle)&&void 0!==n?n:0,t=e.circular,o=n=>{e.onChange(n.value.angle)};(0,m.useSpring)({ref:i,from:{angle:a}}),(0,l.useEffect)(()=>{e.animate?t?i.start({from:{angle:a},to:{angle:a+2},loop:!0,config:{duration:8e3,easing:m.easings.linear},onChange:o}):i.start({from:{angle:-1},to:[{angle:1},{angle:-1}],loop:!0,config:{duration:5e3,easing:m.easings.linear},onChange:o}):i.stop()},[e.animate])}({animate:A,startAngle:null!==(i=M.current.x)&&void 0!==i?i:0,onChange:e=>{let n=e*Math.PI;M.current.x=Math.cos(n),M.current.y=Math.sin(n),V()},circular:r});let q=(0,l.useCallback)(async()=>{L&&L.start({delay:150*Math.random()+50,rotation:[0,U(0),0],config:{mass:5*Math.random()+5,tension:200*Math.random()+400,friction:30}})},[L])}var w=i(85358);i(86520);var b=i(73047),y=i(25675),S=i.n(y);function F(e){let{rendererProps:n,quiltImageUrl:i,setView:t}=e,o=(0,l.useRef)(null),s=(0,l.useRef)(null);if(!n.hologram)return(0,a.jsx)(a.Fragment,{});let{quiltTileCount:r,quiltRows:d,quiltCols:u}=n.hologram;if(!r||!d||!u)throw Error("Hologram must have quiltTileCount, quiltRows, and quiltCols");return t.current=e=>{var n,a;let t=Math.min(Math.max(1-e,0),1),l=Math.floor(t*(r-1)),c=Math.min(l+1,r-1);function m(e,n){return"width: calc(100% * ".concat(u,");")+"height: calc(100% * ".concat(d,");")+'background-image: url("'.concat(i,'");')+"background-size: 100% 100%;transform: translate("+"calc(-100% / ".concat(u," * ").concat(e[0],"),")+"calc(-100% / ".concat(d," * ").concat(e[1],")")+");"+"opacity: ".concat(n,";")}null===(n=o.current)||void 0===n||n.setAttribute("style",m([l%u,d-1-Math.floor(l/u)],1)),null===(a=s.current)||void 0===a||a.setAttribute("style",m([c%u,d-1-Math.floor(c/u)],t*(r-1)-l))},(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:o,className:"absolute top-0 left-0"}),n.viewBlending&&(0,a.jsx)("div",{ref:s,className:"absolute top-0 left-0"})]})}var j=i(83866),C=i.n(j),D=i(80008),_=i.n(D);function A(e){var n,i,o,d,u,c,m,v,h,f,p,k;let[g,x]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[S,j]=(0,l.useState)(!1),C=(0,l.useMemo)(()=>e.height?(2*e.height).toFixed(0):"2400",[e.height]),D=(0,l.useRef)(null),A=(0,l.useRef)(null),T=(0,l.useRef)(e=>{}),V=function(e){var n,i;let a=e.width/e.height,{width:t,height:l}=e,o=null!==(i=null===(n=e.hologram)||void 0===n?void 0:n.aspectRatio)&&void 0!==i?i:.75,s=0,r=0;a<o?(t=e.width,l=e.width/o,s=e.height/2-l/2):(t=e.height*o,l=e.height,r=e.width/2-t/2);let d=e.fullscreen?"scale(0.90)":"scale(".concat(.825,")");return e.frameTilt||(d=void 0),{width:t,height:l,marginTop:s,marginLeft:r,transform:d}}(e),E=(0,l.useMemo)(()=>{if(e.width>0&&e.hologram)return(0,r.Dd)(e.hologram,V.width*e.dpr)},[null===(n=e.hologram)||void 0===n?void 0:n.id,V.width,e.dpr,null===(i=e.hologram)||void 0===i?void 0:null===(o=i.sourceImages)||void 0===o?void 0:o[0]]),L=parseInt(null!==(k=null===(d=null==E?void 0:E.match(/w=(\d+)/))||void 0===d?void 0:d[1])&&void 0!==k?k:"0"),U=(0,l.useMemo)(()=>{var n;return(0,r.bp)(null===(n=e.hologram)||void 0===n?void 0:n.thumbnail)},[null===(u=e.hologram)||void 0===u?void 0:null===(c=u.sourceImages)||void 0===c?void 0:c[0]]);(0,l.useEffect)(()=>{x(!1),j(!0)},[null===(m=e.hologram)||void 0===m?void 0:null===(v=m.sourceImages)||void 0===v?void 0:v[0]]);let{imagesPreloaded:P}=(0,w.Z)([null==U?void 0:U.url]),{imagesPreloaded:q,totalCachedImages:B}=(0,w.Z)([E]);!function(e,n){let[i,a]=(0,l.useState)(new Date().getTime()),[o,s]=(0,l.useState)(0),[r,d]=(0,l.useState)(!1),{mutate:u}=t.S.stats.hologramLoad.useMutation();(0,l.useEffect)(()=>{if(e&&!r){let e=new Date().getTime()-i;s(e);let a=_().tz.guess();u({duration:e,timezone:a,quiltSize:n}),d(!0)}},[e])}(q&&0==B,L),(0,l.useEffect)(()=>{if(q&&e.width>0){var n;null===(n=e.onLoad)||void 0===n||n.call(e),x(!0),y(!0)}P&&x(!0),P||x(!1)},[P,q,e.width]);let O=(0,l.useCallback)((n,i)=>{var a,t;!function(n){var i;if(!e.frameTilt)return;let a=((n-.5)*e.viewcone).toFixed(2);null===(i=A.current)||void 0===i||i.setAttribute("style","transform: perspective(".concat(C,"px) rotateY(").concat(a,"deg);")+"transform-style: preserve-3d;")}(.5*i+.5),a=.5*n+.5,null==e||null===(t=e.onViewAngleChange)||void 0===t||t.call(e,(a-.5)*2),T.current(a)},[e.onViewAngleChange,C,e.animate,null===(h=e.hologram)||void 0===h?void 0:null===(f=h.sourceImages)||void 0===f?void 0:null===(p=f[0])||void 0===p?void 0:p.url]);(0,l.useEffect)(()=>{S&&j(!1)},[S]),N({onViewAngleChange:O,isQuiltLoaded:q,rendererProps:e,refresh:S,circularRotation:!1});let H=V.width>0;return H&&E?(0,a.jsx)("div",{id:"hologram-element",className:(0,s.A)("h-full w-full"),children:(0,a.jsx)("div",{ref:D,style:V,children:(0,a.jsxs)("div",{ref:A,className:(0,s.A)(e.dropshadow?"shadow-xl":"","pointer-events-none relative h-full w-full overflow-hidden rounded-xl"),children:[(0,a.jsx)(I,{...e,visible:b,quiltLoaded:b}),(0,a.jsx)("div",{className:(0,s.A)("absolute z-20 h-full w-full scale-[1.015] transition-opacity duration-[700ms] ease-in-out",b?"opacity-100":"opacity-0"),children:(0,a.jsx)(F,{rendererProps:e,quiltImageUrl:E,setView:T})}),(0,a.jsx)(M,{visible:g,quiltLoaded:b,className:"z-[5] duration-500",src:null==U?void 0:U.url}),(0,a.jsx)(R,{visible:H,quiltLoaded:b,className:"z-[2] duration-500"})]})})}):(0,a.jsx)(a.Fragment,{})}function I(e){var n,i;let t=T(e,!1);if(!e.showCreator&&e.showTitle)return(0,a.jsx)(a.Fragment,{});if(!(null===(n=e.hologram)||void 0===n?void 0:n.user))throw Error("Hologram must have a user");return(0,a.jsxs)("div",{className:(0,s.A)("absolute z-30 flex h-full w-full place-items-end transition-opacity ease-in-out",e.className,t),children:[(0,a.jsx)("div",{className:"p-4 text-xs font-bold text-white md:p-6 md:text-base",children:e.showTitle&&(null===(i=e.hologram)||void 0===i?void 0:i.title)}),(0,a.jsx)("div",{className:"p-4 text-xs font-bold text-white md:p-6 md:text-base",children:e.showCreator&&"by ".concat(e.hologram.user.displayName)})]})}function M(e){let n=T(e);return e.src?(0,a.jsx)("div",{className:(0,s.A)("absolute top-0 left-0 h-full w-full scale-[0.999] p-1  transition-opacity",e.className,n),children:(0,a.jsx)("div",{className:"relative w-full h-full p-2",children:(0,a.jsx)(S(),{src:e.src,fill:!0,style:{objectFit:"cover"},className:"rounded-xl",quality:100,alt:"",sizes:"{max-width: 1200px} 100vw",priority:!0})})}):(0,a.jsx)(a.Fragment,{})}let R=e=>{let n=T(e);return(0,a.jsx)("div",{ref:e.ref,className:(0,s.A)(e.className,n,"absolute top-0 left-0 h-full w-full scale-[0.999] rounded-xl transition-opacity"),children:(0,a.jsxs)("div",{className:(0,s.A)(C().button,C().isBusy,"h-full w-full"),style:e.style,children:[(0,a.jsx)("div",{className:(0,s.A)(C().content,"h-full w-full rounded-xl"),children:"\xa0"}),(0,a.jsx)("div",{className:(0,s.A)(C().disco,"rounded-xl")})]})})};function T(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[i,a]=(0,l.useState)("opacity-0");async function t(e,n){await (0,b.Vs)(n),a(e)}return(0,l.useEffect)(()=>{e.visible&&a("opacity-100"),e.quiltLoaded&&(a("opacity-100"),n&&(t("opacity-0",1e3),t("hidden",2e3)))},[e.quiltLoaded,e.visible]),i}var V=i(37714),E=i(95900),L=i(26135),U=i(99477),P=i(73294),q=i(90319),B=i(99137);let O=(0,B.g)({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class H extends U.MeshPhysicalMaterial{constructor(e=6,n=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new U.Color("white")},anisotropy:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=i=>{i.uniforms={...i.uniforms,...this.uniforms},n?i.defines.USE_SAMPLER="":i.defines.USE_TRANSMISSION="",i.fragmentShader="\n      uniform float chromaticAberration;         \n      uniform float anisotropy;      \n      uniform float time;\n      uniform float distortion;\n      uniform float distortionScale;\n      uniform float temporalDistortion;\n      uniform sampler2D buffer;\n      vec3 random3(vec3 c) {\n        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n        vec3 r;\n        r.z = fract(512.0*j);\n        j *= .125;\n        r.x = fract(512.0*j);\n        j *= .125;\n        r.y = fract(512.0*j);\n        return r-0.5;\n      }\n      float seed = 0.0;\n      uint hash( uint x ) {\n        x += ( x << 10u );\n        x ^= ( x >>  6u );\n        x += ( x <<  3u );\n        x ^= ( x >> 11u );\n        x += ( x << 15u );\n        return x;\n      }\n      // Compound versions of the hashing algorithm I whipped together.\n      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }\n      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }\n      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }\n      // Construct a float with half-open range [0:1] using low 23 bits.\n      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.\n      float floatConstruct( uint m ) {\n        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask\n        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32\n        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)\n        m |= ieeeOne;                          // Add fractional part to 1.0\n        float  f = uintBitsToFloat( m );       // Range [1:2]\n        return f - 1.0;                        // Range [0:1]\n      }\n      // Pseudo-random value in half-open range [0:1].\n      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }\n      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float rand() {\n        float result = random(vec3(gl_FragCoord.xy, seed));\n        seed += 1.0;\n        return result;\n      }\n      const float F3 =  0.3333333;\n      const float G3 =  0.1666667;\n      float snoise(vec3 p) {\n        vec3 s = floor(p + dot(p, vec3(F3)));\n        vec3 x = p - s + dot(s, vec3(G3));\n        vec3 e = step(vec3(0.0), x - x.yzx);\n        vec3 i1 = e*(1.0 - e.zxy);\n        vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n        vec3 x1 = x - i1 + G3;\n        vec3 x2 = x - i2 + 2.0*G3;\n        vec3 x3 = x - 1.0 + 3.0*G3;\n        vec4 w, d;\n        w.x = dot(x, x);\n        w.y = dot(x1, x1);\n        w.z = dot(x2, x2);\n        w.w = dot(x3, x3);\n        w = max(0.6 - w, 0.0);\n        d.x = dot(random3(s), x);\n        d.y = dot(random3(s + i1), x1);\n        d.z = dot(random3(s + i2), x2);\n        d.w = dot(random3(s + 1.0), x3);\n        w *= w;\n        w *= w;\n        d *= w;\n        return dot(d, vec4(52.0));\n      }\n      float snoiseFractal(vec3 m) {\n        return 0.5333333* snoise(m)\n              +0.2666667* snoise(2.0*m)\n              +0.1333333* snoise(4.0*m)\n              +0.0666667* snoise(8.0*m);\n      }\n"+i.fragmentShader,i.fragmentShader=i.fragmentShader.replace("#include <transmission_pars_fragment>","\n        #ifdef USE_TRANSMISSION\n          // Transmission code is based on glTF-Sampler-Viewer\n          // https://github.com/KhronosGroup/glTF-Sample-Viewer\n          uniform float _transmission;\n          uniform float thickness;\n          uniform float attenuationDistance;\n          uniform vec3 attenuationColor;\n          #ifdef USE_TRANSMISSIONMAP\n            uniform sampler2D transmissionMap;\n          #endif\n          #ifdef USE_THICKNESSMAP\n            uniform sampler2D thicknessMap;\n          #endif\n          uniform vec2 transmissionSamplerSize;\n          uniform sampler2D transmissionSamplerMap;\n          uniform mat4 modelMatrix;\n          uniform mat4 projectionMatrix;\n          varying vec3 vWorldPosition;\n          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n            // Direction of refracted light.\n            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n            // Compute rotation-independant scaling of the model matrix.\n            vec3 modelScale;\n            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n            // The thickness is specified in local space.\n            return normalize( refractionVector ) * thickness * modelScale;\n          }\n          float applyIorToRoughness( const in float roughness, const in float ior ) {\n            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n            // an IOR of 1.5 results in the default amount of microfacet refraction.\n            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n          }\n          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            \n            #ifdef USE_SAMPLER\n              #ifdef texture2DLodEXT\n                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #else\n                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #endif\n            #else\n              return texture2D(buffer, fragCoord.xy);\n            #endif\n          }\n          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n            if ( isinf( attenuationDistance ) ) {\n              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.\n              return radiance;\n            } else {\n              // Compute light attenuation using Beer's law.\n              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n              return transmittance * radiance;\n            }\n          }\n          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n            const in vec3 attenuationColor, const in float attenuationDistance ) {\n            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n            vec3 refractedRayExit = position + transmissionRay;\n            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n            vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n            refractionCoords += 1.0;\n            refractionCoords /= 2.0;\n            // Sample framebuffer to get pixel the refracted ray hits.\n            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n            // Get the specular component.\n            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n          }\n        #endif\n"),i.fragmentShader=i.fragmentShader.replace("#include <transmission_fragment>","  \n        // Improve the refraction to use the world pos\n        material.transmission = _transmission;\n        material.transmissionAlpha = 1.0;\n        material.thickness = thickness;\n        material.attenuationDistance = attenuationDistance;\n        material.attenuationColor = attenuationColor;\n        #ifdef USE_TRANSMISSIONMAP\n          material.transmission *= texture2D( transmissionMap, vUv ).r;\n        #endif\n        #ifdef USE_THICKNESSMAP\n          material.thickness *= texture2D( thicknessMap, vUv ).g;\n        #endif\n        \n        vec3 pos = vWorldPosition;\n        vec3 v = normalize( cameraPosition - pos );\n        vec3 n = inverseTransformDirection( normal, viewMatrix );\n        vec3 transmission = vec3(0.0);\n        float transmissionR, transmissionB, transmissionG;\n        float randomCoords = rand();\n        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropy);\n        vec3 distortionNormal = vec3(0.0);\n        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;\n        if (distortion > 0.0) {\n          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));\n        }\n        for (float i = 0.0; i < ".concat(e,".0; i ++) {\n          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);\n          transmissionR = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(").concat(e,"),\n            material.attenuationColor, material.attenuationDistance\n          ).r;\n          transmissionG = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(").concat(e,")) , material.thickness + thickness_smear * (i + randomCoords) / float(").concat(e,"),\n            material.attenuationColor, material.attenuationDistance\n          ).g;\n          transmissionB = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(").concat(e,")), material.thickness + thickness_smear * (i + randomCoords) / float(").concat(e,"),\n            material.attenuationColor, material.attenuationDistance\n          ).b;\n          transmission.r += transmissionR;\n          transmission.g += transmissionG;\n          transmission.b += transmissionB;\n        }\n        transmission /= ").concat(e,".0;\n        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n"))},Object.keys(this.uniforms).forEach(e=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:n=>this.uniforms[e].value=n}))}}let Z=l.forwardRef((e,n)=>{let i,t,o,{buffer:s,transmissionSampler:r=!1,backside:d=!1,side:u=U.FrontSide,transmission:c=1,thickness:m=0,backsideThickness:v=0,samples:h=10,resolution:f,backsideResolution:p,background:k,...g}=e;(0,E.e)({MeshTransmissionMaterial:H});let x=l.useRef(null),[N]=l.useState(()=>new O),w=(0,q.R)(p||f),b=(0,q.R)(f);return(0,E.x)(e=>{x.current&&(x.current.time=e.clock.getElapsedTime(),x.current.buffer===b.texture&&!r&&(o=x.current.__r3f.parent)&&(t=e.gl.toneMapping,i=e.scene.background,e.gl.toneMapping=U.NoToneMapping,k&&(e.scene.background=k),o.material=N,d&&(e.gl.setRenderTarget(w),e.gl.render(e.scene,e.camera),o.material=x.current,o.material.buffer=w.texture,o.material.thickness=v,o.material.side=U.BackSide),e.gl.setRenderTarget(b),e.gl.render(e.scene,e.camera),o.material.thickness=m,o.material.side=u,o.material.buffer=b.texture,e.scene.background=i,e.gl.setRenderTarget(null),o.material=x.current,e.gl.toneMapping=t))}),l.useImperativeHandle(n,()=>x.current,[]),(0,a.jsx)("meshTransmissionMaterial",{args:[h,r],ref:x,...g,buffer:s||b.texture,_transmission:c,transmission:r?c:0,thickness:m,side:u})});Z.displayName="MeshTransmissionMaterial";let z=l.forwardRef((e,n)=>{var i;let{outerContainerRef:t,assetsLoaded:o,blurredThumbnail:s,props:r,circularRotation:d}=e,u=(null===(i=r.hologram)||void 0===i?void 0:i.aspectRatio)||1;N({onViewAngleChange:(e,n,i,a)=>c(e,n,i,a),isQuiltLoaded:!0,rendererProps:r,circularRotation:d});let c=(0,l.useCallback)((e,i,a,l)=>{!o&&r.frameTilt&&function(e,n,i,a,t){var l,o,s;let r="2400";a.current.clientHeight&&(r=(2*a.current.clientHeight).toFixed(0));let d=((e-.5)*22).toFixed(2),u=((n-.5)*22).toFixed(2),c=null==a?void 0:null===(l=a.current)||void 0===l?void 0:l.clientWidth,m=null==a?void 0:null===(o=a.current)||void 0===o?void 0:o.clientHeight,v=1,h=88;m&&void 0!==c&&(v=c/m);let f=i/v,p=1;i<=1&&v<=1&&(h=91),i>1&&v<1&&(f=1,p=v/i),i>1&&v>1&&(h=90,i>1.75&&v>1.75&&(h=(v-1)*100),f=i/v),null===(s=t.current)||void 0===s||s.setAttribute("style","transform: perspective(".concat(r,"px) rotateY(").concat(d,"deg) rotateX(").concat(u,"deg) scaleX(").concat(h*f,"%) scaleY(").concat(p*h,"%);")+"transform-style: preserve-3d;")}(.5*i+.5,-(.5*l)+.5,u,t,n)},[r.animate]);return(0,a.jsxs)("div",{ref:n,className:"pointer-events-none absolute z-10 h-full w-full origin-center",children:[(0,a.jsx)(R,{visible:!o,quiltLoaded:o,className:"z-[0] duration-500"}),(0,a.jsx)(M,{visible:!o,quiltLoaded:o,className:"z-[1] duration-500",src:null==s?void 0:s.url})]})});z.displayName="LoadingHologram";var G=i(58351),Q=i(85769),W=i(9244);function Y(e){var n,i,t,o,s,r,d,u,c,m;let{diffuse:v,depth:f,dimensions:p,blurredImage:k,depthiness:g,BGscale:x,stretch:N,hologram:w,props:b}=e,{blurredBackgroundScale:y,blurAmount:S,bgPosition:F}=(0,h.M4)("blurred background",{blurredBackgroundScale:{value:1,min:.1,max:3,step:.01},blurAmount:{value:1,min:0,max:1,step:.01},bgPosition:{value:-1,min:-4,max:4,step:.1}});(null==k?void 0:k.url)||console.error("RGBDShader: blurred image is not defined");let{colorMode:j,meshDensity:C}=(0,h.M4)("debug",{colorMode:{value:0,min:0,max:3,step:1},meshDensity:{value:320,min:1,max:800,step:1}}),D=(0,G.v)(1,!1),_=(0,l.useRef)(null),A=(0,Q.m)(v);A.encoding=U.sRGBEncoding,A.format=U.RGBAFormat,A.anisotropy=0,A.minFilter=U.NearestFilter,A.magFilter=U.NearestFilter;let I=(0,Q.m)(f);I.anisotropy=0,I.minFilter=U.NearestFilter,I.magFilter=U.NearestFilter;let M=(0,Q.m)(null!==(t=null==k?void 0:k.url)&&void 0!==t?t:""),R=(0,l.useMemo)(()=>({u_resolution:{value:new U.Vector2(null!==(o=p.x)&&void 0!==o?o:1,null!==(s=p.y)&&void 0!==s?s:1)},u_mouse:{value:new U.Vector2(0,0)},u_threshold:{value:new U.Vector2(.1,.1)},u_pixelRatio:{value:1},color:{value:A},tex:{value:I},u_time:{value:0},blurRadius:{value:5},u_backgroundScale:{value:1},u_highRange:{value:N},depthExaggeration:{value:g},maxDistance:{value:1},u_colorMode:{value:0},u_stretchy:{value:.003}}),[]);return((0,E.x)(e=>{if(null!==_&&null!==_.current&&null!==_.current.material){let e=_.current.material;e.uniforms.depthExaggeration.value=g,e.uniforms.u_backgroundScale.value=x,e.uniforms.u_highRange.value=N,e.uniforms.u_colorMode.value=j}}),w.aspectRatio&&w.rgbdZoom)?(0,a.jsxs)("group",{scale:[(null==w?void 0:w.rgbdZoom)*2,(null==w?void 0:w.rgbdZoom)*2,1],children:[(0,a.jsxs)("mesh",{position:[0,0,0],ref:_,children:[(0,a.jsx)("planeGeometry",{args:[(null===(n=b.hologram)||void 0===n?void 0:n.aspectRatio)?null===(i=b.hologram)||void 0===i?void 0:i.aspectRatio:1,1,C,C]}),(0,a.jsx)(W.Z,{fragmentShader:"uniform sampler2D color;\nuniform sampler2D tex;\nuniform float blurRadius;\nuniform float depthExaggeration;\nuniform float maxDistance;\nuniform vec2 u_resolution; // the size of the texture\nuniform float u_backgroundScale; //size to scale the background by\nuniform float u_highRange;\nuniform int u_colorMode;\nuniform float u_stretchy;\n\nvarying vec2 vUv;\nvarying float vDepthVariance;\nvarying float vIsBackground;\nvarying float vDepth;\n\nvec4 getClosestBackgroundPixel(vec2 uv, float searchRadius, int numSearchSteps) {\n    vec2 searchStep = 1.0 / u_resolution.xy;\n    vec4 closestBackgroundPixel = vec4(0.0);\n    float minDistance = vDepth;\n    bool foundBackgroundPixel = false;\n\n    for (int x = -numSearchSteps; x <= numSearchSteps; x++) {\n        for (int y = -numSearchSteps; y <= numSearchSteps; y++) {\n            // if (x == 0 && y == 0) continue; // don't sample the current pixel (center)\n            vec2 offset = vec2(x, y) * searchStep * searchRadius;\n            vec4 currentPixel = texture2D(tex, uv + offset);\n            vec4 currentPixelColor = texture2D(color, uv + offset);\n            \n            float sampledDepth = currentPixel.g;\n\n            // if (depthDifference > 0.0) { // Pixel is behind the current pixel\n            //     float distance = length(offset);\n            if (sampledDepth <= minDistance) {\n                    minDistance = sampledDepth;\n                    closestBackgroundPixel = currentPixelColor;\n                    foundBackgroundPixel = true;\n                }\n            // }\n        }\n    }\n\n    // If no background pixel is found, sample the color from the depth at the current point\n    if (!foundBackgroundPixel) {\n        vec4 sampledColor = texture2D(color, uv);\n        closestBackgroundPixel = sampledColor;\n        // return vec4(0.0, 1.0, 0.0, 1.0);\n    }\n\n    return closestBackgroundPixel;\n}\n\nvoid main() {\n  vec4 textureColor = texture2D(color, vUv);\n\n  if (u_colorMode == 3) {\n    if (vIsBackground == 0.0 ) {\n    csm_DiffuseColor = vec4(0.0, 1.0, 0.0, 1.0);\n  } else if (vDepthVariance > u_stretchy) {\n      vec4 closestBackgroundPixel = getClosestBackgroundPixel(vUv, 2.0, 5);\n      csm_DiffuseColor = closestBackgroundPixel;\n  }\n  else {\n    csm_DiffuseColor = vec4(1.0, 0.0, 0.0, 1.0);\n  }\n\n  } else if (u_colorMode == 2){\n   if (vDepthVariance > u_stretchy) {\n      csm_DiffuseColor = vec4(1.0, 1.0, 0.0, 1.0);\n    }\n    else {\n      csm_DiffuseColor = vec4(0.0, 0.0, 1.0, 1.0);\n   }\n  }  else if (u_colorMode == 1) {\n      csm_DiffuseColor = texture2D(tex, vUv);\n  }\n\n  else if (vDepthVariance > u_stretchy) {\n    vec4 closestBackgroundPixel = getClosestBackgroundPixel(vUv, 2.0, 5);\n    csm_DiffuseColor = closestBackgroundPixel;\n  }\n  else {\n      csm_DiffuseColor = textureColor;\n  }\n}",baseMaterial:U.MeshBasicMaterial,vertexShader:"uniform sampler2D tex;\nuniform float blurRadius;\nuniform float depthExaggeration;\nuniform float maxDistance;\nuniform vec2 u_resolution; // the size of the texture\nuniform float u_backgroundScale; //size to scale the background by\nuniform float u_highRange;\n\nvarying vec2 vUv;\nvarying float vDepth;\nvarying float vDepthVariance;\nvarying float vIsBackground;\n\n\nvec2 textureSize(sampler2D tex) {\n  return vec2(textureSize(tex, 0));\n}\n\nbool isBackground(float depth) {\n    // Exaggerate depth in the highest range of the texture map\n  if (depth > u_highRange) {\n    return false;\n  }\n  else {\n    return true;\n  }\n}\n\nfloat getDepth(vec2 _uv) {\n  // Calculate depth value (distance from camera) in linear space\n  float depth = texture2D(tex, _uv).r;\n\n\n  if (isBackground(depth) == false) {\n    depth += (depth - u_highRange);\n  }\n  \n  // Convert depth to logarithmic space\n  depth = log2(maxDistance * depth + 1.0) / log2(maxDistance + 1.0);\n  depth = 1.0 - depth;\n  depth = depth * depthExaggeration;\n  \n  return depth;\n}\n\n\n//calculate the variance in the depth of the pixels \nfloat depthVariance(vec2 _uv) {\n  const int numSamples = 3; // Number of samples for variance estimation\n  float depthSum = 0.0;\n  float depthSquaredSum = 0.0;\n\n  // Compute the sum and sum of squares of the depth values over a set of samples\n  for (int i = 0; i < numSamples; i++) {\n    float angle = 2.0 * PI * float(i) / float(numSamples);\n    float radius = sqrt(float(i) / float(numSamples));\n    vec2 sampleOffset = vec2(cos(angle), sin(angle)) * radius * vec2(0.01, 0.01);\n    float depth = getDepth(_uv + sampleOffset);\n    depthSum += depth;\n    depthSquaredSum += depth * depth;\n  }\n\n  // Compute the variance of the depth values using the sample mean and sample mean of squares\n  float sampleMean = depthSum / float(numSamples);\n  float sampleMeanOfSquares = depthSquaredSum / float(numSamples);\n  float variance = sampleMeanOfSquares - sampleMean * sampleMean;\n\n  return variance;\n}\n\nvec3 displacedPosition(float depth, vec2 _uv) {\n  vec3 displacedPos = position;\n\n  // Calculate displacement amount relative to center of texture\n  vec2 centerOffset = (_uv - vec2(0.5, 0.5));\n  float distanceFromCenter = length(centerOffset);\n\n  // Determine direction of displacement\n  float displacementDirectionX = sign(centerOffset.x);\n  float displacementDirectionY = sign(centerOffset.y);\n  float scaledDisplacement = u_backgroundScale * distanceFromCenter;\n\n  if (isBackground(depth) == false) {\n      // Spread out the vertices along the X and Y range\n    displacedPos.x += scaledDisplacement * centerOffset.x;\n    displacedPos.y += scaledDisplacement * centerOffset.y;\n  }\n\n  displacedPos.z -= (depth);\n\n  return displacedPos;\n}\n\nvoid main() {\n  // Transform vertex position from object space to clip space\n  vec4 _worldPosition = modelViewMatrix * vec4(position, 1.0);\n  vec4 _clipPosition = projectionMatrix * _worldPosition;\n\n  float depth = getDepth(uv);\n  bool background = isBackground(depth);\n\n  // calculate the displaced position, scale the background on x and y values. \n  vec3 dispPos = displacedPosition(depth, uv);\n\n  // Transform displaced vertex position to world space\n  vec4 displacedWorldPosition = modelViewMatrix * vec4(dispPos, 1.0);\n\n  // Calculate depth variance\n  float depthVar = depthVariance(uv);\n\n  // Interpolate between the original world position and the displaced world position based on depth variance\n  vec4 smoothWorldPosition = mix(_worldPosition, displacedWorldPosition, clamp(1.0 - depthVar, 0.0, 1.0));\n\n  // Transform smoothed world position to clip space\n  vec4 smoothClipPosition = projectionMatrix * smoothWorldPosition;\n\n  // Set output variables\n  vDepthVariance = depthVar;\n  csm_PositionRaw = smoothClipPosition;\n  vUv = uv;\n  // vNormal = normal;\n  vDepth = depth;\n  vIsBackground = float(background);\n}",uniforms:R,wireframe:!1,toneMapped:!1,...D})]}),(0,a.jsxs)("mesh",{position:[0,0,F+(null!==(r=null==w?void 0:w.rgbdFocus)&&void 0!==r?r:0)-(null!==(d=null==w?void 0:w.rgbdDepthiness)&&void 0!==d?d:0)],children:[(0,a.jsx)("planeGeometry",{args:[(null==w?void 0:w.aspectRatio)*y,1*y]}),(0,a.jsx)("meshBasicMaterial",{map:M,color:"#dfdede",...D})]}),(0,a.jsxs)("mesh",{position:[0,0,F-(null!==(c=null==w?void 0:w.rgbdFocus)&&void 0!==c?c:0)-1],children:[(0,a.jsx)("planeGeometry",{args:[(null==w?void 0:w.aspectRatio)*y*5,1*y*5]}),(0,a.jsx)("meshBasicMaterial",{map:M,color:"#dfdede",...D})]})]}):(console.error("hologram properties are not defined"),(0,a.jsx)(a.Fragment,{}))}var X=i(9564);function $(e){var n,i,t,o,s,d,u;let c=(0,l.useRef)(null),m=(0,l.useRef)(null),v=(0,l.useRef)(null),[f]=function(){let e=(0,l.useRef)(null),[n,i]=(0,l.useState)({width:0,height:0});return(0,l.useLayoutEffect)(()=>{if(e.current){let n=e.current.getBoundingClientRect();n.width>0&&n.height>0&&i(n)}let n=new ResizeObserver(e=>{let[n]=e,a=n.contentRect;a.width>0&&a.height>0&&i(a)});return e.current&&n.observe(e.current),()=>{e.current&&n.unobserve(e.current)}},[e]),[e,n]}(),p=(0,P.z)(e.hologram),k=p.find(e=>(null==e?void 0:e.kind)==="DEPTH"),g=null===(n=e.hologram)||void 0===n?void 0:null===(i=n.sourceImages)||void 0===i?void 0:i.find(e=>(null==e?void 0:e.kind)=="SOURCE"),x=e.viewcone*U.MathUtils.DEG2RAD,[w,b]=(0,l.useState)(),[y,S]=(0,l.useState)(!1),[F,j]=(0,l.useState)(""),[C,D]=(0,l.useState)(""),{thickness:_,chonk:A,radius:I,color:M}=(0,h.M4)("Glass",{thickness:{value:.01,min:.01,max:1,step:.01},chonk:{value:1,min:1,max:11,step:.01},radius:{value:.01,min:.001,max:1,step:.001},color:"#ffffff"}),R=(0,r.bp)(null===(t=e.hologram)||void 0===t?void 0:t.thumbnail);(0,l.useEffect)(()=>{if((null==k?void 0:k.url)&&(null==g?void 0:g.url)){var e,n;let i=k.width,a=(null==f?void 0:null===(e=f.current)||void 0===e?void 0:e.clientWidth)?null==f?void 0:null===(n=f.current)||void 0===n?void 0:n.clientWidth:800;a&&(a>i&&(a=i),a=100*Math.round(a/100)),j((0,X.iI)(g,a,{fm:"jpg"}).url),D((0,X.iI)(k,a,{fm:"jpg",blur:15}).url),""!==F&&""!==C?S(!0):S(!1)}},[k,g,C,F]);let T=(0,l.useCallback)((n,i,a,t)=>{var l,o,s,r,d;null==e||null===(l=e.onViewAngleChange)||void 0===l||l.call(e,n,i,a,t),null===(o=c.current)||void 0===o||null===(s=o.rotation)||void 0===s||s.set(a*Math.PI/(20/.75),n*Math.PI/(20/.75),0),e.frameTilt&&(null===(r=m.current)||void 0===r||null===(d=r.rotation)||void 0===d||d.set(t*Math.PI/(20/1.5),i*Math.PI/(20/1.5),0)),(0,E.k)()},[e.onViewAngleChange,e.animate]);return N({onViewAngleChange:(e,n,i,a)=>T(e,n,i,a),isQuiltLoaded:!0,rendererProps:e,circularRotation:!0}),(0,l.useEffect)(()=>{if(w&&e.width>0&&e.height>0){var n,i;let a=function(e,n,i,a,t){let l=e/n,o=1,s=i>1?1/i:1;i>1&&(o=i,s=1);let r=U.MathUtils.degToRad(a),d=2*Math.atan(Math.tan(r/2)*l);i<1&&(d*=1/i),l<=1&&i>1&&(r*=1/i);let u=.5*s/Math.tan(U.MathUtils.degToRad(.5*a));u+=.5*o*Math.sin(.5*t);let c=Math.min(.5*d,.5*t),m=.5*o*Math.cos(c),v=.5*o*Math.sin(c),h=v+m/Math.tan(.5*d);return Math.max(u,h+=.5*o*Math.sin(.5*t))}(e.width,e.height,(null===(n=e.hologram)||void 0===n?void 0:n.aspectRatio)?null===(i=e.hologram)||void 0===i?void 0:i.aspectRatio:1,22,x);w.camera.position.set(0,0,1*a),w.camera.setRotationFromAxisAngle(new U.Vector3(0,0,1),0)}},[e,w]),(0,a.jsxs)("div",{id:"hologram-element",className:"h-full w-full",ref:f,children:[(0,a.jsx)(z,{outerContainerRef:f,ref:v,assetsLoaded:y,blurredThumbnail:R,props:e,circularRotation:!0}),(0,a.jsx)(L.Xz,{camera:{fov:22},dpr:[1,2],onCreated:function(e){b(e)},frameloop:"demand",className:"relative z-0",children:y&&(0,a.jsxs)("group",{children:[(0,a.jsx)(V.Z,{ref:m,args:[(null===(o=e.hologram)||void 0===o?void 0:o.aspectRatio)?null===(s=e.hologram)||void 0===s?void 0:s.aspectRatio:1,1,_*A],radius:I*A,smoothness:12,children:(0,a.jsx)(Z,{roughness:0,color:M,transmission:1,opacity:0,distortion:0,chromaticAberration:0,ior:1.1,thickness:.8,envMapIntensity:1,toneMapped:!1})}),(0,a.jsx)("group",{ref:c,children:e.hologram&&(0,a.jsx)(Y,{diffuse:F,depth:C,dimensions:new U.Vector2((null==g?void 0:g.width)?g.width:1,(null==g?void 0:g.height)?g.height:1*e.hologram.aspectRatio),blurredImage:R,stretch:1,depthiness:null!==(u=null===(d=e.hologram)||void 0===d?void 0:d.rgbdDepthiness)&&void 0!==u?u:1,BGscale:1,highRange:0,hologram:e.hologram,props:e})})]})})]})}var J=i(51158);function K(e){let{aspectRatio:n}=e,{baseScale:i,yOffset:t,rotation:l,opacity:o}=(0,h.M4)({shadow:(0,h.so)({opacity:.21,baseScale:[1,.23,1],yOffset:-.02,rotation:[-Math.PI/2.5,0,0]})}),s=n>1?[1,1/n,1]:[n,1,1],r=[s[0]*i[0],s[0]*i[1],i[2]],d=(-.5+t)*s[1];return(0,a.jsx)(J.j,{opacity:o,scale:r,"position-y":d,rotation:l})}let ee=e=>{e.minFilter=U.LinearFilter,e.generateMipmaps=!1};class en extends U.Loader{load(e,n,i,a){let t=new U.ImageBitmapLoader(this.manager);t.setOptions({imageOrientation:"flipY",premultiplyAlpha:"none"}),t.setCrossOrigin(this.crossOrigin),t.setPath(this.path),t.load(e,function(e){let i=new U.CanvasTexture(e);ee(i),null==n||n(i)},i,a)}}class ei extends U.Loader{load(e,n,i,a){let t=new U.ImageLoader(this.manager);return t.setCrossOrigin(this.crossOrigin),t.setPath(this.path),t.load(e,function(e){let i=new U.Texture;ee(i),i.image=e,i.needsUpdate=!0,null==n||n(i)},i,a),null}}var ea=f.TL||"undefined"==typeof createImageBitmap?ei:en,et=i(69542);function el(e){var n,i,t,o;let{hologram:s,resolution:d=500,radius:u=.03,viewcone:c,onLoadComplete:m}=e,{gl:v}=(0,E.w)(),h=(0,l.useMemo)(()=>(0,r.Dd)(s,d,v.capabilities.maxTextureSize),[s.id,d,v.capabilities.maxTextureSize]),f=(0,l.useRef)(),k=(0,l.useRef)(),g=null!==(n=s.quiltTileCount)&&void 0!==n?n:x.ux,N=null!==(i=s.quiltCols)&&void 0!==i?i:x.$e,w=null!==(t=s.quiltRows)&&void 0!==t?t:x.Ys,b=null!==(o=s.aspectRatio)&&void 0!==o?o:x.RF,y=(0,l.useMemo)(()=>({scale:b>1?[1,1/b,1]:[b,1,1],position:[0,0,0]}),[b]),[S,F]=(0,l.useState)((0,et.DO)());(0,l.useEffect)(()=>{var e;let n=b>1?[1,1/b,1]:[b,1,1];if(null===(e=f.current)||void 0===e||e.scale.set(n[0],n[1],n[2]),k.current){let{u_view_layout:e,u_view_count:n,u_aspect:i}=k.current.uniforms;i.value=b,e.value=[N,w],n.value=g,k.current.uniformsNeedUpdate=!0,F((0,et.DO)())}},[s.id,N,w,g,b]);let j={quiltTextureUrl:h,quiltCols:N,quiltRows:w,viewCount:g,isFullQuilt:!0,matRef:k,radius:u,bleed:.005,resolution:d,aspect:b,viewcone:c,shaderMaterialKey:S,onLoadComplete:m};{let{invalidate:e}=(0,E.w)();p(n=>{k.current&&(k.current.uniforms.u_view_delta.value=n,k.current.uniformsNeedUpdate=!0,e())},[k,e])}let C=(0,r.bp)(s.thumbnail);return(0,a.jsxs)("mesh",{ref:f,...y,children:[(0,a.jsx)("planeGeometry",{}),(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(eo,{...j,quiltTextureUrl:(null==C?void 0:C.url)||h,quiltCols:1,quiltRows:1,viewCount:1,isFullQuilt:!1,matRef:null}),children:(0,a.jsx)(eo,{...j})})]})}function eo(e){let n=(0,E.z)(ea,e.quiltTextureUrl);(0,l.useEffect)(()=>{if(e.isFullQuilt){var i;null==e||null===(i=e.onLoadComplete)||void 0===i||i.call(e)}return()=>{n&&n.dispose()}},[n,e.isFullQuilt,e.matRef]);let i=(0,l.useMemo)(()=>({uniforms:{u_image:{value:n},u_view_layout:{value:[e.quiltCols,e.quiltRows]},u_view_count:{value:e.viewCount},u_viewcone:{value:e.viewcone*U.MathUtils.DEG2RAD},u_aspect:{value:e.aspect},u_resolution:{value:e.resolution},u_radius:{value:e.radius},u_bleed:{value:e.bleed},u_view_delta:{value:0}},side:U.FrontSide,fragmentShader:"#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_quad_uv;\nvarying vec4 v_view_uvs;\nvarying float v_view_blend;\n\nuniform sampler2D u_image;\nuniform float u_aspect;\nuniform float u_radius;\nuniform float u_resolution;\n\nvoid main() {\n    vec4 imgcolor = texture2D(u_image, v_view_uvs.xy);\n    vec4 imgcolor2 = texture2D(u_image, v_view_uvs.zw);\n    vec4 imageColor = mix(imgcolor, imgcolor2, v_view_blend);\n\n    // WIP Rounded rectangle border.\n    {\n        float radius = u_radius * max(u_aspect, 1.0) * (u_resolution < 500.0 && u_aspect > 1.0 ? 1.4 : 1.0);\n        vec2 rect_uv = (v_quad_uv * 2.0 - 1.0) * vec2(u_aspect, 1.0); // map to -1..1\n        vec2 size = vec2(u_aspect, 1.0);\n        float d = length(max(abs(rect_uv) - size + radius, 0.0)) - radius;\n        // todo: this AA-like technique causes bright artifacts on mobile for me, not sure why\n        // imageColor.a = smoothstep(0.2, 0.8, clamp(1.0 - d * 100.0, 0.0, 1.0));\n        if (d > 0.0) discard;\n    }\n\n    gl_FragColor = imageColor;\n}\n",vertexShader:"varying vec4 v_view_uvs;\nvarying vec2 v_quad_uv;\nvarying float v_view_blend;\n\nuniform vec2 u_view_layout;\nuniform float u_view_count;\nuniform float u_viewcone;\nuniform float u_bleed;\n\nuniform float u_view_delta;\n\n\n/**\n * Returns accurate MOD when arguments are approximate integers.\n */\n// from: https://stackoverflow.com/a/36078859\nfloat modI(float a,float b) {\n    float m=a-floor((a+0.5)/b)*b;\n    return floor(m+0.5);\n}\n\nvec2 get_view_uv_offsets(float viewIdx) {\n    return vec2(\n        modI(viewIdx, u_view_layout.x),\n        floor((viewIdx+0.5) / u_view_layout.x)\n    );\n}\n\nvoid main() {\n    v_quad_uv = uv;\n\n    // get horizontal view angle\n    vec3 viewNormal = normalMatrix * normal;\n\n    // Accelerometer might change the view angle.\n    viewNormal.x += u_view_delta;\n\n    vec2 horizViewNormal = normalize(viewNormal.xz);\n    float horizViewAngle = atan(horizViewNormal.x / -abs(horizViewNormal.y));\n\n    // experimental: give a tiny bit of vertical parallax to enhance feeling\n    // assumes there's only +- 2 degrees of tilt--don't want to pass another\n    // uniform in just for this\n    // note: i think it's ugly but leaving it in in case we want to test it at some point\n    // vec2 uv2 = uv;\n    // const float vertParallaxAmt = 0.01;\n    // uv2 = (uv2 - 0.5) * (1.0 - vertParallaxAmt) + 0.5;\n    // uv2.y += clamp(viewNormal.y / 0.034899, -0.5, 0.5) * vertParallaxAmt;\n\n    // zoom in slightly so the adjacent views don't bleed into the current one\n    vec2 uv2 = uv;\n    uv2 = (uv2 - 0.5) * (1.0 - u_bleed) + 0.5;\n\n    // choose view index from viewcone\n    // 30 deg viewcone = -15 to 15 degrees\n    // normalize in that range\n    float viewIdxFrac =\n        clamp(horizViewAngle / u_viewcone + 0.5, 0.0, 1.0) * u_view_count;\n\n    // set uvs to sample view\n    float viewIdx = clamp(floor(viewIdxFrac), 0.0, u_view_count - 1.0);\n    float viewIdx2 = clamp(ceil(viewIdxFrac), 0.0, u_view_count - 1.0);\n    v_view_uvs.xy = (uv2 + get_view_uv_offsets(viewIdx)) / u_view_layout;\n    v_view_uvs.zw = (uv2 + get_view_uv_offsets(viewIdx2)) / u_view_layout;\n    // v_view_blend = 0.0;\n    v_view_blend = viewIdxFrac - viewIdx;\n\n    vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewPosition;\n}\n"}),[e.quiltCols,e.quiltRows,e.viewCount,n,e.radius]);return(0,a.jsx)("shaderMaterial",{ref:e.matRef,...i},e.shaderMaterialKey)}function es(e){var n,i;let{width:t,height:o,dpr:r,containerRef:d}=e,u=(0,l.useRef)(null),[c,m]=(0,l.useState)(),[v,f]=(0,l.useState)(!1),[p,k]=(0,l.useState)(!1),g=e.viewcone*U.MathUtils.DEG2RAD,{radius:x}=(0,h.M4)({radius:.03}),w=t>0&&o>0&&v,[b,y]=(0,l.useState)(performance.now());(0,l.useEffect)(()=>{},[b]);let S=(0,l.useCallback)((n,i,a,t,l)=>{let o=a>1?1:a,s=.5*(a>1?1/a:1)/Math.tan(U.MathUtils.degToRad(.5*t));s+=.5*o*Math.sin(.5*l);let r=2*Math.atan(Math.tan(U.MathUtils.degToRad(.5*t))*(n/i)),d=Math.min(.5*r,.5*l);return Math.max(s,.5*o*Math.sin(d)+.5*o*Math.cos(d)/Math.tan(.5*r))*(e.dropshadow?1.1:1)},[e.dropshadow]);(0,l.useEffect)(()=>{if(c&&e.width>0&&e.height>0){var n,i;let a=S(e.width,e.height,(null===(n=e.hologram)||void 0===n?void 0:n.aspectRatio)?null===(i=e.hologram)||void 0===i?void 0:i.aspectRatio:1,22,g);c.camera.position.set(0,0,a),c.camera.setRotationFromAxisAngle(new U.Vector3(0,0,1),0)}},[e,c]),(0,l.useEffect)(()=>{let e=null==d?void 0:d.current;return()=>{if(e){let n=e;n.width=1,n.height=1}f(!1)}},[d]);let F=(0,l.useCallback)(n=>{var i,a;null===(i=e.onViewAngleChange)||void 0===i||i.call(e,n,0),null===(a=u.current)||void 0===a||a.rotation.set(0,U.MathUtils.degToRad(n*e.viewcone*.5),0),(0,E.k)()},[u]);return(N({onViewAngleChange:F,isQuiltLoaded:p,rendererProps:e}),e.hologram)?(0,a.jsx)(L.Xz,{style:{position:"inherit"},id:"hologram-element",className:(0,s.A)(v&&w?"opacity-100":"opacity-0","transition-opacity duration-200"),frameloop:"demand",ref:d,onCreated:function(e){f(!0),m(e)},camera:{fov:22},children:w&&"QUILT"==e.hologram.type&&(0,a.jsxs)("group",{ref:u,children:[e.dropshadow&&(0,a.jsx)(K,{aspectRatio:(null===(n=e.hologram)||void 0===n?void 0:n.aspectRatio)?null===(i=e.hologram)||void 0===i?void 0:i.aspectRatio:1}),(0,a.jsx)(el,{hologram:e.hologram,resolution:t,radius:x,onLoadComplete:function(){var n;k(!0),null===(n=e.onLoad)||void 0===n||n.call(e)},viewcone:e.viewcone})]})}):(console.error("No hologram provided to THREEHologramRenderer"),(0,a.jsx)(a.Fragment,{}))}let er={enableOnLookingGlass:!1,enableVR:!1,enableAngleStore:!1,dropshadow:!0,viewcone:45,enableIntersectionObserver:!0,wiggle:!0,webgl:!1,className:"",fullscreen:!1,wiggleContainerRef:null,animate:!1,showCreator:!1,showTitle:!1,viewBlending:!0,analytics:!0,frameTilt:!0};function ed(e){var n,i,c,m;(e={...er,...e}).animate&&(e.wiggle=!1);let v=(0,o.o)(e=>e.setHologramAngle),{width:h,height:f,ref:p}=(0,u.NB)({}),{ref:k,inView:g}=(0,d.YD)({skip:!e.enableIntersectionObserver,initialInView:!e.enableIntersectionObserver}),x=(0,l.useCallback)(e=>{p.current=e,k(e)},[k]),N=window.devicePixelRatio||1,w=(0,l.useCallback)(n=>{e.enableAngleStore&&v(n)},[e.enableAngleStore]),b={...e,viewcone:null!==(m=null!==(c=e.viewcone)&&void 0!==c?c:er.viewcone)&&void 0!==m?m:45,width:(0==h?null===(n=p.current)||void 0===n?void 0:n.offsetWidth:h)||720,height:(0==f?null===(i=p.current)||void 0===i?void 0:i.offsetHeight:f)||1080,onViewAngleChange:w,onLoad:function(){},dpr:N,containerRef:p};if(!function(e){var n;let{hologram:i,skip:a=!1}=e,[o,s]=(0,l.useState)(!1),r=t.S.stats.hologramPageView.useMutation(),d=(null==i?void 0:i.privacy)=="UNLISTED"?null==i?void 0:i.uuid:null==i?void 0:null===(n=i.id)||void 0===n?void 0:n.toString();(0,l.useEffect)(()=>{o||a||!d||(s(!0),r.mutate({lookup:d}))},[null==i?void 0:i.id,a])}({hologram:null==e?void 0:e.hologram,skip:!g||!e.analytics}),function(){let e=(0,o.o)(e=>e.updateNumHolograms);(0,l.useEffect)(()=>(e(1),()=>e(-1)),[e])}(),!e.hologram)return(0,a.jsx)(a.Fragment,{});let y=(0,r.hP)(e.hologram.aspectRatio);return(0,a.jsx)("div",{ref:x,className:(0,s.A)(e.className||y),children:g&&(0,a.jsxs)(a.Fragment,{children:[e.webgl&&"QUILT"==e.hologram.type&&(0,a.jsx)(es,{...b}),!e.webgl&&"QUILT"==e.hologram.type&&(0,a.jsx)(A,{...b}),"RGBD"==e.hologram.type&&(0,a.jsx)($,{...b})]})},e.hologram.id)}},26477:function(e,n,i){"use strict";i.d(n,{Z:function(){return s}});var a=i(85893),t=i(31574),l=i(54631),o=i.n(l);function s(e){let{animate:n,className:i="",reference:l}=e;return(0,a.jsxs)("svg",{ref:l,width:"25",height:"25",viewBox:"0 3 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,t.A)("fill-white",i,n?o().gradient:""),children:[(0,a.jsx)("defs",{children:(0,a.jsx)("linearGradient",{id:"MyGradient",fy:"90%",children:(0,a.jsx)("stop",{offset:"0%",stopColor:"lightblue",stopOpacity:"1",children:(0,a.jsx)("animate",{attributeName:"stop-color",values:"#4AC7FA;#E649F5;#4AC7FA",dur:"5s",repeatCount:"indefinite"})})})}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5 8.60827V15.9883C21.5 16.914 21.0114 17.7626 20.2143 18.2126L13.7857 21.9154C13.3871 22.1468 12.95 22.2626 12.5 22.2626C12.05 22.2626 11.6129 22.1468 11.2143 21.9154L10.5018 21.505C10.5022 21.3474 10.4894 21.1862 10.4624 21.0222C10.301 20.0291 9.95877 19.0981 9.47085 18.2635L11.61 19.544V13.0311L5.67 9.63398V14.9113C5.07937 14.6591 4.45256 14.4751 3.79958 14.3692L3.78786 14.3673L3.77611 14.3656C3.68316 14.3516 3.59107 14.3422 3.5 14.3372V8.60827C3.5 7.68256 3.98857 6.83398 4.78571 6.37113L11.2143 2.68113C11.6129 2.4497 12.05 2.33398 12.5 2.33398C12.95 2.33398 13.3871 2.4497 13.7857 2.68113L20.2143 6.38398C21.0114 6.83398 21.5 7.68256 21.5 8.60827ZM8.17037 20.1621L4.78571 18.2126C4.09408 17.8221 3.63474 17.1316 3.52526 16.3511L3.53233 16.3523C3.78632 16.3958 4.03494 16.455 4.27714 16.529C6.06764 17.0757 7.50709 18.4263 8.17037 20.1621ZM6.81 7.83684L12.5 11.204L18.19 7.83684L12.5 4.40398L6.81 7.83684ZM13.39 19.544L19.33 15.9883V9.63398L13.39 13.0311V19.544Z"}),(0,a.jsx)("path",{d:"M2.5 22.334L2.5 19.7332C3.93868 19.7332 5.10002 20.8949 5.10002 22.334L2.5 22.334ZM7.62205 22.334C7.19738 22.334 6.84204 22.0219 6.77271 21.5971C6.4607 19.7938 5.03936 18.3721 3.23667 18.06C2.812 17.9906 2.5 17.6352 2.5 17.2104C2.5 16.6815 2.95934 16.2654 3.47934 16.3434C6.0447 16.7596 8.07272 18.7795 8.48872 21.3457C8.57539 21.8658 8.15072 22.334 7.62205 22.334Z"})]})}},53468:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var a=i(85893);function t(e){return(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[(0,a.jsx)("path",{d:"M5.00016 8.33268C4.0835 8.33268 3.3335 9.08268 3.3335 9.99935V34.9994C3.3335 36.8327 4.8335 38.3327 6.66683 38.3327H26.6668C27.5835 38.3327 28.3335 37.5827 28.3335 36.666C28.3335 35.7494 27.5835 34.9994 26.6668 34.9994H8.3335C7.41683 34.9994 6.66683 34.2494 6.66683 33.3327V9.99935C6.66683 9.08268 5.91683 8.33268 5.00016 8.33268ZM31.6668 1.66602H13.3335C11.5002 1.66602 10.0002 3.16602 10.0002 4.99935V28.3327C10.0002 30.166 11.5002 31.666 13.3335 31.666H31.6668C33.5002 31.666 35.0002 30.166 35.0002 28.3327V4.99935C35.0002 3.16602 33.5002 1.66602 31.6668 1.66602ZM30.0002 28.3327H15.0002C14.0835 28.3327 13.3335 27.5827 13.3335 26.666V6.66602C13.3335 5.74935 14.0835 4.99935 15.0002 4.99935H30.0002C30.9168 4.99935 31.6668 5.74935 31.6668 6.66602V26.666C31.6668 27.5827 30.9168 28.3327 30.0002 28.3327Z",fill:"url(#paint0_radial_2778_138616)",className:e.className}),(0,a.jsx)("path",{d:"M24.4333 19.1676L22.1077 23.2221L20.0809 20.4175C19.8211 20.0374 19.3274 20.0374 19.0676 20.4175L16.807 23.7695C16.4692 24.2712 16.781 25.0009 17.3136 25.0009H27.6813C28.2139 25.0009 28.5257 24.2864 28.2009 23.7847L25.7325 19.1676C25.4856 18.7723 24.6931 18.7723 24.4333 19.1676Z",fill:"url(#paint1_radial_2778_138616)",className:e.className}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("radialGradient",{id:"paint0_radial_2778_138616",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(30.9588 38.3327) rotate(180) scale(24.0965 478.251)",children:[(0,a.jsx)("stop",{stopColor:"#A055FA"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#5F15E8"})]}),(0,a.jsxs)("radialGradient",{id:"paint1_radial_2778_138616",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(26.8442 25.0009) rotate(180) scale(8.87767 79.9527)",children:[(0,a.jsx)("stop",{stopColor:"#A055FA"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#5F15E8"})]})]})]})}},41572:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var a=i(85893);function t(e){return(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[(0,a.jsx)("path",{d:"m0,8.56h8.56V0h-4.28C1.93,0,0,1.93,0,4.28v4.28Zm0,10.7h8.56v-8.56H0v8.56Zm10.7,0h8.56v-8.56h-8.56v8.56Zm0-10.7h8.56V0h-8.56v8.56Zm10.7,10.7h8.56v-8.56h-8.56v8.56ZM4.28,29.97h4.28v-8.56H0v4.28c0,2.35,1.93,4.28,4.28,4.28Zm6.42,0h8.56v-8.56h-8.56v8.56Zm10.7,0h4.28c2.35,0,4.28-1.93,4.28-4.28v-4.28h-8.56v8.56Zm0-29.97v8.56h8.56v-4.28c0-2.35-1.93-4.28-4.28-4.28h-4.28Z",fill:"url(#gradient)",className:e.className}),(0,a.jsx)("defs",{children:(0,a.jsxs)("radialGradient",{id:"gradient",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(31.7918 31.6673) rotate(180) scale(24.0965 304.341)",children:[(0,a.jsx)("stop",{stopColor:"#A055FA"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#5F15E8"})]})})]})}},22570:function(e,n,i){"use strict";i.d(n,{Pe:function(){return ed},Ai:function(){return er},ZP:function(){return es}});var a=i(85893),t=i(45485),l=i(80205),o=i(32282),s=i(34202);function r(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=s.S.user.current.useQuery(void 0,{staleTime:6e5,enabled:e,refetchOnWindowFocus:!1});return n}var d=i(31574),u=i(90980),c=i(9930),m=i(67294),v=i(32512),h=i(86501),f=i(52743),p=i(37415),k=i(54364),g=i(25675),x=i.n(g);function N(){return(0,a.jsx)(k.u,{content:(0,a.jsx)(w,{}),className:"max-w-[550px]",delayDuration:0,disableHoverableContent:!1,children:(0,a.jsx)("span",{className:"cursor-help border-black border-opacity-50 dark:border-white md:!border-b md:border-dotted",children:"quilt"})})}function w(){return(0,a.jsxs)("div",{className:"flex flex-row space-x-2 p-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("p",{children:"Quilts are a Looking Glass specific file format that was designed to make it easy to share holographic files within standard image and video formats."}),(0,a.jsxs)("p",{children:["Quilts compress all the data present in a light field into a single image with each view only containing the necessary data for each view."," "]}),(0,a.jsxs)(p.w,{href:"https://docs.lookingglassfactory.com/keyconcepts/quilts",target:"_blank",className:"link group flex flex-row",children:["Learn more about quilts ",(0,a.jsx)(f.Z,{className:"icon w-5 group-hover:ml-2"})]})]}),(0,a.jsx)("div",{className:"relative w-1/3",children:(0,a.jsx)(x(),{src:"/quilt-example.webp",fill:!0,style:{objectFit:"cover"},className:"rounded-xl",quality:70,alt:""})})]})}var b=i(87578);i(30381);var y=i(53468);function S(e){var n;let i=(0,m.useRef)(null),[t,l]=(0,m.useState)(!1),{user:f}=(0,b.Z)(),k=f&&"ADMIN"===f.role,{data:g=20,refetch:x}=s.S.imageToHologram.getRemainingUserCredits.useQuery(),{data:w}=s.S.imageToHologram.getUserMonthlyLimit.useQuery(),[S,F]=(0,m.useState)(0),{queue:j}=(0,o.Z)(),C=r(),D=(0,m.useCallback)(n=>{var i;if(0===n.length){(0,h.ZP)("Oops! Currently you can only upload image files."),l(!1);return}(!(n.length>=g)||k||((0,h.ZP)((0,a.jsxs)("p",{className:"text-sm font-medium",children:["You’ve run out of hologram conversions! Not to worry though - ",(0,a.jsx)(p.w,{href:"https://look.glass/blocks-3Dimage",className:"text-purple-500",children:"just click here for more!"})]})),n=n.slice(0,g),0!==g))&&(l(!0),j(n,e.type),x(),null===(i=e.closePopup)||void 0===i||i.call(e))},[g]),{getRootProps:_,getInputProps:A,isDragActive:I,isDragAccept:M,isDragReject:R}=(0,v.uI)({onDrop:D,maxSize:u.Ox,multiple:!0,accept:"QUILT"==e.type?c.lI:c.Tv}),T="QUILT"==e.type?"quilt":"image",V=(null==C?void 0:null===(n=C.data)||void 0===n?void 0:n.totalHolograms)==0;return(0,a.jsxs)("div",{ref:i,className:(0,d.A)(e.className,"space-y-4"),children:[(0,a.jsxs)("div",{className:"space-y-1",children:[t&&(0,a.jsxs)("h1",{className:"text-xl font-bold md:text-3xl ",children:["Uploading ",S,"%..."]}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:"text-xl font-bold md:text-3xl ",children:[V&&"Upload your first hologram",!V&&"image"==T&&"3D Image",!V&&"quilt"==T&&"Light field"]}),(0,a.jsxs)("p",{className:"text-sm",children:["RGBD"===e.type&&"Turn any image into a hologram using A.I. magic.","QUILT"==e.type&&(0,a.jsxs)(a.Fragment,{children:["Upload a ",(0,a.jsx)(N,{})," that was exported from Unity, Unreal, or Blender."," ",(0,a.jsx)("span",{className:"link",onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"select_software")},children:"Learn more"})]})]})]})]}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{...A()}),(0,a.jsxs)("div",{..._(),className:(0,d.A)("space-y-4 rounded-xl border-4 py-24 px-4 text-center transition-all duration-500",I?"border-[#C9C4F1] bg-[#DECCFE] dark:bg-white dark:bg-opacity-10":"border-bluey-200 bg-bluey-100 dark:border-white dark:border-opacity-10 dark:bg-dark-purple-200",null!=R?R:"!border-red-500"),children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white md:text-3xl",children:I?(0,a.jsxs)(a.Fragment,{children:["Oooh,",(0,a.jsx)("br",{})," drop that hologram!"]}):(0,a.jsxs)(a.Fragment,{children:["Drag & drop to ",(0,a.jsx)("br",{}),"to upload"]})}),(0,a.jsxs)("div",{className:"text-sm opacity-50",children:["(","QUILT"==e.type?c.rE.join(", "):c.vU.join(", "),")"]}),(0,a.jsx)("button",{className:(0,d.A)("primaryButton transition-all duration-500",I?"opacity-30":""),children:"Or choose a file"})]})]}),"RGBD"===e.type&&(0===g?(0,a.jsxs)("p",{className:"text-sm",children:["Wow, you've made a lot of holograms this month! Want more?"," ",(0,a.jsx)(p.w,{href:"https://look.glass/blocks-3Dimage",className:"text-purple-500",children:"Click here."})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.Z,{className:"w-5 fill-black dark:fill-white"}),(0,a.jsxs)("span",{className:"font-medium",children:[g,"/",w]}),"3D Image uploads remaining."]})),e.setStep&&!t&&(0,a.jsx)(ed,{onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"select_upload_type")}})]})}var F=i(18226);function j(e){let{totalSteps:n,curStep:i,className:t=""}=e;return(0,a.jsx)("div",{className:(0,d.A)("flex flex-row space-x-2 absolute left-4 top-4 md:top-6 md:left-6",t),children:[...Array(n)].map((e,n)=>(0,a.jsx)("div",{className:(0,d.A)(n===i?"w-10 h-2 rounded-full bg-purple-gradient transition-[width] duration-300":"",n!==i?"w-3 h-2 rounded-full bg-[#D6D6DA] transition-[width] duration-300":"")},n))})}var C=i(24993),D=i(97752),_=i(89962),A=i(60721),I=i(70385);function M(e){let{mutate:n,isSuccess:i}=s.S.user.updatePersona.useMutation(),t=[{icon:C.Z,type:I.UserPersona.PERSONAL,name:"Personal",description:"I want to share my 3D creations with the world."},{icon:D.Z,type:I.UserPersona.EDUCATION,name:"Education",description:"I want to impress my students or classmates."},{icon:_.Z,type:I.UserPersona.SMALL_BUSINESS,name:"Small business",description:"I want to showcase my products in a new way."},{icon:A.Z,type:I.UserPersona.LARGE_BUSINESS,name:"Large company",description:"I want to reach a wider audience with my products."}];return(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6 p-4 md:p-6 mt-4 md:mt-6",children:[(0,a.jsx)("h1",{className:"text-xl md:text-3xl font-bold",children:"Tell us about yourself"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((i,t)=>(0,a.jsxs)("div",{onClick:()=>{var a;a=i.type,null==n||n({persona:a}),e.setStep("select_upload_type")},className:"container-button group rounded-xl flex flex-col space-y-2 place-content-center place-items-center text-center p-4 md:p-8 px-16",children:[(0,a.jsx)(i.icon,{className:"w-10 group-hover:dark:fill-[#B9DDFA] group-hover:fill-[#9E53FB]"}),(0,a.jsx)("div",{className:"font-bold text-xl",children:i.name}),(0,a.jsx)("div",{className:"text-sm",children:i.description})]},t))}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(ed,{onClick:()=>{e.setStep("welcome")}})})]})}var R=i(7297),T=i(31230),V=i(37887),E=i(22536),L=i(82472),U=i(44080),P=i(53018),q=i(86520),B=i(78789),O=i(73047);function H(){let e=(0,R.Z)(["\n	query onboardingBlocks($ids: [Int]!, $thumbnailWidth: Int = 400) {\n		holograms(ids: $ids, first: 9) {\n			nodes {\n				...HologramEmbed\n			}\n		}\n	}\n"]);return H=function(){return e},e}function Z(e){var n,i,t;let l=(q.TQ,[799,606,245,897,610,781,601,632,787]),o=(0,m.useRef)(null),[s,r]=(0,m.useState)((0,O.TV)(l)),u=(0,P.o)(e=>e.curHologramAngle),c=(0,m.useRef)(null);(0,m.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.setAttribute("style","background-image: linear-gradient(calc(20deg + ".concat(-Math.round(40*u),"deg), #4AC7FA 0%, #E649F5 98.47%)"))},[c,u]);let v=(0,V.a)(U.dk,{variables:{ids:s},fetchPolicy:"cache-first"}),h=[...null!==(t=null===(n=v.data)||void 0===n?void 0:null===(i=n.holograms)||void 0===i?void 0:i.nodes)&&void 0!==t?t:[]];h=h.sort((e,n)=>(null==e?void 0:e.id)&&(null==n?void 0:n.id)?s.indexOf(e.id)-s.indexOf(n.id):-1);let f=null==h?void 0:h[0],p=null==h?void 0:h.slice(1,5),k=null==h?void 0:h.slice(5,9);return(0,a.jsxs)("div",{id:"onboarding-welcome",ref:o,className:"space-y-6",children:[(0,a.jsx)("h1",{className:"px-6 pt-12 text-3xl font-bold",children:"Welcome to Blocks!"}),(0,a.jsxs)("div",{ref:c,className:(0,d.A)(0==h.length?"aspect-w-16 aspect-h-9":"","bg-holo-light flex flex-row place-content-center place-items-center px-2 md:px-8"),children:[(0,a.jsx)(z,{holograms:p}),(0,a.jsx)("div",{className:"flex-auto",children:f&&(0,a.jsx)(L.Z,{hologram:f,wiggleContainerRef:o,wiggle:!0,enableAngleStore:!0})}),(0,a.jsx)(z,{holograms:k})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"space-y-1 px-6 pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(E.Z,{className:"w-6 fill-light-purple"}),(0,a.jsxs)("span",{className:"",children:[(0,a.jsx)("strong",{children:"NEW! ✨"}),"Upload any image and convert it into a hologram in seconds."]})]}),(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(E.Z,{className:"w-6 fill-light-purple"}),(0,a.jsx)("span",{className:"",children:"Capture your 3D creations from Unity, Blender, or Unreal."})]}),(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(E.Z,{className:"w-6 fill-light-purple"}),(0,a.jsx)("span",{className:"",children:"Share and embed anywhere on the web."})]}),(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(E.Z,{className:"w-6 fill-light-purple"}),(0,a.jsx)("span",{className:"",children:"Preview on holographic displays."})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(er,{onClick:function(){var n;null===(n=e.setStep)||void 0===n||n.call(e,"persona")}})})]})]})}function z(e){let{holograms:n}=e;return(0,a.jsx)("div",{className:"w-20 md:w-56",children:(0,a.jsx)("div",{className:(0,d.A)("grid grid-cols-1 gap-2 md:grid-cols-2 md:gap-4"),children:null==n?void 0:n.map((e,n)=>{var i;return(0,a.jsx)("div",{className:(0,d.A)((0,B.hP)(null==e?void 0:e.aspectRatio),"overflow-hidden rounded-lg bg-white bg-opacity-40 drop-shadow-lg",n>1?"hidden md:block":""),children:(0,a.jsx)(x(),{src:null==e?void 0:null===(i=e.thumbnail)||void 0===i?void 0:i.url,alt:"",fill:!0,style:{objectFit:"cover"}})},n)})})})}(0,T.gql)(H());var G=i(44414);function Q(e){var n,i,t;return(0,a.jsxs)("div",{id:"upload-choice-".concat(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().replace(/ /g,"-")),className:(0,d.A)("group flex cursor-pointer flex-row place-items-center space-x-4 rounded-xl border-2 p-4 transition-all","container-button",e.comingSoon?"opacity-60":""),onClick:e.onClick,children:[(0,a.jsxs)("div",{className:(0,d.A)("border-200 flex aspect-1 w-14 place-content-center place-items-center rounded-lg border bg-white group-hover:drop-shadow-lg dark:border-0",e.icon?"group-hover:bg-purple-fade group-hover:border-0":""),children:[e.image&&(0,a.jsx)("div",{className:"relative p-4",children:(0,a.jsx)(x(),{src:e.image,fill:!0,style:{objectFit:"contain"},alt:null!==(t=null===(i=e.title)||void 0===i?void 0:i.toString())&&void 0!==t?t:"",className:""})}),e.icon&&(0,a.jsx)(e.icon,{className:"group-hover:fill-white"})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col md:space-y-1",children:[(0,a.jsxs)("div",{className:"dark:group-hover:holo5 font-bold dark:text-white md:text-xl",children:[e.title,e.comingSoon&&(0,a.jsx)("div",{className:"w-full text-sm font-normal opacity-30 md:inline md:pl-3 md:text-xl",children:"Coming soon!"})]}),(0,a.jsx)("div",{className:"text-xs dark:text-[#ffffffaa] md:text-sm",children:e.description})]}),(0,a.jsx)("div",{children:(0,a.jsx)(G.Z,{className:(0,d.A)("w-4 fill-gray-400 stroke-gray-400 transition-all","group-hover:translate-x-1 group-hover:fill-white group-hover:stroke-white")})})]})}function W(e){return(0,a.jsxs)("div",{className:"space-y-6 m-4 md:m-6 mt-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl md:text-3xl font-bold mt-10 md:mt-12",children:"Select your software"}),(0,a.jsxs)("p",{className:"text-sm",children:["Use one of the following plugins to render and upload a ",(0,a.jsx)(N,{}),"."]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(Q,{title:"Blender",image:"/blender-icon.png",onClick:()=>{var n;null==e||null===(n=e.setStep)||void 0===n||n.call(e,"download_software",I.SoftwareType.BLENDER)}}),(0,a.jsx)(Q,{title:"Unity",image:"/unity-icon.png",onClick:()=>{var n;null==e||null===(n=e.setStep)||void 0===n||n.call(e,"download_software",I.SoftwareType.UNITY)}}),(0,a.jsx)(Q,{title:"Unreal",image:"/unreal-icon.png",onClick:()=>{var n;null==e||null===(n=e.setStep)||void 0===n||n.call(e,"download_software",I.SoftwareType.UNREAL)}}),(0,a.jsx)(Q,{title:"WebXR",comingSoon:!0,image:"/webxr-icon.png",onClick:()=>{var n;null==e||null===(n=e.setStep)||void 0===n||n.call(e,"coming_soon","WebXR",I.UpcomingFeature.WEBXR)}}),(0,a.jsx)(Q,{title:"Cinema 4D",comingSoon:!0,image:"/cinema4d-icon.png",onClick:()=>{var n;null==e||null===(n=e.setStep)||void 0===n||n.call(e,"coming_soon","Cinema4D",I.UpcomingFeature.CINEMA4D)}})]}),(0,a.jsx)(ed,{onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"upload_quilt")}})]})}var Y=i(41572);function X(e){var n,i,t;let l=r();return(0,a.jsxs)("div",{id:"select-upload-type",className:"m-4 space-y-4 md:m-6 md:space-y-6",children:[(0,a.jsx)("h1",{className:"pt-6 text-xl font-bold md:text-3xl",children:(null==l?void 0:null===(n=l.data)||void 0===n?void 0:n.totalHolograms)&&(null==l?void 0:null===(i=l.data)||void 0===i?void 0:i.totalHolograms)>0?"Create a hologram":"Create your first hologram"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(Q,{title:"3D Image",description:"Turn any regular image into a hologram using AI magic.",icon:y.Z,onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"upload_image")}}),(0,a.jsx)(Q,{title:"Light field",description:"Capture a light-field accurate quilt from Unity, Blender, or Unreal.",icon:Y.Z,onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"upload_quilt")}})]}),!(null===(t=l.data)||void 0===t?void 0:t.hasSetPersona)&&(0,a.jsx)(ed,{onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"persona")}})]})}var $=i(94855),J=i(67596),K=i(31796);function ee(e){var n;let i=null==e?void 0:null===(n=e.args)||void 0===n?void 0:n[0];return(0,a.jsxs)("div",{className:"space-y-6 mb-6 mx-6",children:[(0,a.jsxs)("h1",{className:"text-xl md:text-3xl font-bold pt-12",children:["Export hologram with ",(0,O.a5)(i)]}),(0,a.jsxs)("div",{className:"space-y-8 md:space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1 md:text-2xl",children:[(0,a.jsx)("span",{className:"font-bold",children:"1."})," Download & install plugin"]}),(0,a.jsx)("div",{className:"w-full md:w-52 text-right",children:(0,a.jsx)(p.w,{href:"".concat("https://blocks.glass","/api/software/download/").concat(null==i?void 0:i.toLowerCase()),target:"_blank",children:(0,a.jsxs)("button",{className:"flex flex-row place-content-center primaryButton w-full md:text-xl",children:[(0,a.jsx)($.Z,{className:"w-6 mr-2"})," Download"]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2 ",children:[(0,a.jsxs)("div",{className:"flex-1 md:text-2xl",children:[(0,a.jsx)("span",{className:"font-bold",children:"2."})," Capture a hologram"]}),(0,a.jsx)("div",{className:"w-full md:w-52 text-right",children:(0,a.jsx)(p.w,{href:function(e){switch(e){case"UNITY":return"https://lookingglassfactory.com/tutorial/unity";case"UNREAL":return"https://lookingglassfactory.com/tutorial/unreal";case"BLENDER":return"https://lookingglassfactory.com/tutorial/blender"}return""}(i),target:"_blank",children:(0,a.jsxs)("button",{className:"flex flex-row place-content-center primaryButton w-full md:text-xl",children:[(0,a.jsx)(J.Z,{className:"w-6 mr-2"})," Setup Guide"]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[(0,a.jsxs)("div",{className:"flex-1 md:text-2xl",children:[(0,a.jsx)("span",{className:"font-bold",children:"3."})," Upload to Blocks"]}),(0,a.jsx)("div",{className:"w-full md:w-52 text-right",children:(0,a.jsxs)("button",{className:"flex flex-row place-content-center primaryButton w-full md:text-xl",onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"upload_quilt")},children:[(0,a.jsx)(K.Z,{className:"w-6 mr-2"})," Upload"]})})]})]}),(0,a.jsx)(ed,{onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,"select_software")}})]})}var en=i(93953),ei=i(75012),ea=i(93806);function et(e){var n,i;let t=null==e?void 0:null===(n=e.args)||void 0===n?void 0:n[0],l=null==e?void 0:null===(i=e.args)||void 0===i?void 0:i[1],[o,r]=(0,m.useState)(!1),u=s.S.user.hasFeatureNotification.useQuery({feature:l},{refetchOnWindowFocus:!1}),c=s.S.user.notifyFeatureAdd.useMutation(),v=s.S.user.notifyFeatureRemove.useMutation();(0,m.useEffect)(()=>{void 0!==u.data&&r(!0===u.data)},[u.isFetched,u.data]);let h="PHOTO_TO_HOLOGRAM"==l?"select_upload_type":"select_software";return(0,a.jsxs)("div",{className:"mx-6 mb-6 space-y-6",children:[(0,a.jsx)("h1",{className:"pt-12 text-xl font-bold md:text-3xl",children:t}),(0,a.jsx)("div",{className:"space-y-8 md:space-y-4",children:"Thanks for your interest! Subscribing helps us prioritize the features our community is most excited about. We will notify you of updates on our progress."}),(0,a.jsxs)("div",{className:"flex flex-row place-items-center",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(ed,{className:"inline-flex",onClick:()=>{var n;null===(n=e.setStep)||void 0===n||n.call(e,h)}})}),(0,a.jsx)("div",{className:"w-1/2 md:w-1/3",children:(0,a.jsxs)("button",{id:"notify-me-button",className:(0,d.A)("group inline-flex w-full place-content-center md:text-xl",o?"primaryButtonAlt":"primaryButton bg-primary-500 hover:bg-primary-600"),onClick:function(){o?(v.mutate({feature:l}),r(!1)):(c.mutate({feature:l}),r(!0))},children:[o&&(0,a.jsx)(en.Z,{className:"mr-2 hidden w-6 group-hover:inline-flex"}),o&&(0,a.jsx)(ei.Z,{className:"mr-2 w-6 group-hover:hidden"}),!o&&(0,a.jsx)(ea.Z,{className:"mr-2 w-6"}),o?"Subscribed":"Notify me"]})})]})]})}var el=i(13224),eo=i(70816);function es(e){var n;let[i,t]=(0,m.useState)(0),[o,s]=(0,m.useState)(!1),[u,c]=(0,m.useState)(),[v,h]=(0,m.useState)(),[f,p]=(0,m.useState)([]),[k,g]=(0,m.useState)(4),[x,N]=(0,m.useState)(null!==(n=e.open)&&void 0!==n&&n),{isBetaUser:w,user:y}=(0,b.Z)(),C=r(w);function D(){var n,i;(null===(n=C.data)||void 0===n?void 0:n.hasSetPersona)||C.refetch(),(0,el.d8)(eo.f,"true"),null===(i=e.onClose)||void 0===i||i.call(e),N(!1)}function _(e){for(var n,i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];let o=(null===(n=C.data)||void 0===n?void 0:n.hasSetPersona)?2:0;switch(h(u),(null==a?void 0:a.length)>0&&p(a),c(e),g(4-o),e){case"welcome":t(0);break;case"persona":t(1);break;case"select_upload_type":t(2-o);break;case"select_software":t(4-o),g(7-o);break;case"download_software":t(5-o),g(7-o);break;case"upload_image":case"upload_quilt":"download_software"==u?(g(7-o),t(6-o)):(g(4-o),t(3-o))}}return(0,m.useEffect)(()=>{var n,i;if((window.location.pathname.match(/\/settings/)||!(null==y?void 0:y.username))&&!e.forceOpen||C.isFetching||!w)return;let a="true"==(0,el.ej)(eo.f);a||(null===(n=C.data)||void 0===n?void 0:n.hasSetPersona)?N(null!==(i=null==e?void 0:e.open)&&void 0!==i&&i):N(!0)},[e.open,null==C?void 0:C.isFetched]),(0,m.useEffect)(()=>{if(x&&C.isFetched&&!o){var n;e.initialStep?_(null==e?void 0:e.initialStep):(null===(n=C.data)||void 0===n?void 0:n.hasSetPersona)?_("select_upload_type"):_("welcome"),s(!0)}else x||s(!1)},[x,null==C?void 0:C.isFetched]),(0,a.jsxs)(F.Z,{initialFocus:null,open:x,onClose:D,className:(0,d.A)("p-0","welcome"==u?"max-w-4xl":"max-w-2xl"),children:[(0,a.jsx)(j,{totalSteps:k,curStep:i}),C.isLoading&&(0,a.jsx)("div",{className:"flex min-h-[350px] place-content-center",children:(0,a.jsx)(l.Z,{})}),"welcome"==u&&!C.isLoading&&(0,a.jsx)(Z,{setStep:_}),"persona"==u&&(0,a.jsx)(M,{setStep:_}),"select_upload_type"==u&&(0,a.jsx)(X,{setStep:_}),"select_software"==u&&(0,a.jsx)(W,{setStep:_}),"download_software"==u&&(0,a.jsx)(ee,{setStep:_,args:f}),"upload_quilt"==u&&(0,a.jsx)(S,{type:"QUILT",setStep:_,prevStep:v,className:"m-4 mt-8 md:m-6 md:mt-12",closePopup:D}),"upload_image"==u&&(0,a.jsx)(S,{type:"RGBD",setStep:_,prevStep:v,className:"m-4 mt-8 md:m-6 md:mt-12",closePopup:D}),"coming_soon"==u&&(0,a.jsx)(et,{setStep:_,args:f})]})}function er(e){let{onClick:n}=e;return(0,a.jsx)("div",{className:"mx-6",children:(0,a.jsx)("button",{className:"primaryButton bottom-0 mb-6 w-full px-12 md:absolute md:right-0 md:mr-6 md:w-auto",onClick:n,children:"Next"})})}function ed(e){let{onClick:n,className:i}=e;return(0,a.jsxs)("div",{className:(0,d.A)("group flex cursor-pointer flex-row space-x-1 opacity-50 transition-opacity hover:opacity-100",i),onClick:n,children:[(0,a.jsx)(t.Z,{className:"w-6 transition-transform group-hover:-translate-x-1"}),(0,a.jsx)("button",{className:"secondaryButton text-xl font-bold",children:"Back"})]})}},44080:function(e,n,i){"use strict";i.d(n,{Fm:function(){return r},HM:function(){return m},I1:function(){return k},Jw:function(){return v},Mg:function(){return p},NV:function(){return d},Nf:function(){return h},PR:function(){return u},QG:function(){return o},RT:function(){return s},_o:function(){return c},dk:function(){return t},fu:function(){return l},h4:function(){return f},q5:function(){return a},sz:function(){return x},uJ:function(){return N},xw:function(){return g}});let a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FindVideo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"previewVideoAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]},t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"onboardingBlocks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"thumbnailWidth"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"400"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"holograms"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"9"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HologramEmbed"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HologramEmbed"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Hologram"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"thumbnailWidth"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"totalViews"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"rgbdZoom"}},{kind:"Field",name:{kind:"Name",value:"rgbdFocus"}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}}]}}]},l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateHologramFromImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateHologramFromImageInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createHologramFromImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"100"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createQuiltHologram"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateQuiltHologramInputType"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createQuiltHologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"100"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteHologram"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteHologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"replaceQuiltHologram"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"imageUrl"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"replaceQuiltHologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"imageUrl"},value:{kind:"Variable",name:{kind:"Name",value:"imageUrl"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"100"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateHologram"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateHologramInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateHologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"canUsersDownload"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}}]}}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateUserInputType"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AllHolograms"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"50"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderBy"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"discover"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hologramClass"}},type:{kind:"NamedType",name:{kind:"Name",value:"hologramClass"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"holograms"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}},{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"Variable",name:{kind:"Name",value:"orderBy"}}},{kind:"Argument",name:{kind:"Name",value:"discover"},value:{kind:"Variable",name:{kind:"Name",value:"discover"}}},{kind:"Argument",name:{kind:"Name",value:"hologramClass"},value:{kind:"Variable",name:{kind:"Name",value:"hologramClass"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"}},{kind:"Field",name:{kind:"Name",value:"startCursor"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"rgbdZoom"}},{kind:"Field",name:{kind:"Name",value:"rgbdFocus"}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"kind"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}}]}}]}}]}}]}}]},m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"subId"},value:{kind:"Variable",name:{kind:"Name",value:"subId"}}},{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"role"}},{kind:"Field",name:{kind:"Name",value:"picture"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}}]}}]}}]},v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"50"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"endCursor"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"email"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"subId"}},{kind:"Field",name:{kind:"Name",value:"role"}}]}}]}}]}}]}}]},h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"hologramFindById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uuid"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"uuid"},value:{kind:"Variable",name:{kind:"Name",value:"uuid"}}},{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"canUsersDownload"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"rgbdFocus"}},{kind:"Field",name:{kind:"Name",value:"rgbdZoom"}},{kind:"Field",name:{kind:"Name",value:"rgbdStretch"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"totalViews"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"1200"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"previewVideoAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"versionHash"}}]}},{kind:"Field",name:{kind:"Name",value:"previewGifAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"versionHash"}}]}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"versionHash"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"role"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}}]}}]}}]},f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"playlistFindById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"20"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"discover"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlist"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}},{kind:"Field",name:{kind:"Name",value:"featuredHologram"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"previewGifAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"previewVideoAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"discover"},value:{kind:"Variable",name:{kind:"Name",value:"discover"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"position"}},{kind:"Field",name:{kind:"Name",value:"hologram"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HologramPreview"}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HologramPreview"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Hologram"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"totalViews"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchAssets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"canUsersDownload"}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"previewGifAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"previewVideoAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}},{kind:"Field",name:{kind:"Name",value:"fileSize"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchRgbdAssets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"rgbdFocus"}},{kind:"Field",name:{kind:"Name",value:"rgbdZoom"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRgbdAssets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hologram"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}}]}}]}}]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MyHolograms"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"25"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"thumbnailWidth"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"500"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"myHolograms"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"endCursor"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"canUsersDownload"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"thumbnailWidth"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"previewVideoAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"previewGifAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"rgbdAssets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"kind"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}}]}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PlaylistItemsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"lookup"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"20"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"lookup"},value:{kind:"Variable",name:{kind:"Name",value:"lookup"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"}},{kind:"Field",name:{kind:"Name",value:"startCursor"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"position"}},{kind:"Field",name:{kind:"Name",value:"hologram"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HologramPreview"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HologramPreview"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Hologram"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"uuid"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"privacy"}},{kind:"Field",name:{kind:"Name",value:"aspectRatio"}},{kind:"Field",name:{kind:"Name",value:"quiltTileCount"}},{kind:"Field",name:{kind:"Name",value:"quiltCols"}},{kind:"Field",name:{kind:"Name",value:"quiltRows"}},{kind:"Field",name:{kind:"Name",value:"rgbdDepthiness"}},{kind:"Field",name:{kind:"Name",value:"totalViews"}},{kind:"Field",name:{kind:"Name",value:"permalink"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"picture"}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"sourceImages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},44820:function(e,n,i){"use strict";i.d(n,{Q:function(){return t}});var a=i(64529);let t=(0,a.ZP)(e=>({isOwner:!1,setIsOwner:n=>e(e=>({isOwner:n})),isOpen:!1,setOpen:n=>e(e=>({isOpen:n})),state:"first_time_connect",setState:n=>e(e=>({state:n}))}))},68930:function(e,n,i){"use strict";i.d(n,{q:function(){return f}});var a=i(44845),t=i(15814),l=i(67294),o=i(85518),s=i(7297),r=i(73359),d=i(58445),u=i(44080);function c(){let e=(0,s.Z)(["\n	query fetchRgbdAssets($lookup: String) {\n		hologram(lookup: $lookup) {\n			id\n			title\n			permalink\n			rgbdDepthiness\n			rgbdFocus\n			rgbdZoom\n			quiltRows\n			quiltCols\n			quiltTileCount\n			aspectRatio\n			sourceImages {\n				url\n				kind\n			}\n			rgbdAssets {\n				url\n				kind\n			}\n			type\n		}\n	}\n"]);return c=function(){return e},e}(0,d.Ps)(c());var m=i(44820),v=i(8596),h=i(87578);function f(){let e=(0,t.H)(),n=(0,m.Q)(),{isAdmin:i}=(0,h.Z)(),[s,d]=(0,l.useState)(),{load:c,data:f}=function(e){var n;let[i,a]=(0,l.useState)(!1),[t,{called:o,loading:s,data:d}]=(0,r.t)(u.I1,{variables:{lookup:(null==e?void 0:e.privacy)=="UNLISTED"?e.uuid:null==e?void 0:null===(n=e.id)||void 0===n?void 0:n.toString()}});return(0,l.useEffect)(()=>{d&&!i&&a(!0)},[d]),{called:o,loading:s,data:d,load:function(e,n){var i;e&&t({onError:e=>console.log(e),variables:{lookup:(null==e?void 0:e.privacy)=="UNLISTED"?e.uuid:null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString()},onCompleted:n})},isLoaded:i}}(e.hologram),{sendToLookingGlass:p,checkDeviceConnection:k}=(0,v.g)();function g(){e.setError(!0),e.setConnecting(!1),e.setCasting(!1),e.setConnected(!1),e.setDisconnecting(!1),d("No display connected"),n.setState("cant_connect"),n.setOpen(!0)}function x(){e.setError(!0),e.setConnecting(!1),e.setCasting(!1),e.setConnected(!1),e.setDisconnecting(!0),n.setState("disconnected"),n.setOpen(!0)}function N(){n.setState("outdated"),n.setOpen(!0),n.setIsOwner(!1),e.setConnected(!0)}async function w(i){let t=a.BridgeClient.getInstance();if(!1==e.isConnected){let n=await t.connect();if(n.success&&t.addEventListener("Bridge Disconnected",x),!1==n.success)return console.warn("Bridge connection failed"),g(),{isValid:!1,version:0};e.setVersion(n.response.version);try{let e=await t.getDisplays();if(e.success){var l;if((null===(l=e.response)||void 0===l?void 0:l.length)==0)throw Error("No displays connected")}}catch(e){return console.warn("No displays connected",e),g(),{isValid:!1,version:0}}if(n.response.version.major<=2&&n.response.version.minor<3&&"RGBD"==i)return N(),{isValid:!1,version:n.response.version}}let o=await t.getVersion();return o.response.major<=2&&o.response.minor<3&&"RGBD"==i?(N(),{isValid:!1,version:o.response}):(e.setError(!1),e.setCasting(!1),e.setConnected(!0),e.setDisconnecting(!1),n.setState("connected"),n.setOpen(!0),{isValid:!0,version:o.response})}async function b(i){let t=a.BridgeClient.getInstance();t.setVerbosity(0);let l=null==i?void 0:i.hologram;if(!l)return;let o=null==l?void 0:l.sourceImages[0].url,s=null;if("QUILT"===l.type)s=new a.QuiltHologram({uri:o,settings:{rows:l.quiltRows,columns:l.quiltCols,aspect:l.aspectRatio,viewCount:l.quiltTileCount}});else if("RGBD"===l.type){var r;let e=null==l?void 0:null===(r=l.rgbdAssets)||void 0===r?void 0:r.filter(e=>(null==e?void 0:e.kind)=="RGBD");if(!e||(null==e?void 0:e.length)==0)return;s=new a.RGBDHologram({uri:e[0].url,settings:{depthiness:4*l.rgbdDepthiness,focus:.03*l.rgbdFocus,zoom:2*l.rgbdZoom,aspect:l.aspectRatio,chroma_depth:0,depth_inversion:0,depth_loc:2,depth_cutoff:0}})}if(s)return await t.cast(s),e.setConnecting(!1),e.setHologram(l),n.setState("connected"),n.setIsOwner(!0),e.setCasting(!0),s}async function y(n){if((await w(n.type)).isValid)e.setConnecting(!0),c(n,b);else if("QUILT"==n.type){if(k(),e.isError)return;p(n)}}async function S(){var i;o.tq||(e.setConnecting(!1),e.setDisconnecting(!0),e.setHologram(null),null===(i=e.bridgeClient)||void 0===i||i.showWindow(!1),e.setCasting(!1),n.setIsOwner(!1),n.setOpen(!1))}return{error:s,checkDeviceConnection:w,castHologram:y,wipeFromDevice:S}}},15814:function(e,n,i){"use strict";i.d(n,{H:function(){return l}});var a=i(64529),t=i(44845);let l=(0,a.ZP)(e=>({attempts:0,fails:0,holoplayClient:null,setHoloPlayClient:n=>e(e=>({holoplayClient:n})),bridgeClient:t.BridgeClient.getInstance(),isError:!1,setError:n=>e(e=>({isError:n,fails:n?e.fails+1:e.fails})),isConnecting:!1,setConnecting:n=>e(e=>({isConnecting:n,attempts:n?e.attempts+1:e.attempts})),isDisconnecting:!1,setDisconnecting:n=>e(e=>({isDisconnecting:n})),isConnected:!1,setConnected:n=>e(e=>({isConnected:n})),wasConnected:!1,setWasConnected:n=>e(e=>({wasConnected:n})),isCasting:!1,setCasting:n=>e(e=>({isCasting:n})),hologram:null,setHologram:n=>e(e=>({hologram:n})),version:{major:0,minor:0},setVersion:n=>e(e=>({version:n}))}))},83692:function(e,n,i){"use strict";i.d(n,{t:function(){return t}});var a=i(67294);function t(){let[e,n]=(0,a.useState)(!1);function i(e){n(e.matches)}return(0,a.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");return n(e.matches),e.addEventListener("change",i),()=>{e.removeEventListener("change",i)}},[]),e}},8596:function(e,n,i){"use strict";i.d(n,{g:function(){return r}});var a=i(9564),t=i(74205),l=i(67294),o=i(85518),s=i(15814);function r(){let[e,n]=(0,l.useState)(),i=(0,s.H)();function r(e,a){i.setError(!0),i.setConnecting(!1),i.setCasting(!1),i.setConnected(!1),i.setDisconnecting(!1),n("No display connected")}function u(){i.setError(!1),i.setWasConnected(!0),i.setConnected(!0),i.setConnecting(!1)}let c=e=>{if(o.tq)return;i.setConnecting(!0),i.setHologram(e);let{quiltCols:n,quiltRows:l,quiltTileCount:s,aspectRatio:c}=e,m=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpeg",i=e.sourceImages[0],t=i.width,l=i.height;return t>8192&&(l*=8192/t,t=8192),l>8192&&(t*=8192/l,l=8192),t=Math.floor(t/e.quiltCols)*e.quiltCols,l=Math.floor(l/e.quiltRows)*e.quiltRows,(0,a.iI)(i,t,{fm:n,fit:"scale"},l)}(e);if(!m.url)throw Error("HoloPlayCore: No quilt image found");if(!l)throw Error("HoloPlayCore: quiltRows not set");if(!n)throw Error("HoloPlayCore: quiltCols not set");if(!s)throw Error("HoloPlayCore: quiltTileCount not set");if(!c)throw Error("HoloPlayCore: aspectRatio not set");d({client:i.holoplayClient,setClient:i.setHoloPlayClient,onConnect:async e=>{u(),i.setCasting(!0);let a=await fetch(m.url),o=await a.arrayBuffer(),r=new t.ShowMessage({vx:n,vy:l,vtotal:s,aspect:c},new Uint8Array(o),0);await e.sendMessage(r)},onError:r})};return{checkDeviceConnection:function(){i.setConnecting(!0),d({client:i.holoplayClient,setClient:i.setHoloPlayClient,onConnect:u,onError:r})},sendToLookingGlass:c,wipeFromLookingGlass:async function(){o.tq||(i.setConnecting(!0),i.setDisconnecting(!0),i.setHologram(null),d({client:i.holoplayClient,setClient:i.setHoloPlayClient,onConnect:async e=>{u();let n=new t.WipeMessage(0);await e.sendMessage(n),i.setCasting(!1)},onError:r}))},error:e}}function d(e){let{client:n,setClient:i,onConnect:a,onError:l}=e;n?null==a||a(n):i(n=new t.Client(async()=>{null==a||a(n)},e=>{null==l||l(n,e)},()=>{},!1,"Blocks",!0,"none"))}},85358:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var a=i(67294);function t(e){let[n,i]=(0,a.useState)(!1),[t,l]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let n=e.filter(e=>"string"==typeof e),a=!1;return async function(){if(!a)try{let e=await Promise.all(n.map(e=>new Promise((n,i)=>{let a=new Image;if(a.decoding="async",a.onload=async function(){n({src:e})},a.onerror=a.onabort=function(){i({src:e})},a.src=e,a.complete){n({src:e,cached:!0});return}})));if(l(e.filter(e=>!0===e.cached).length),a)return;i(!0)}catch(e){i(!1)}}(),()=>{a=!0}},[e.join(",")]),(0,a.useEffect)(()=>{i(!1)},[e]),{imagesPreloaded:n,totalCachedImages:t}}},87578:function(e,n,i){"use strict";i.d(n,{Z:function(){return s}});var a=i(73606),t=i(64487),l=i(34202),o=i(67294);function s(){var e,n,i;let{user:s,isLoading:r}=(0,a.aF)(),d=l.S.user.current.useQuery(void 0,{staleTime:36e5,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1}),u=null===(e=d.data)||void 0===e?void 0:e.user,c=!!s,m=c&&null!=u,v=null===(n=d.data)||void 0===n?void 0:n.isModerator,h=c&&!u&&d.isLoading;return(0,o.useEffect)(()=>{if(m&&u){var e,n,i;(0,t.av)({email:null!==(n=null==s?void 0:s.email)&&void 0!==n?n:void 0,username:null!==(i=u.username)&&void 0!==i?i:void 0,id:null==u?void 0:null===(e=u.id)||void 0===e?void 0:e.toString()})}},[m,u]),{authUser:s,hasUsername:(null===(i=d.data)||void 0===i?void 0:i.hasUsername)&&!d.isLoading,user:u,isLoading:r,isLoggedIn:c,isBetaUser:m,isModerator:v,isAdmin:(null==u?void 0:u.role)=="ADMIN",refetch:d.refetch,isFetchingDBUser:h}}},73294:function(e,n,i){"use strict";i.d(n,{z:function(){return d}});var a=i(7297),t=i(31230),l=i(37887),o=i(44080),s=i(67294);function r(){let e=(0,a.Z)(["\n	query GetRgbdAssets($id: Int!) {\n		hologram(id: $id) {\n			id\n			rgbdAssets {\n				url\n				width\n				height\n				kind\n			}\n		}\n	}\n"]);return r=function(){return e},e}function d(e){var n,i,a,t,r;let d=!(null==e?void 0:null===(n=e.rgbdAssets)||void 0===n?void 0:n.length),{data:u,loading:c,stopPolling:m,startPolling:v}=(0,l.a)(o.xw,{variables:{id:null!==(a=null==e?void 0:e.id)&&void 0!==a?a:0},skip:!d});return(0,s.useEffect)(()=>{var e,n;(null==u?void 0:null===(e=u.hologram)||void 0===e?void 0:e.rgbdAssets)&&(null==u?void 0:null===(n=u.hologram)||void 0===n?void 0:n.rgbdAssets.length)>1?m():d&&!c&&v(500)},[d,u]),null!==(r=null!==(t=null==u?void 0:null===(i=u.hologram)||void 0===i?void 0:i.rgbdAssets)&&void 0!==t?t:null==e?void 0:e.rgbdAssets)&&void 0!==r?r:[]}(0,t.gql)(r())},2489:function(e,n,i){"use strict";i.d(n,{c:function(){return t}});var a=i(64529);let t=(0,a.ZP)(e=>({status:"Ready",setStatus:n=>e({status:n}),uploads:[],queue:(n,i,a)=>e(e=>{let t=[];t=n instanceof File?[n]:n;let l=[];for(let n=0;n<t.length;n++)l.push({title:t[n].name,id:e.uploads.length+1+n,file:t[n],status:"Queued",type:i,hologram:null==a?void 0:a.replacement});return{uploads:[...e.uploads,...l]}}),addUpload:n=>e(e=>(n.id=e.uploads.length+1,{uploads:[...e.uploads,n]})),setHologram:n=>e(e=>{for(let a=0;a<e.uploads.length;a++){var i;(null===(i=e.uploads[a].hologram)||void 0===i?void 0:i.id)==n.id&&(e.uploads[a].hologram={...e.uploads[a].hologram,...n})}return{uploads:[...e.uploads]}}),setFile:(n,i)=>e(e=>{for(let a=0;a<e.uploads.length;a++)e.uploads[a].id==n.id&&(e.uploads[a]={...n,status:i});return{uploads:[...e.uploads]}}),clearQueue:()=>e({uploads:[]}),abortController:void 0,setAbortController:n=>e({abortController:n})}))},32282:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var a=i(9669),t=i.n(a),l=i(2489),o=i(50319),s=i(44080),r=i(67294);function d(){let{status:e,uploads:n,setFile:i,queue:a,setStatus:d,clearQueue:u,setAbortController:c,abortController:m}=(0,l.c)(e=>e),[v,h]=(0,r.useState)(!1),[f]=(0,o.D)(s.fu,{refetchQueries:v?[s.sz]:void 0}),[p]=(0,o.D)(s.QG,{refetchQueries:v?[s.sz]:void 0}),[k]=(0,o.D)(s.Fm);async function g(e){i(e,"Uploading");let n=encodeURIComponent(e.file.name),a=await t().post("/api/upload",{file:n}),l=a.data,o=new FormData;Object.entries({...l.fields,file:e.file}).forEach(e=>{let[n,i]=e;o.append(n,i)});let s=new AbortController;return c(s),await t().request({method:"post",url:l.url,data:o,signal:s.signal,onUploadProgress:n=>{i({...e,bytesUploaded:n.loaded},"Uploading")}}),e.url="".concat(l.url,"/").concat(l.fields.key),e}async function x(e){var n,a;if(!e.url){console.error("No URL for upload"),i(e,"Failed");return}if("QUILT"==e.type){let i=await p({variables:{data:{imageUrl:e.url,privacy:"UNLISTED"}}});return null===(n=i.data)||void 0===n?void 0:n.createQuiltHologram}if("RGBD"==e.type){let n=await f({variables:{data:{imageUrl:e.url,privacy:"UNLISTED"}}});return null===(a=n.data)||void 0===a?void 0:a.createHologramFromImage}}async function N(e){let n=await g({file:e,title:"Profile Image",status:"Ready"});return n}async function w(){if("Uploading"==e)return;let a=n.filter(e=>"Queued"==e.status);for(let e=0;e<a.length;e++){var t,l;let n;d("Uploading");let o=await g(a[e]);if(o.hologram){let{id:e}=o.hologram;n=null===(l=(await k({variables:{id:e,imageUrl:o.url},refetchQueries:[{query:s.Nf,variables:{id:o.hologram.id},fetchPolicy:"network-only"}]})).data)||void 0===l?void 0:l.replaceQuiltHologram}else n=await x(o);(null==n?void 0:n.id)&&(null===(t=n.user)||void 0===t?void 0:t.username)&&n.title&&i({...o,hologram:n,username:n.user.username,title:n.title},"Complete")}d("Complete")}return(0,r.useEffect)(()=>{window.location.href.match(/\/manage/)&&h(!0)},[]),!function(e){let n=(0,r.useCallback)(e=>(e.preventDefault(),e.returnValue=""),[]);(0,r.useEffect)(()=>(e?window.addEventListener("beforeunload",n):window.removeEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}),[e])}("Uploading"==e),{status:e,uploads:n,totalUploading:n.filter(e=>"Uploading"==e.status).length,uploadFile:g,setFile:i,queue:a,uploadSingleFile:N,uploadQueue:w,clearQueue:u,abortController:m}}},25033:function(e,n,i){"use strict";function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window){var i;null==window||null===(i=window.dataLayer)||void 0===i||i.push({event:e,...n})}}function t(e,n,i){return"".concat(e,"?utm_source=blocks&utm_medium=").concat(n,"&utm_campaign=").concat(i)}function l(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(n,{"user-id":e.subId,...i})}i.d(n,{Tj:function(){return a},lO:function(){return l},tE:function(){return t}})},70816:function(e,n,i){"use strict";i.d(n,{f:function(){return a}});let a="has_seen_onboarding"},74205:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e,n){for(var i in n)Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}(n,{CacheMessage:()=>N,CheckMessage:()=>h,Client:()=>u,DeleteMessage:()=>v,InfoMessage:()=>p,InitMessage:()=>m,Message:()=>c,ShaderMessage:()=>g,ShowCachedMessage:()=>w,ShowMessage:()=>x,UniformsMessage:()=>k,WipeMessage:()=>f});var i,a,t,l,o,s="undefined"!=typeof globalThis?globalThis:window,r=(i=o={exports:{}},o.exports,a=s,l={encode:function(e){var n,i=new ArrayBuffer(256),a=new DataView(i),l=0;function o(e){for(var t=i.byteLength,o=l+e;t<o;)t*=2;if(t!==i.byteLength){var s=a;i=new ArrayBuffer(t),a=new DataView(i);for(var r=l+3>>2,d=0;d<r;++d)a.setUint32(4*d,s.getUint32(4*d))}return n=e,a}function s(e){o(1).setUint8(l,e),l+=n}function r(e){for(var i=o(e.length),a=0;a<e.length;++a)i.setUint8(l+a,e[a]);l+=n}function d(e,i){var a,t;i<24?s(e<<5|i):i<256?(s(e<<5|24),s(i)):i<65536?(s(e<<5|25),o(2).setUint16(l,i),l+=n):i<4294967296?(s(e<<5|26),o(4).setUint32(l,i),l+=n):(s(e<<5|27),a=i%4294967296,(t=o(8)).setUint32(l,(i-a)/4294967296),t.setUint32(l+4,a),l+=n)}if(function e(i){if(!1===i)return s(244);if(!0===i)return s(245);if(null===i)return s(246);if(i===t)return s(247);switch(typeof i){case"number":if(Math.floor(i)===i){if(0<=i&&i<=9007199254740992)return d(0,i);if(-9007199254740992<=i&&i<0)return d(1,-(i+1))}return s(251),void(o(8).setFloat64(l,i),l+=n);case"string":var a,u,c=[];for(a=0;a<i.length;++a){var m=i.charCodeAt(a);m<128?c.push(m):m<2048?(c.push(192|m>>6),c.push(128|63&m)):m<55296?(c.push(224|m>>12),c.push(128|m>>6&63),c.push(128|63&m)):(m=((1023&m)<<10|1023&i.charCodeAt(++a))+65536,c.push(240|m>>18),c.push(128|m>>12&63),c.push(128|m>>6&63),c.push(128|63&m))}return d(3,c.length),r(c);default:if(Array.isArray(i))for(d(4,u=i.length),a=0;a<u;++a)e(i[a]);else if(i instanceof Uint8Array)d(2,i.length),r(i);else{var v=Object.keys(i);for(d(5,u=v.length),a=0;a<u;++a){var h=v[a];e(h),e(i[h])}}}}(e),"slice"in i)return i.slice(0,l);for(var u=new ArrayBuffer(l),c=new DataView(u),m=0;m<l;++m)c.setUint8(m,a.getUint8(m));return u},decode:function(e,n,i){var a=new DataView(e),l=0;function o(n){var i;return i=new Uint8Array(e,l,n),l+=n,i}function s(){var e;return e=a.getUint8(l),l+=1,e}function r(){var e;return e=a.getUint16(l),l+=2,e}function d(){var e;return e=a.getUint32(l),l+=4,e}function u(){return 255===a.getUint8(l)&&(l+=1,!0)}function c(e){if(e<24)return e;if(24===e)return s();if(25===e)return r();if(26===e)return d();if(27===e)return 4294967296*d()+d();if(31===e)return -1;throw"Invalid length encoding"}function m(e){var n=s();if(255===n)return -1;var i=c(31&n);if(i<0||n>>5!==e)throw"Invalid indefinite length element";return i}function v(e,n){for(var i=0;i<n;++i){var a=s();128&a&&(a<224?(a=(31&a)<<6|63&s(),n-=1):a<240?(a=(15&a)<<12|(63&s())<<6|63&s(),n-=2):(a=(15&a)<<18|(63&s())<<12|(63&s())<<6|63&s(),n-=3)),a<65536?e.push(a):(a-=65536,e.push(55296|a>>10),e.push(56320|1023&a))}}"function"!=typeof n&&(n=function(e){return e}),"function"!=typeof i&&(i=function(){return t});var h=function e(){var d,h,f,p,k,g=s(),x=g>>5,N=31&g;if(7===x)switch(N){case 25:return function(){var e=new ArrayBuffer(4),n=new DataView(e),i=r(),a=31744&i,t=1023&i;if(31744===a)a=261120;else if(0!==a)a+=114688;else if(0!==t)return 5960464477539063e-23*t;return n.setUint32(0,(32768&i)<<16|a<<13|t<<13),n.getFloat32(0)}();case 26:return d=a.getFloat32(l),l+=4,d;case 27:return h=a.getFloat64(l),l+=8,h}if((p=c(N))<0&&(x<2||6<x))throw"Invalid length";switch(x){case 0:return p;case 1:return -1-p;case 2:if(p<0){for(var w=[],b=0;(p=m(x))>=0;)b+=p,w.push(o(p));var y=new Uint8Array(b),S=0;for(f=0;f<w.length;++f)y.set(w[f],S),S+=w[f].length;return y}return o(p);case 3:var F=[];if(p<0)for(;(p=m(x))>=0;)v(F,p);else v(F,p);return String.fromCharCode.apply(null,F);case 4:if(p<0)for(k=[];!u();)k.push(e());else for(f=0,k=Array(p);f<p;++f)k[f]=e();return k;case 5:var j={};for(f=0;f<p||p<0&&!u();++f)j[e()]=e();return j;case 6:return n(e(),p);case 7:switch(p){case 20:return!1;case 21:return!0;case 22:return null;case 23:return t;default:return i(p)}}}();if(l!==e.byteLength)throw"Remaining bytes";return h}},"function"==typeof t&&t.amd?t("cbor/cbor",l):i.exports?i.exports=l:a.CBOR||(a.CBOR=l),o.exports);/**
 * This files defines the HoloPlayClient class and Message class.
 *
 * Copyright (c) [2019] [Looking Glass Factory]
 *
 * @link    https://lookingglassfactory.com/
 * @file    This files defines the HoloPlayClient class and Message class.
 * @author  Looking Glass Factory.
 * @version 0.0.8
 * @license SEE LICENSE IN LICENSE.md
 */let d=window.WebSocket;class u{sendMessage(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.alwaysdebug&&(e.cmd.debug=!0);let i=e.toCbor(),a=this.sendRequestObj(i,n);return a}disconnect(){this.ws.close()}openWebsocket(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.ws=new d("ws://localhost:11222/driver",["rep.sp.nanomsg.org"]),this.ws.parent=this,this.ws.binaryType="arraybuffer",this.ws.onmessage=this.messageHandler,this.ws.onopen=()=>{this.isConnected=!0,this.debug&&console.log("socket open"),null!=e&&this.sendMessage(e).then(n)},this.ws.onerror=this.onSocketError,this.ws.onclose=this.onClose}sendRequestObj(e,n){return new Promise((i,a)=>{let t={id:this.requestId++,parent:this,payload:e,success:i,error:a,send:function(){this.debug&&console.log("attemtping to send request with ID "+this.id),this.timeout=setTimeout(t.send.bind(this),1e3*n);let i=new Uint8Array(e.byteLength+4);new DataView(i.buffer).setUint32(0,this.id),i.set(new Uint8Array(this.payload),4),this.parent.ws.send(i.buffer)}};this.reqs.push(t),t.send()})}messageHandler(e){this.debug&&console.log("message");let n=e.data;if(n.byteLength<4)return;let i=new DataView(n).getUint32(0);if(i<2147483648){this.parent.err("bad nng header");return}let a=this.parent.findReqIndex(i);if(-1==a){this.parent.err("got reply that doesn't match known request!");return}let t={id:i,payload:r.decode(n.slice(4))};0==t.payload.error&&this.parent.reqs[a].success(t.payload),clearTimeout(this.parent.reqs[a].timeout),this.parent.reqs.splice(a,1),this.parent.reps.push(t),this.debug&&console.log(t.payload)}getRequestId(){return Math.floor(2147483647*this.prng())+2147483648}onClose(e){this.parent.isConnected=!1,this.parent.debug&&console.log("socket closed"),"function"==typeof this.parent.closeCallback&&this.parent.closeCallback(e)}onSocketError(e){this.parent.debug&&console.log(e),"function"==typeof this.parent.errCallback&&this.parent.errCallback(e)}err(e){this.debug&&console.log("[DRIVER ERROR]"+e)}findReqIndex(e){let n=0;for(;n<this.reqs.length;n++)if(this.reqs[n].id==e)return n;return -1}prng(){var e,n,i,a,t;return void 0==this.rng&&(this.rng=(e=(t=function(e){for(var n=0,i=1779033703^e.length;n<e.length;n++)i=(i=Math.imul(i^e.charCodeAt(n),3432918353))<<13|i>>>19;return function(){return i=Math.imul((i=Math.imul(i^i>>>16,2246822507))^i>>>13,3266489909),(i^=i>>>16)>>>0}}(Date.now().toString()))(),n=t(),i=t(),a=t(),()=>{var t=n<<9,l=5*e;return l=(l<<7|l>>>25)*9,i^=e,a^=n,n^=i,e^=a,i^=t,a=a<<11|a>>>21,(l>>>0)/4294967296})),this.rng()}constructor(e,n,i,a=!1,t,l,o){this.reqs=[],this.reps=[],this.requestId=this.getRequestId(),this.debug=a,this.isGreedy=l,this.errCallback=n,this.closeCallback=i,this.alwaysdebug=!1,this.isConnected=!1;let s=null;t||l||o?s=new m(t,l,o,this.debug):(a&&(this.alwaysdebug=!0),"function"==typeof e&&(s=new p)),this.openWebsocket(s,e)}}class c{toCbor(){return r.encode(this)}constructor(e,n){this.cmd=e,this.bin=n}}class m extends c{constructor(e="",n=!1,i="",a=!1){let t={init:{}};""!=e&&(t.init.appid=e),""!=i&&(t.init.onclose=i),n&&(t.init.greedy=!0),a&&(t.init.debug=!0),super(t,null)}}class v extends c{constructor(e=""){super({delete:{name:e}},null)}}class h extends c{constructor(e=""){super({check:{name:e}},null)}}class f extends c{constructor(e=null){let n={wipe:{}};null!=e&&(n.wipe.targetDisplay=e),super(n,null)}}class p extends c{constructor(){super({info:{}},null)}}class k extends c{constructor(){super({uniforms:{}},bindata)}}class g extends c{constructor(){super({shader:{}},bindata)}}class x extends c{constructor(e={vx:5,vy:9,aspect:1.6},n,i){let a={show:{source:"bindata",quilt:{type:"image",settings:e}}};null!=i&&(a.show.targetDisplay=i),super(a,n)}}class N extends c{constructor(e,n={vx:5,vy:9,aspect:1.6},i="",a=!1){super({cache:{show:a,quilt:{name:e,type:"image",settings:n}}},i)}}class w extends c{constructor(e,n=null,i=null){let a={show:{source:"cache",quilt:{name:e}}};null!=n&&(a.show.targetDisplay=n),null!=i&&(a.show.quilt.settings=i),super(a,null)}}},5216:function(e,n,i){"use strict";i.d(n,{EE:function(){return c},JS:function(){return o},UK:function(){return v},Z2:function(){return u},jt:function(){return r},nl:function(){return d}});var a=i(79487),t=i(9930),l=i(78789);let o=1e3,s={dropshadow:!0,wiggle:!0,animate:!1,frameTilt:!0,frametilt:!0,gyro:!1,permalink:!0,blend:!0,bg:"",theme:"none",aspect:0};function r(e){var n;let i=(0,a.X)(s);for(let n in e)void 0!=i[n]&&("boolean"==typeof s[n]?i[n]="1"==e[n]||"true"==e[n]:"string"==typeof s[n]?i[n]=e[n]:"number"==typeof s[n]&&(i[n]=parseFloat(e[n])));return(null===(n=i.bg)||void 0===n?void 0:n.match(/[a-z0-6]{6}/))||(i.bg=null),i.frameTilt=i.frameTilt||i.frametilt,i}function d(e,n){let i=m(n);delete i.aspect;let a=v(i);return(a&&(a="?"+a),e.privacy&&"UNLISTED"==e.privacy)?"".concat("https://blocks.glass","/embed/").concat(e.uuid).concat(a):"".concat("https://blocks.glass","/embed/").concat(e.id).concat(a)}function u(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="",a=!1;n.width&&n.height?i='width="'.concat(n.width,'" height="').concat(n.height,'"'):(a=!0,i='style="position:absolute;top:0;left:0;width:100%;height:100%;"');let l=d(e,n.props),o='<iframe src="'.concat(l,'"\n		frameborder="0"\n		').concat(i,'\n		allow="autoplay; encrypted-media; xr-spatial-tracking; accelerometer; gyroscope; magnetometer"\n		allowfullscreen\n		mozallowfullscreen="true"\n		webkitallowfullscreen="true"\n		execution-while-out-of-viewport="true"\n		execution-while-not-rendered="true"></iframe>');o=null==(o=null==o?void 0:o.replace(/\n|\t/g," "))?void 0:o.replace(/\s{2,}/g," ");let s="lkg-blocks-player";if(a){let n=e.aspectRatio||t.RF;return'<div class="'.concat(s,'" style="padding:').concat(Math.round(1280/n/1280*1e5)/1e3,'% 0 0 0;position:relative;">').concat(o,"</div>")}return'<div class="'.concat(s,'">').concat(o,"</div>")}function c(e){let n=m(e.embedProps),i=(0,l._B)(e.user,e.hologram,n),a={url:i,method:"json"};e.maxHeight&&(a.maxheight=e.maxHeight);let t=v(a);return"".concat("https://blocks.glass","/api/oembed?").concat(t)}function m(e){let n={};for(let i in e)e[i]&&s[i]!=e[i]&&(n[i]=e[i]);return n}function v(e){return Object.keys(e||{}).map(n=>n+"="+encodeURIComponent(e[n])).join("&")}},78789:function(e,n,i){"use strict";i.d(n,{Dd:function(){return j},Dk:function(){return f},FN:function(){return C},Gf:function(){return v},Kp:function(){return c},Sk:function(){return _},XA:function(){return I},ZP:function(){return m},_B:function(){return g},_i:function(){return S},aM:function(){return D},bC:function(){return k},bp:function(){return b},hP:function(){return p},nm:function(){return N},qY:function(){return F},sX:function(){return A},tr:function(){return w},yf:function(){return h}});var a,t,l=i(79487),o=i(70385),s=i(9930),r=i(5216),d=i(9564),u=i(56336);let c={PUBLIC:"Public",UNLISTED:"Unlisted",ONLY_ME:"Private"};function m(e){var n,i;if(!e)return null;let o=(0,l.X)(e);return o.sourceImage=o.sourceImages&&o.sourceImages.length>0?o.sourceImages[0]:null,o.sourceImage||(o.sourceImage=o.imageAssets&&o.imageAssets.length>0?o.imageAssets[0]:null),(a=o).user||(a.user={}),(t=o.user).username||(t.username=(0,u.Ms)(o.user)),o.hiddenPermalinkPath="/".concat(null==o?void 0:null===(n=o.user)||void 0===n?void 0:n.username,"/").concat(null==o?void 0:o.uuid),o.embedUrl=(0,r.nl)(o,{}),o.embedCode=(0,r.Z2)(o),o.permalinkPath=k(o.user,o),o.permalinkUrl=g(o.user,o),o.editLinkPath=f(o),o.isOwner=e=>y(e,o),o.hasEditPermission=e=>S(e,o),o.isViewable=(e,n)=>(function(e,n,i){if(!i)return!1;let a=S(e,i);return(!!i.isPublished||!!a)&&("PUBLIC"==i.privacy||"UNLISTED"==i.privacy&&(n==i.uuid||a)||"ONLY_ME"==i.privacy&&a)})(e,n,o),o.aspectRatioClassName=p(o.aspectRatio),"QUILT"==o.type?o=x(o):"RGBD"==o.type?((i=o).backgroundImage=I(i,i.sourceImage,Math.round(i.quiltTileCount/2),2e3,{blur:1100,bri:-30,h:2e3}),o=i):(console.warn("Holograms do not have a type!"),o=x(o)),o}function v(e){return null==e?void 0:e.map(e=>{var n,i;return{...h(e),sourceImages:e.imageAssets,permalink:g(e.user,e),user:{...e.user,username:(0,u.Ms)(e.user),displayName:(0,u.b3)(null==e?void 0:e.user),picture:null===(n=e.user)||void 0===n?void 0:null===(i=n.avatar)||void 0===i?void 0:i.url}}})}function h(e){var n,i,a,t;return e?{...e,aspectRatio:null!==(n=e.aspectRatio)&&void 0!==n?n:s.RF,quiltCols:null!==(i=e.quiltCols)&&void 0!==i?i:s.$e,quiltRows:null!==(a=e.quiltRows)&&void 0!==a?a:s.Ys,quiltTileCount:null!==(t=e.quiltTileCount)&&void 0!==t?t:s.ux}:e}function f(e,n){return"/".concat((0,u.Ms)(e.user),"/").concat(null==e?void 0:e.id,"/edit").concat(n?"?r="+n:"")}function p(e){return e<1?"aspect-h-4 aspect-w-3":1==e?"aspect-w-1 aspect-h-1":"aspect-w-16 aspect-h-9"}function k(e,n,i){let a=(0,r.UK)(i);return(a&&(a="?"+a),n.privacy&&"UNLISTED"==n.privacy)?"/".concat((0,u.Ms)(e),"/").concat(n.uuid).concat(a):"/".concat((0,u.Ms)(e),"/").concat(n.id).concat(a)}function g(e,n,i){return"https://blocks.glass"+k(e,n,i)}function x(e){return e.quilts=w(e),e.backgroundImage=N(e),e}function N(e){return I(e,e.sourceImages[0],Math.round(e.quiltTileCount/2),2e3,{blur:1100,bri:-30,h:2e3})}function w(e){var n;let i=null===(n=e.sourceImages)||void 0===n?void 0:n[0];if(!i)return console.warn("No source image found"),[];let a=[1e3];for(;a[a.length-1]+500<i.width;)a.push(a[a.length-1]+500);return a.push(i.width),a.map(e=>(0,d.iI)(i,e,{auto:e>6e3?null:"format",fm:"webp"})).filter(e=>null!=e)}function b(e){if(!e||!e.url)return console.warn("No image url found"),null;let n=(0,l.X)(e);if(n)return n.url+="&blur=200",n}function y(e,n){let i=null;if("user"in n){var a;i=null===(a=n.user)||void 0===a?void 0:a.id}else"userId"in n&&(i=n.userId);if(void 0==i)throw Error("isOwner: hologram.userId and .user.id are undefined");return e&&e.id==i}function S(e,n){return!!e&&!!n&&((null==e?void 0:e.role)=="ADMIN"||y(e,n))}function F(e){return"ONLY_ME"!=e.privacy&&e.isPublished}function j(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=w(e);return(null==a?void 0:a.length)==0?e.sourceImages[0].url:D(a,n*e.quiltCols,i)}function C(e,n){if(void 0==e)return console.error("getClosestImage: images is undefined"),null;let i=e.map(e=>e.width);if(0==i.length)return null;var a=i.reduce(function(e,i){return Math.abs(i-n)<Math.abs(e-n)?i:e});return e.find(e=>e.width==a)}function D(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=Math.min(7e3,i);return 0==(e=e.filter(e=>!(e.width>a||e.height>a))).length?null:C(e,n).url}function _(e){let n=e.quiltRows||s.Ys,i=e.quiltCols||s.$e;return e.quiltTileCount>0?e.quiltTileCount:i*n}function A(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1200;return"QUILT"==(e=h(e)).type?function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1200;return I(e,n,Math.round(e.quiltTileCount/2),i,{fit:"scale",fm:"jpg",auto:null})}(e,n,i):"RGBD"==e.type?function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1200,a=e.aspectRatio,t=Math.round(i/a);t%2&&(t+=1);let l=(0,d.iI)(n,i,{...d.iY,fit:"cover",h:t});return l.height=t,l}(e,n,i):null}function I(e,n,i,a){let t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=e.quiltRows||s.Ys,o=e.quiltCols||s.$e,r=e.aspectRatio||s.RF,u=Math.round(n.width/e.quiltCols);a>u&&(a=u);let c=Math.round(n.width/o),m=Math.round(n.height/l),v=Math.round(a/r);v%2&&(v+=1);let h=(0,d.iI)(n,a,{...d.iY,fit:"crop",rect:"".concat(i%o*c,",").concat(Math.floor((o*l-i-1)/o)*m,",").concat(c,",").concat(m),h:v,...t});return t.fit&&(h.url="".concat(h.url,"&fit=").concat(t.fit)),h.height=v,h}o.Prisma.validator()({include:{imageAssets:!0,user:{include:{avatar:!0}}}}),o.Prisma.validator()({include:{user:!0}})},9564:function(e,n,i){"use strict";i.d(n,{iI:function(){return o},iY:function(){return t}});var a=i(89927);let t={fm:"webp",auto:"format",fit:"max"},l=new a.Z({domain:"lkg-blocks.imgix.net"});function o(e){var n,i,a;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(s={...t,...s},!(null==e?void 0:null===(n=e.url)||void 0===n?void 0:n.match(/s3.amazonaws.com/))&&!(null==e?void 0:null===(i=e.url)||void 0===i?void 0:i.includes("dl.blocks.glass"))&&!(null==e?void 0:null===(a=e.url)||void 0===a?void 0:a.includes("lkg-blocks.imgix.net")))throw Error("Not a valid image ".concat(e.url));let d=e.url.replace("https://".concat("dl.blocks.glass"),"");d=(d=(d=d.replace("https://s3.amazonaws.com/".concat("lkg-blocks"),"")).replace("https://".concat("lkg-blocks.imgix.net"),"")).split("?")[0],o&&(s.w=o),r&&(s.h=r);let u=l.buildURL(d,s),c="image/".concat(s.fm||"webp"),m=e.width/e.height;return{...e,url:u,width:o,height:Math.round(o/m),type:c}}},73047:function(e,n,i){"use strict";function a(e){return new Promise(n=>setTimeout(n,e))}function t(e){return e?e.match(/-/)?{uuid:e}:{id:parseInt(e)}:{}}function l(e){let n=null==e?void 0:e.match(/(_?qs([0-9]+)x([0-9]+)a(([0-9]*[.])?[0-9]+))/);if(n){let e=parseInt(n[2]),i=parseInt(n[3]);return{quiltCols:e,quiltRows:i,aspectRatio:parseFloat(n[4]),quiltTileCount:e*i}}}function o(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"}function s(e){let n=e.length,i=0;for(;0!=n;)i=Math.floor(Math.random()*n),n--,[e[n],e[i]]=[e[i],e[n]];return e}function r(e){var n,i,a;return null===(n=null===(i=null===(a=null==e?void 0:e.toLowerCase())||void 0===a?void 0:a.split(" "))||void 0===i?void 0:i.map(e=>e.charAt(0).toUpperCase()+e.slice(1)))||void 0===n?void 0:n.join(" ")}function d(e){let n=RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}+|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}+|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)+|\\p{EPres}(\\p{EMod}+|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?|\\p{Emoji}(\\p{EMod}+|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})","gu");return null==e?void 0:e.replace(n,function(e){return'<span class="emoji" role="img" aria-hidden="true">'.concat(e,"</span>")})}function u(e){return e.replace(/_?\(?(qs[0-9]+x[0-9]+a([0-9]*[.])?[0-9]+)\)?/g,"")}function c(e){var n,i,a;return null!==(a=null===(n=null===(i=null==e?void 0:e.filter(e=>null!==e))||void 0===i?void 0:i.map(e=>e.node))||void 0===n?void 0:n.filter(e=>null!=e))&&void 0!==a?a:[]}i.d(n,{$o:function(){return t},TV:function(){return s},Vs:function(){return a},Y4:function(){return d},YO:function(){return c},a5:function(){return r},hY:function(){return u},pg:function(){return l},x6:function(){return o}})},56336:function(e,n,i){"use strict";i.d(n,{BE:function(){return u},Ms:function(){return m},WH:function(){return c},b3:function(){return v},lh:function(){return d},t$:function(){return s}});var a=i(70385),t=i(30381),l=i.n(t),o=i(9564);function s(e){return void 0!==e.avatar?e.avatar?(0,o.iI)(e.avatar,500,{fit:"crop",crop:"faces",w:500,h:500}).url:"/foil-avatar.jpg":e.picture}i(96117),a.Prisma.validator()({include:{avatar:!0}});let r=new Date("2023-02-10 00:00:00");function d(e){return!!e&&(null==e?void 0:e.lastViewedTermsAt)&&l()(null==e?void 0:e.lastViewedTermsAt).isSameOrAfter(r)}function u(e){return"".concat("https://blocks.glass").concat(c(e))}function c(e){return"/".concat(m(e))}function m(e){return e.username?e.username.toLowerCase():"user".concat(e.id)}function v(e){return e.displayName?e.displayName:m(e)}},90980:function(e,n,i){"use strict";i.d(n,{CZ:function(){return d},ME:function(){return s},Nw:function(){return t},Ox:function(){return r},S8:function(){return u},Xs:function(){return l},l$:function(){return o}});var a=i(83454);let t=!!a.env.ALLOW_BLANK_USERNAME_FOR_TESTING,l=3,o=20,s=RegExp(/^[a-zA-z0-9_\-]{3,20}$/,"i"),r=314572800,d=5242880,u=140},9930:function(e,n,i){"use strict";i.d(n,{vU:function(){return en},Tv:function(){return ei},RF:function(){return $},$e:function(){return K},Ys:function(){return J},ux:function(){return ee},rE:function(){return Y},lI:function(){return X},ww:function(){return ea}});var a,t=i(79487);function l(e){return e.replace("s3.amazonaws.com/".concat("lkg-blocks"),"dl.blocks.glass")}var o=i(78789),s=i(73047),r=i(54005),d=i.n(r),u=i(74701),c=i.n(u),m=i(17187),v=i.n(m),h=i(86520),f=i(83454);let p={},k={};try{v().defaultMaxListeners=50}catch(e){}let g=h.Mw?1e4:6e4;h.mj&&(g=void 0);var x=function(e,n){let i=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"default"===n?f.env.REDIS_URL:null!==(e=f.env.UPSTASH_REDIS_URL)&&void 0!==e?e:f.env.REDIS_URL}(null==n?void 0:n.redisHost);return new(c())(e,{...n,settings:{guardInterval:g,...null==n?void 0:n.settings},defaultJobOptions:{attempts:3,removeOnComplete:{age:864e5},...null==n?void 0:n.defaultJobOptions},createClient(e,n){let a={maxRetriesPerRequest:null,enableReadyCheck:!1,...n};switch(e){case"client":return p[i]||(p[i]=new(d())(i,a)),p[i];case"subscriber":return k[i]||(k[i]=new(d())(i,a)),k[i];case"bclient":return new(d())(i,a);default:throw Error("Unexpected connection type: ",e)}}})};async function N(e){if(e.hologram||(e.hologram=await e.prisma.hologram.findUnique({where:{id:e.hologramId}})),!e.hologram)throw Error("hologram not found for id ".concat(e.hologramId));if("RGBD"==e.hologram.type){console.log("skipping animated preview creation for rgbd hologram");return}try{var n;return await w.queue.add({hologramId:null===(n=e.hologram)||void 0===n?void 0:n.id},{priority:4})}catch(e){console.error(e)}}let w={queue:x("createAnimatedPreviews",{redisHost:"default",defaultJobOptions:{removeOnComplete:{age:864e5}}})};var b=i(9669),y=i.n(b),S=i(98754),F=i.n(S);async function j(e){try{let n=await F()(e);if(n.orientation>=5){let e=n.width;n.width=n.height,n.height=e}return n}catch(n){return n&&"number"==typeof n.code&&403===n.code&&console.warn("Forbidden access to URL:",e),null}}i(90980);var C=i(83454);async function D(){let e=(await Promise.all([i.e(6586),i.e(8690),i.e(8022)]).then(i.t.bind(i,98690,23))).S3,n=(await i.e(3375).then(i.bind(i,13375))).AWS_CONFIG;return new e(n)}async function _(e){return new Promise(async(n,a)=>{var t;let l=(await Promise.all([i.e(6586),i.e(8690),i.e(8022)]).then(i.t.bind(i,98690,23))).CloudFront,o=(await i.e(3375).then(i.bind(i,13375))).AWS_CONFIG,s=new l(o);console.log("cloudfrontInvalidate",e,C.env.NEXT_AWS_CLOUDFRONT_DISTRIBUTION_ID),s.createInvalidation({DistributionId:null!==(t=C.env.NEXT_AWS_CLOUDFRONT_DISTRIBUTION_ID)&&void 0!==t?t:"",InvalidationBatch:{Paths:{Quantity:1,Items:["/"+e]},CallerReference:Date.now().toString()}},(e,i)=>{e?(console.error("cloudfrontInvalidate failed",e),a(e)):n(!0)})})}async function A(e,n){return new Promise(async(i,a)=>{let t=await D();t.copyObject({Bucket:"lkg-blocks",CopySource:"".concat("lkg-blocks","/").concat(e),Key:e,MetadataDirective:"REPLACE",ACL:"public-read",ContentDisposition:'attachment; filename="'.concat(n,'"')},(e,n)=>{e?(console.error("s3UpdateFileName failed",e),a(e)):i(!0)})})}i(48764).Buffer;let I={queue:x("deleteFromS3",{redisHost:"default",limiter:{duration:2e3,max:1}}),process:async(e,n)=>{try{for await(let n of(await M(e.data),await e.log("Deleted files off S3"),e.data)){let i=n.replace("https://s3.amazonaws.com/".concat("lkg-blocks","/"),"");await (0,s.Vs)(1e3),await _(i),await e.log("Invalidated ".concat(i))}n()}catch(e){console.error(e),n(e)}}};async function M(e){return new Promise(async(n,a)=>{let t=(await Promise.all([i.e(6586),i.e(8690),i.e(8022)]).then(i.t.bind(i,98690,23))).S3,l=(await i.e(3375).then(i.bind(i,13375))).AWS_CONFIG;if(0===(e=e.filter(e=>!e.includes("/testing/"))).length){n(!0);return}let o=new t(l);o.deleteObjects({Bucket:"lkg-blocks",Delete:{Objects:e.map(e=>({Key:e.replace("https://s3.amazonaws.com/".concat("lkg-blocks","/"),"")}))}},async(e,i)=>{e?(console.error("Job failed",e),a(e)):n(!0)})})}var R=i(30381),T=i.n(R),V=i(99386),E=i(83454);let L=new V.KU({accessToken:E.env.HUBSPOT_ACCESS_TOKEN});var U=i(56336),P=i(83454);let q={queue:x("hubspotContactSync",{redisHost:"default",limiter:{duration:1e3,max:1},defaultJobOptions:{attempts:3,priority:90,delay:3e4,removeOnComplete:!0}}),process:async(e,n)=>{var a,t,l,o,s;if(!P.env.HUBSPOT_ACCESS_TOKEN){n(null,"Hubspot access token not set");return}let r=(await Promise.all([i.e(3132),i.e(4075)]).then(i.bind(i,14075))).default,d=await r.user.findFirst({where:{id:e.data.id},include:{holograms:!0,featureNotifications:!0}});if(!(null==d?void 0:d.email)){n(null,"User not found");return}let u=new Date;u.setUTCHours(0,0,0,0);let c=null==d?void 0:null===(a=d.featureNotifications)||void 0===a?void 0:a.map(e=>e.feature);await e.progress(50);let m=await B({email:d.email,firstname:null===(t=null===(l=d.displayName)||void 0===l?void 0:l.split(" "))||void 0===t?void 0:t[0],lastname:null===(o=null===(s=d.displayName)||void 0===s?void 0:s.split(" "))||void 0===o?void 0:o[1],beta_tester:!0,has_lkg_auth0_account:!0,total_holograms_uploaded:d.holograms.length,last_signed_in_at:function(e){if(e)return Date.parse(T()(e).utc().startOf("day").toISOString())}(new Date),blocks_profile:(0,U.BE)(d),blocks_persona:d.persona,blender_downloads:d.blenderDownloads,unity_downloads:d.unityDownloads,unreal_downloads:d.unrealDownloads,feature_c4d:c.includes("CINEMA4D"),feature_webxr:c.includes("WEBXR"),feature_photo:c.includes("PHOTO_TO_HOLOGRAM")});await e.progress(100),n(null,"Hubspot contact ".concat(m.id," updated"))}};async function B(e){var n;let i=await L.crm.contacts.searchApi.doSearch({properties:["firstname","lastname","email"],query:e.email,after:0,limit:2,sorts:[],filterGroups:[]}),a=null===(n=i.results)||void 0===n?void 0:n[0];return a?(a.properties.firstname&&delete e.firstname,a.properties.lastname&&delete e.lastname,a=await L.crm.contacts.basicApi.update(a.id,{properties:e})):a=await L.crm.contacts.basicApi.create({properties:e}),a}let O={concurrency:3,queue:x("UpdateFileName",{redisHost:"default"}),process:async(e,n)=>{try{let a=(await Promise.all([i.e(3132),i.e(4075)]).then(i.bind(i,14075))).default,{hologramId:t}=e.data,l=await a.hologram.findFirst({where:{id:t},include:{user:!0}});if(!l){n(Error("hologram not found"),null);return}let o=await ea(a).sourceImages(t,!1),s=null==o?void 0:o[0];if(!s){n(Error("quilt not found"),null);return}let r=s.url.replace("https://s3.amazonaws.com/".concat("lkg-blocks","/"),""),d=await j(s.url),u=d?d.type:".png",c=l.title.replace(/[^a-zA-Z0-9_\.\- ]+/gi,"").substring(0,20),m="QUILT"==l.type?" (qs".concat(l.quiltCols,"x").concat(l.quiltRows,"a").concat(l.aspectRatio,")"):"",v="".concat(l.id," - ").concat(c," by ").concat((0,U.b3)(l.user)," - Looking Glass Blocks").concat(m,".").concat(u);await A(r,v),await _(r),n(null,{filename:v})}catch(e){n(e,null)}}},H={concurrency:5,queue:x("WarmImgixUrl",{redisHost:"default",defaultJobOptions:{priority:60,removeOnComplete:{age:36e5}}}),process:async(e,n)=>{try{await Z({url:e.data.url,job:e,done:n}),n(null,{success:!0})}catch(e){n(e)}}};async function Z(e){let{url:n,job:i,done:a}=e;if(n){let e=await y().head(n);return 200!==e.status?(a(Error("Warm failed ".concat(n," ").concat(e.status," ").concat(e.statusText))),!1):(await i.log("Warmed ".concat(e.headers["content-type"]," length:").concat(e.headers["content-length"]," x-cache:").concat(e.headers["x-cache"],"\n").concat(n)),!0)}return!1}let z={queue:x("WarmQuiltCache",{redisHost:"default",defaultJobOptions:{priority:50,removeOnComplete:3}}),process:async(e,n)=>{let a=(await Promise.all([i.e(3132),i.e(4075)]).then(i.bind(i,14075))).default;try{await a.hologram.findFirst({where:{id:e.data.id}});let i=await a.hologram.findFirst({where:{id:e.data.id},include:{user:!0}});if(!(null==i?void 0:i.id))throw Error("Hologram not found");let t=await ea(a).sourceImages(i.id),l=(0,o.tr)({sourceImages:t}),s=0;for await(let e of l)e.url&&(await H.queue.add({url:e.url}),s++);for await(let e of l){if(!e.url)continue;let n=e.url.replace("fm=webp","fm=avif");await H.queue.add({url:n}),s++}n(null,{queuedJobs:s++})}catch(e){n(e)}}};var G=i(78863),Q=i(9564);async function W(e){let{args:n,object:i,where:a,orderBy:t}=e,l=n.after?(0,G.wL)(n.after)+1:0;if(isNaN(l))throw Error("cursor is invalid");n.first||(n.first=25),n.first>100&&(n.first=100);let[o,s]=await Promise.all([i.count({where:a}),i.findMany({take:n.first,skip:l,orderBy:t,where:a})]);return(0,G.UL)(s,{first:n.first,after:n.after},{sliceStart:l,arrayLength:o})}let Y=["png","jpg","jpeg","webp","bmp"],X=Y.map(e=>"image/".concat(e)),$=.75,J=9,K=5,ee=45,en=["png","jpg","jpeg","webp","bmp","heic"],ei=en.map(e=>"image/".concat(e));function ea(e){return Object.assign(e,{async getAllPublicWhereInput(n){let i={privacy:"PUBLIC",isPublished:!0,type:"ALL"==n.hologramClass?void 0:n.hologramClass};if(n.discover||(i.isShadowBan=!1),n.userId>0)i.userId=n.userId;else if(n.username){var a;let t=await Object.assign(a=e.user,{staff:async()=>await a.findFirst({where:{username:"staff"}}),signup:async e=>await a.create({data:e}),async find(e){let n={};if(e.id>0)n.id=e.id;else if(e.subId)n.subId=e.subId;else if(e.username){let i=e.username.match(/^user([0-9]+)$/i);i?n.id=parseInt(i[1]):n.username=e.username.toLowerCase()}else if(e.email)n.email=e.email;else throw Error("No arguments passed in");return await a.findFirst({where:n})},async getPicture(e){let n=await a.findUnique({where:{id:e.id}}).avatar();return n?(0,Q.iI)(n,500,{fit:"crop",crop:"faces",w:500,h:500}).url:"https://blocks.glass/foil-avatar.jpg"},async incrementDownload(e,n){let i=null;switch(n){case"BLENDER":i={blenderDownloads:{increment:1}};break;case"UNITY":i={unityDownloads:{increment:1}};break;case"UNREAL":i={unrealDownloads:{increment:1}}}return i?await a.update({where:{id:e.id},data:i}):null}}).find({username:n.username});if((null==t?void 0:t.id)>0)i.userId=null==t?void 0:t.id;else throw Error("This user does not exist")}return n.ids&&n.ids.length>0&&(i.id={in:n.ids}),i},async getAllPublic(n){let i={id:"desc"};if(null!=n.orderBy){let e=n.orderBy.split(":");i={[e[0]]:e[1]}}let a=await this.getAllPublicWhereInput(n);return W({args:n,object:e.hologram,orderBy:i,where:a})},async update(n,i){let a=await e.hologram.update({data:i,where:{id:n}});return i.title&&await O.queue.add({hologramId:n}),await N({hologram:a,prisma:e}),a},async findFirst(n){let{idOrUuid:i,requestUserId:a,allowPrivate:t,...l}=n;i&&(l={...l,...(0,s.$o)(i)});let r={};a&&(r={userId:a},l.id?r.id=l.id:r.uuid=l.uuid);let d=null;return t?(d=await e.hologram.findFirst({where:l,include:{user:!0}}),(0,o.yf)(d)):(l.id?d=await e.hologram.findFirst({where:{OR:[{id:l.id,privacy:"PUBLIC",isPublished:!0},r]},include:{user:!0}}):l.uuid&&(d=await e.hologram.findFirst({where:{OR:[{uuid:l.uuid,privacy:"UNLISTED",isPublished:!0},r]},include:{user:!0}})),d)?(0,o.yf)(d):null},async create(n){var i;if((a=n).type||(a.type="QUILT"),"QUILT"==n.type){let e=(0,s.pg)(n.sourceImage.url);e&&(n={...e,...n})}let l=null!==(i=n.title)&&void 0!==i?i:"Untitled";n.title||(l=(l=(l=n.sourceImage.url.split("/").pop()).replace(/_/g," ")).replace(/\.[a-z]{3,4}$/,""),l=(l=(0,s.hY)(l)).trim());let o=(0,t.X)(n),{isShadowBan:r}=await e.user.findFirst({where:{id:n.userId}});o.isShadowBan=r,delete o.sourceImage,delete o.imageUrl,delete o.width,delete o.height,delete o.fileSize;let d=await e.hologram.create({data:{...o,title:l}});return await e.imageAsset.create({data:eo(d.id,n.sourceImage)}),"QUILT"==n.type&&await Promise.all([z.queue.add({id:d.id}),N({hologram:d,prisma:e})]),await q.queue.add({id:n.userId,context:"createHologram"}),d},async delete(n){let i=await e.imageAsset.findMany({where:{hologramId:n}}),a=await e.hologram.delete({where:{id:n}});return i.length>0&&I.queue.add(i.map(e=>e.url),{delay:6048e5}),a},async replaceSourceImage(n,i){let a=(0,s.pg)(i.url);return a&&await this.update(n,{quiltCols:a.quiltCols,quiltRows:a.quiltRows,quiltTileCount:a.quiltTileCount,aspectRatio:a.aspectRatio}),await e.imageAsset.create({data:eo(n,i)}),await z.queue.add({id:n}),await e.hologram.findFirst({where:{id:n}})},async getQuiltAngleImages(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(!e.id)throw Error("Hologram must have an ID to fetch quilt angle images");let i=await this.sourceImages(e.id);return null==i||0==i.length?[]:[...Array((0,o.Sk)(e)||0)].map((a,t)=>(0,o.XA)(e,null==i?void 0:i[0],t,n,{fit:"scale",fm:"png",auto:null}))},async thumbnail(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200;if(e.id){let i=await this.sourceImages(e.id);if(null!=i&&i.length>0)return(0,o.sX)(e,i[0],n)}return null},async thumbnails(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],void 0==e.id)return null;let n=await this.sourceImages(e.id);return null==n||0==n.length?[]:[250,500,750,1e3,1200].map(i=>(0,o.sX)(e,null==n?void 0:n[0],i))},async rgbdAssets(n){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=await e.hologram.findUnique({where:{id:n}}).imageAssets(et);return null==a?void 0:a.map(e=>(i&&(e.url=l(e.url)),e))},async sourceImages(n){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=await e.hologram.findUnique({where:{id:n}}).imageAssets(el);return null==a?void 0:a.map(e=>(i&&(e.url=l(e.url)),e))},async getShadowBanStatus(n){let{isShadowBan:i}=await e.hologram.findFirst({where:{id:n},select:{isShadowBan:!0}});return i},async setShadowBanStatus(n,i){let{isShadowBan:a}=await e.hologram.update({data:{isShadowBan:i},where:{id:n}});return a},async getCanUsersDownloadAssets(n){let{canUsersDownload:i}=await e.hologram.findFirst({where:{id:n},select:{canUsersDownload:!0}});return i},async setCanUsersDownloadAssets(n,i){let{canUsersDownload:a}=await e.hologram.update({data:{canUsersDownload:i},where:{id:n}});return a}})}let et={where:{kind:{in:["RGBD","DEPTH"]}},orderBy:{id:"desc"},take:2},el={where:{OR:[{type:{in:X},kind:"NONE"},{kind:"SOURCE"}]},orderBy:{id:"desc"},take:1};function eo(e,n){var i;let a=n.url.match("(".concat(Y.join("|"),")")),t="image/png";return a&&(t="image/".concat(a[1])),{url:function(e){let n=e.match(/https:\/\/([a-zA-Z0-9-]+).s3.amazonaws.com\/(.*)/);n&&(e="https://s3.amazonaws.com/".concat(n[1],"/").concat(n[2]));let i=e.match(/(.+?)\?(.*)/);return i?i[1]:e}(n.url),width:n.width,height:n.height,type:null!==(i=n.type)&&void 0!==i?i:t,fileSize:n.fileSize,hologramId:e,kind:"SOURCE"}}},47543:function(e){e.exports={pulse:"HologramCastButton_pulse__KLwOd",pulse_manage:"HologramCastButton_pulse_manage__FtT3j",dark:"HologramCastButton_dark___N7ky"}},52058:function(e){e.exports={TooltipContent:"Tooltip_TooltipContent__88HQF",slideUp:"Tooltip_slideUp__SExAH",slideDown:"Tooltip_slideDown__kYuUE"}},83866:function(e){e.exports={button:"Renderer_button__v6Y1q",disco:"Renderer_disco__B7OuO",content:"Renderer_content__1QnZQ",hidden:"Renderer_hidden__ldJax",isBusy:"Renderer_isBusy__kdh20"}},54631:function(e){e.exports={gradient:"CastIcon_gradient__PeFzn"}},22673:function(){},66366:function(){},96145:function(){},37281:function(){},46007:function(){},70110:function(){},19527:function(){},69331:function(){},93478:function(){},40134:function(){},92499:function(){},93569:function(){},36403:function(){},24420:function(){},94651:function(){}}]);